(globalThis.webpackChunk_openmrs_esm_form_builder_app=globalThis.webpackChunk_openmrs_esm_form_builder_app||[]).push([[0],{92483:(e,t,n)=>{var r={"./en.json":[73979,979],"./es.json":[44465,465],"./fr.json":[138,138],"./km.json":[51050,50]};function o(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((()=>n.t(o,19)))}o.keys=()=>Object.keys(r),o.id=92483,e.exports=o},89454:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__action-buttons__actionButtons___fHui9{display:flex;align-items:center;justify-content:flex-end;margin:1rem 0}.-esm-form-builder__action-buttons__actionButtons___fHui9 button{margin-left:1rem}.-esm-form-builder__action-buttons__spinner___uTjVo.cds--inline-loading{min-height:1rem}","",{version:3,sources:["webpack://./src/components/action-buttons/action-buttons.scss"],names:[],mappings:"AAAA,0DACE,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,aAAA,CAEA,iEACE,gBAAA,CAKF,wEACE,eAAA",sourceRoot:""}]),i.locals={actionButtons:"-esm-form-builder__action-buttons__actionButtons___fHui9",spinner:"-esm-form-builder__action-buttons__spinner___uTjVo"};const l=i},40270:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__dashboard__container___Wal_P{padding:1rem;background-color:#f4f4f4}.-esm-form-builder__dashboard__backgroundDataFetchingIndicator___pvhG5{flex:1}.-esm-form-builder__dashboard__flexContainer___Mm18q{display:flex;justify-content:space-between}.-esm-form-builder__dashboard__toolbarWrapper___RUga4{position:relative;display:flex;justify-content:flex-end}.omrs-breakpoint-lt-desktop .-esm-form-builder__dashboard__toolbarWrapper___RUga4{height:3rem}.omrs-breakpoint-gt-tablet .-esm-form-builder__dashboard__toolbarWrapper___RUga4{height:2rem}.-esm-form-builder__dashboard__tableToolbar___C3SIt{width:20%;min-width:12.5rem}.-esm-form-builder__dashboard__headerContainer___p8D9T{background-color:#f4f4f4}.-esm-form-builder__dashboard__searchbox___Xqlyd input{outline:2px solid #ff832b !important}.-esm-form-builder__dashboard__link___qKq6V{text-decoration:none}.-esm-form-builder__dashboard__table___bB2_m tr:last-of-type td{border-bottom:none}.-esm-form-builder__dashboard__table___bB2_m td{padding-top:0;padding-bottom:0}.-esm-form-builder__dashboard__toolbar___Jd1Mo{position:relative;display:flex;width:100%;min-height:2rem;margin-bottom:.5rem}.-esm-form-builder__dashboard__emptyContainer___NMRCU{justify-content:center;align-items:center;width:100%;padding:1rem}.-esm-form-builder__dashboard__tableContainer___g3LIB{padding:0}.-esm-form-builder__dashboard__tableContainer___g3LIB .cds--data-table-content{border:1px solid #e0e0e0;border-bottom:none;overflow:visible}.-esm-form-builder__dashboard__tableContainer___g3LIB .cds--table-toolbar{position:relative;height:2rem;min-height:0rem;overflow:visible;top:0}.-esm-form-builder__dashboard__tableContainer___g3LIB.cds--data-table-container{padding-top:0rem}.-esm-form-builder__dashboard__filterContainer____yxN0{flex:1}.-esm-form-builder__dashboard__filterContainer____yxN0 .cds--dropdown__wrapper--inline{gap:0}.-esm-form-builder__dashboard__filterContainer____yxN0 .cds--list-box__menu-icon{height:1rem}.-esm-form-builder__dashboard__filterDropdown___Uo1aK{margin-bottom:.5rem}.-esm-form-builder__dashboard__content___rpYvj{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin-bottom:.5rem}.-esm-form-builder__dashboard__tileContainer___qC3f7{background-color:#fff;border-top:1px solid #525252;padding:5rem 0}.-esm-form-builder__dashboard__tile___NdQlL{margin:auto;width:fit-content}.-esm-form-builder__dashboard__tileContent___OIedg{display:flex;flex-direction:column;align-items:center}.-esm-form-builder__dashboard__warningMessage___hTdHn{margin:1rem 0}.-esm-form-builder__dashboard__spinner___e3Lbh.cds--inline-loading{min-height:1rem}","",{version:3,sources:["webpack://./src/components/dashboard/dashboard.scss","webpack://./node_modules/@carbon/colors/index.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAIA,iDACE,YAAA,CACA,wBCoCQ,CDjCV,uEACE,MAAA,CAGF,qDACE,YAAA,CACA,6BAAA,CAGF,sDACE,iBAAA,CACA,YAAA,CACA,wBAAA,CAIA,kFACE,WEyBS,CFpBX,iFACE,WESS,CFLb,oDACE,SAAA,CACA,iBAAA,CAGF,uDACE,wBAAA,CAIA,uDACE,oCAAA,CAIJ,4CACE,oBAAA,CAMI,gEACE,kBAAA,CAKN,gDACE,aAAA,CACA,gBAAA,CAIJ,+CACE,iBAAA,CACA,YAAA,CACA,UAAA,CACA,eAAA,CACA,mBAAA,CAGF,sDACE,sBAAA,CACA,kBAAA,CACA,UAAA,CACA,YAAA,CAGF,sDACE,SAAA,CAEA,+EACE,wBAAA,CACA,kBAAA,CACA,gBAAA,CAGF,0EACE,iBAAA,CACA,WAAA,CACA,eAAA,CACA,gBAAA,CACA,KAAA,CAGF,gFACE,gBAAA,CAKJ,uDACE,MAAA,CAEA,uFACE,KAAA,CAGF,iFACE,WAAA,CAIJ,sDACE,mBEpGW,CFuGb,+CGsuBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CHpuBF,aC9EQ,CD+ER,mBAAA,CAGF,qDACE,qBCTQ,CDUR,4BAAA,CACA,cAAA,CAGF,4CACE,WAAA,CACA,iBAAA,CAGF,mDACE,YAAA,CACA,qBAAA,CACA,kBAAA,CAGF,sDACE,aAAA,CAIA,mEACE,eAAA",sourceRoot:""}]),i.locals={container:"-esm-form-builder__dashboard__container___Wal_P",backgroundDataFetchingIndicator:"-esm-form-builder__dashboard__backgroundDataFetchingIndicator___pvhG5",flexContainer:"-esm-form-builder__dashboard__flexContainer___Mm18q",toolbarWrapper:"-esm-form-builder__dashboard__toolbarWrapper___RUga4",tableToolbar:"-esm-form-builder__dashboard__tableToolbar___C3SIt",headerContainer:"-esm-form-builder__dashboard__headerContainer___p8D9T",searchbox:"-esm-form-builder__dashboard__searchbox___Xqlyd",link:"-esm-form-builder__dashboard__link___qKq6V",table:"-esm-form-builder__dashboard__table___bB2_m",toolbar:"-esm-form-builder__dashboard__toolbar___Jd1Mo",emptyContainer:"-esm-form-builder__dashboard__emptyContainer___NMRCU",tableContainer:"-esm-form-builder__dashboard__tableContainer___g3LIB",filterContainer:"-esm-form-builder__dashboard__filterContainer____yxN0",filterDropdown:"-esm-form-builder__dashboard__filterDropdown___Uo1aK",content:"-esm-form-builder__dashboard__content___rpYvj",tileContainer:"-esm-form-builder__dashboard__tileContainer___qC3f7",tile:"-esm-form-builder__dashboard__tile___NdQlL",tileContent:"-esm-form-builder__dashboard__tileContent___OIedg",warningMessage:"-esm-form-builder__dashboard__warningMessage___hTdHn",spinner:"-esm-form-builder__dashboard__spinner___e3Lbh"};const l=i},4298:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,'.-esm-form-builder__empty-state__action___O1dBg{margin-bottom:.5rem}.-esm-form-builder__empty-state__content___qowQ3{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);color:#525252;margin-top:1rem;margin-bottom:.5rem}.-esm-form-builder__empty-state__desktopHeading___kdF99 h4{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252}.-esm-form-builder__empty-state__tabletHeading___BEQmV h4{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);color:#525252}.-esm-form-builder__empty-state__desktopHeading___kdF99,.-esm-form-builder__empty-state__tabletHeading___BEQmV{text-align:left;text-transform:capitalize;margin-bottom:1rem}.-esm-form-builder__empty-state__desktopHeading___kdF99 h4:after,.-esm-form-builder__empty-state__tabletHeading___BEQmV h4:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__empty-state__heading___UrKNa:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__empty-state__tile___kOT5S{text-align:center;border:1px solid #e0e0e0}',"",{version:3,sources:["webpack://./src/components/empty-state/empty-state.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAIA,gDACE,mBCgBW,CDbb,iDE01BI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CFx1BF,aGsCQ,CHrCR,eCoBW,CDnBX,mBCSW,CDLX,2DEk1BE,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CFh1BA,aG8BM,CHzBR,0DE20BE,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CFz0BA,aGuBM,CHnBV,+GACE,eAAA,CACA,yBAAA,CACA,kBCDW,CDGX,iIACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAIJ,uDACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAGF,8CACE,iBAAA,CACA,wBAAA",sourceRoot:""}]),i.locals={action:"-esm-form-builder__empty-state__action___O1dBg",content:"-esm-form-builder__empty-state__content___qowQ3",desktopHeading:"-esm-form-builder__empty-state__desktopHeading___kdF99",tabletHeading:"-esm-form-builder__empty-state__tabletHeading___BEQmV",heading:"-esm-form-builder__empty-state__heading___UrKNa",tile:"-esm-form-builder__empty-state__tile___kOT5S"};const l=i},39761:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,'.-esm-form-builder__error-state__errorMessage___Y5qNF{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);margin-top:2.25rem;margin-bottom:.5rem}.-esm-form-builder__error-state__errorCopy___JQziZ{margin-bottom:.5rem;font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px);color:#525252}.-esm-form-builder__error-state__desktopHeading___Ri1i7 h4{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252}.-esm-form-builder__error-state__tabletHeading___XUrSF h4{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);color:#525252}.-esm-form-builder__error-state__desktopHeading___Ri1i7,.-esm-form-builder__error-state__tabletHeading___XUrSF{text-align:left;text-transform:capitalize;margin-bottom:1rem}.-esm-form-builder__error-state__desktopHeading___Ri1i7 h4:after,.-esm-form-builder__error-state__tabletHeading___XUrSF h4:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__error-state__tile___w49e4{text-align:center;border:1px solid #e0e0e0}',"",{version:3,sources:["webpack://./src/components/error-state/error-state.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAIA,sDC81BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD31BF,kBAAA,CACA,mBEaW,CFVb,mDACE,mBESW,CD60BT,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CDp1BF,aGkCQ,CH9BR,2DCg1BE,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD90BA,aG4BM,CHvBR,0DCy0BE,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDv0BA,aGqBM,CHjBV,+GACE,eAAA,CACA,yBAAA,CACA,kBEHW,CFKX,iIACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAIJ,8CACE,iBAAA,CACA,wBAAA",sourceRoot:""}]),i.locals={errorMessage:"-esm-form-builder__error-state__errorMessage___Y5qNF",errorCopy:"-esm-form-builder__error-state__errorCopy___JQziZ",desktopHeading:"-esm-form-builder__error-state__desktopHeading___Ri1i7",tabletHeading:"-esm-form-builder__error-state__tabletHeading___XUrSF",tile:"-esm-form-builder__error-state__tile___w49e4"};const l=i},34553:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__form-editor__container___EWcU0{padding:1rem 2rem;display:flex;flex-direction:column}.-esm-form-builder__form-editor__grid___wYMDM{margin-left:0;margin-right:0;padding-left:0;padding-right:0;max-width:100%}.-esm-form-builder__form-editor__grid___wYMDM .cds--tabs__nav-item--selected{border-bottom:2px solid var(--cds-border-interactive, #005d5d);outline:none !important}.-esm-form-builder__form-editor__column___C5MAT{margin-left:0;margin-right:0}.-esm-form-builder__form-editor__maximized___Iv6AJ .-esm-form-builder__form-editor__column___C5MAT:last-child{display:none}.-esm-form-builder__form-editor__errorNotification___G_V3y{min-width:100%;margin:0;padding:0}.-esm-form-builder__form-editor__actionButtons___SA2Vs{display:flex;align-items:center;justify-content:space-between}.-esm-form-builder__form-editor__actionButtons___SA2Vs button{margin-left:1rem}.-esm-form-builder__form-editor__formName___rQ3Te{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-form-builder__form-editor__editorContainer___ABeSl{padding:1rem}.-esm-form-builder__form-editor__editorContainer___ABeSl .ace_editor .ace_content .ace_layer .error{position:absolute;background-color:#da1e28;border-radius:0}.-esm-form-builder__form-editor__heading___SeRaW{display:flex;margin-right:1rem;align-items:center}.-esm-form-builder__form-editor__bottomHeader___vFLMN{display:flex;justify-content:space-between;align-items:center}.-esm-form-builder__form-editor__tabHeading___As8B0{display:flex;align-items:center;font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);min-height:2.5rem;width:100%;padding:.75rem}.-esm-form-builder__form-editor__backButton___uELHk{margin-left:1rem;padding:.5rem 0;max-width:fit-content}.-esm-form-builder__form-editor__backButton___uELHk a{text-decoration:none}.-esm-form-builder__form-editor__backButton___uELHk button{display:flex;padding-left:0 !important}.-esm-form-builder__form-editor__backButton___uELHk button svg{order:1;margin:0 .5rem}.-esm-form-builder__form-editor__backButton___uELHk button span{order:2}button{padding-block-start:.5rem}.-esm-form-builder__form-editor__topBtns____p75f{display:flex;align-items:center}","",{version:3,sources:["webpack://./src/components/form-editor/form-editor.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/colors/index.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAIA,mDACE,iBAAA,CACA,YAAA,CACA,qBAAA,CAGF,8CACE,aAAA,CACA,cAAA,CACA,cAAA,CACA,eAAA,CACA,cAAA,CAEA,6EACE,8DAAA,CACA,uBAAA,CAIJ,gDACE,aAAA,CACA,cAAA,CAGF,8GACE,YAAA,CAGF,2DACE,cAAA,CACA,QAAA,CACA,SAAA,CAGF,uDACE,YAAA,CACA,kBAAA,CACA,6BAAA,CAEA,8DACE,gBAAA,CAIJ,kDCkzBI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD9yBJ,yDACE,YAAA,CAEA,oGACE,iBAAA,CACA,wBEwCK,CFvCL,eAAA,CAIJ,iDACE,YAAA,CACA,iBAAA,CACA,kBAAA,CAGF,sDACE,YAAA,CACA,6BAAA,CACA,kBAAA,CAGF,oDACE,YAAA,CACA,kBAAA,CCsxBE,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CDpxBF,iBAAA,CACA,UAAA,CACA,cAAA,CAGF,oDACE,gBGrDW,CHsDX,eAAA,CACA,qBAAA,CAEA,sDACE,oBAAA,CAGF,2DACE,YAAA,CACA,yBAAA,CAEA,+DACE,OAAA,CACA,cAAA,CAGF,gEACE,OAAA,CAKN,OACE,yBAAA,CAGF,iDACE,YAAA,CACA,kBAAA",sourceRoot:""}]),i.locals={container:"-esm-form-builder__form-editor__container___EWcU0",grid:"-esm-form-builder__form-editor__grid___wYMDM",column:"-esm-form-builder__form-editor__column___C5MAT",maximized:"-esm-form-builder__form-editor__maximized___Iv6AJ",errorNotification:"-esm-form-builder__form-editor__errorNotification___G_V3y",actionButtons:"-esm-form-builder__form-editor__actionButtons___SA2Vs",formName:"-esm-form-builder__form-editor__formName___rQ3Te",editorContainer:"-esm-form-builder__form-editor__editorContainer___ABeSl",heading:"-esm-form-builder__form-editor__heading___SeRaW",bottomHeader:"-esm-form-builder__form-editor__bottomHeader___vFLMN",tabHeading:"-esm-form-builder__form-editor__tabHeading___As8B0",backButton:"-esm-form-builder__form-editor__backButton___uELHk",topBtns:"-esm-form-builder__form-editor__topBtns____p75f"};const l=i},51659:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__form-renderer__container___qmP2j,.-esm-form-builder__form-renderer__loadingContainer___RJP8p{background-color:#fff;padding:1rem;overflow-y:scroll;height:100vh}.-esm-form-builder__form-renderer__loadingContainer___RJP8p{background-color:#f4f4f4;margin-top:5rem}.-esm-form-builder__form-renderer__loader___AOiPt{display:flex;justify-content:center;align-items:center;height:inherit}.-esm-form-builder__form-renderer__emptyStateTile___mZ_kI,.-esm-form-builder__form-renderer__errorStateTile___q9583{width:80%;margin:1.25rem auto;display:flex;flex-flow:column wrap;align-items:center;justify-content:center;padding:1.5rem}.-esm-form-builder__form-renderer__errorStateTile___q9583 .-esm-form-builder__form-renderer__helperText___Pnlco{margin:.75rem 0}.-esm-form-builder__form-renderer__errorStateTile___q9583 button{margin-top:.25rem}.-esm-form-builder__form-renderer__heading___S2HQc{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#161616}.-esm-form-builder__form-renderer__helperText___Pnlco{margin-top:.5rem;font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px);color:#262626}","",{version:3,sources:["webpack://./src/components/form-renderer/form-renderer.scss","webpack://./node_modules/@carbon/colors/index.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAIA,iHACE,qBCqHQ,CDpHR,YAAA,CACA,iBAAA,CACA,YAAA,CAGF,4DAEE,wBC6BQ,CD5BR,eAAA,CAGF,kDACE,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,cAAA,CAGF,oHACE,SAAA,CACA,mBAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,cAAA,CAMA,gHACE,eAAA,CAGF,iEACE,iBAAA,CAIJ,mDEozBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CFlzBF,aCGS,CAAA,sDDCT,gBAAA,CE8yBE,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CF5yBF,aCJQ",sourceRoot:""}]),i.locals={container:"-esm-form-builder__form-renderer__container___qmP2j",loadingContainer:"-esm-form-builder__form-renderer__loadingContainer___RJP8p",loader:"-esm-form-builder__form-renderer__loader___AOiPt",emptyStateTile:"-esm-form-builder__form-renderer__emptyStateTile___mZ_kI",errorStateTile:"-esm-form-builder__form-renderer__errorStateTile___q9583",helperText:"-esm-form-builder__form-renderer__helperText___Pnlco",heading:"-esm-form-builder__form-renderer__heading___S2HQc"};const l=i},62251:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-form-builder__header__header___obAkY{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#525252;height:6rem;background-color:#fff;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;padding:1rem}.-esm-form-builder__header__left-justified-items___ZXpgL{display:flex;flex-direction:row;align-items:center;cursor:pointer;align-items:center}.-esm-form-builder__header__right-justified-items___uoIaX{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#525252;display:flex;flex-direction:column;justify-content:space-between}.-esm-form-builder__header__page-name___qNLcY{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-form-builder__header__page-labels___Vv_ab{margin:.5rem}.-esm-form-builder__header__page-labels___Vv_ab p:first-of-type{margin-bottom:.25rem}.-esm-form-builder__header__date-and-location___xokFh{display:flex;justify-content:flex-end;align-items:center}.-esm-form-builder__header__userContainer___X1P0O{display:flex;align-items:center;justify-content:flex-end;gap:1rem}.-esm-form-builder__header__value___eNsZZ{margin-left:.25rem}.-esm-form-builder__header__middot___Euiks{margin:0 .5rem}.-esm-form-builder__header__view___r7RBY{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}","",{version:3,sources:["webpack://./node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/components/header/header.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,2CC81BI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CD51BF,aDDQ,CCER,WE2DW,CF1DX,qBDPM,CCQN,+BAAA,CACA,YAAA,CACA,6BAAA,CACA,YEmBW,CFhBb,yDACE,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,cAAA,CACA,kBAAA,CAGF,0DC20BI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CDz0BF,aDpBQ,CCqBR,YAAA,CACA,qBAAA,CACA,6BAAA,CAGF,8CCm0BI,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,sDAAA,CD/zBJ,gDACE,YEfW,CFiBX,gEACE,oBEvBS,CF2Bb,sDACE,YAAA,CACA,wBAAA,CACA,kBAAA,CAGF,kDACE,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,QEtBW,CFyBb,0CACE,kBEzCW,CF4Cb,2CACE,cAAA,CAGF,yCCkyBI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA",sourceRoot:""}]),i.locals={header:"-esm-form-builder__header__header___obAkY","left-justified-items":"-esm-form-builder__header__left-justified-items___ZXpgL","right-justified-items":"-esm-form-builder__header__right-justified-items___uoIaX","page-name":"-esm-form-builder__header__page-name___qNLcY","page-labels":"-esm-form-builder__header__page-labels___Vv_ab","date-and-location":"-esm-form-builder__header__date-and-location___xokFh",userContainer:"-esm-form-builder__header__userContainer___X1P0O",value:"-esm-form-builder__header__value___eNsZZ",middot:"-esm-form-builder__header__middot___Euiks",view:"-esm-form-builder__header__view___r7RBY"};const l=i},16003:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__draggable-question__buttonsContainer___DCYP_{display:flex;align-items:center}.-esm-form-builder__draggable-question__iconAndName___IqOwD{display:flex;align-items:center}.-esm-form-builder__draggable-question__questionLabel___Qbeje{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-form-builder__draggable-question__isDragged___Ro1hP,.-esm-form-builder__draggable-question__normal___NG24l{display:flex;height:3rem;justify-content:space-between;align-items:center;width:100%}.-esm-form-builder__draggable-question__isDragged___Ro1hP{box-shadow:0 4px 8px rgba(0,0,0,.2);background-color:rgba(255,255,255,.552)}.-esm-form-builder__draggable-question__dragIcon___QEZvt{margin-right:.5rem}.-esm-form-builder__draggable-question__dragIcon___QEZvt :focus{border:none !important}","",{version:3,sources:["webpack://./src/components/interactive-builder/draggable-question.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAIA,iEACE,YAAA,CACA,kBAAA,CAGF,4DACE,YAAA,CACA,kBAAA,CAGF,8DCo1BI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CDh1BJ,iHACE,YAAA,CACA,WAAA,CACA,6BAAA,CACA,kBAAA,CACA,UAAA,CAGF,0DACE,mCAAA,CACA,uCAAA,CAGF,yDACE,kBAAA,CAEA,gEACE,sBAAA",sourceRoot:""}]),i.locals={buttonsContainer:"-esm-form-builder__draggable-question__buttonsContainer___DCYP_",iconAndName:"-esm-form-builder__draggable-question__iconAndName___IqOwD",questionLabel:"-esm-form-builder__draggable-question__questionLabel___Qbeje",isDragged:"-esm-form-builder__draggable-question__isDragged___Ro1hP",normal:"-esm-form-builder__draggable-question__normal___NG24l",dragIcon:"-esm-form-builder__draggable-question__dragIcon___QEZvt"};const l=i},83531:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,'.-esm-form-builder__editable-value__schemaLabel___n7Tqt{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-form-builder__editable-value__pageLabel___HDnGY{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0);margin:.5rem 0rem}.-esm-form-builder__editable-value__pageLabel___HDnGY:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__editable-value__sectionLabel___SfPGZ{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0)}',"",{version:3,sources:["webpack://./src/components/interactive-builder/editable-value.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAEA,wDCg2BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD51BJ,sDC41BI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD11BF,iBAAA,CAEA,4DACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAIJ,yDC+0BI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA",sourceRoot:""}]),i.locals={schemaLabel:"-esm-form-builder__editable-value__schemaLabel___n7Tqt",pageLabel:"-esm-form-builder__editable-value__pageLabel___HDnGY",sectionLabel:"-esm-form-builder__editable-value__sectionLabel___SfPGZ"};const l=i},28787:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,'.-esm-form-builder__interactive-builder__container___QqXP7 .cds--modal-content:focus{outline:none}.-esm-form-builder__interactive-builder__container___QqXP7 .cds--tooltip{z-index:1}.-esm-form-builder__interactive-builder__flexContainer___hKEjz{display:flex;align-items:center}.-esm-form-builder__interactive-builder__helperText___hIqWi{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);margin:1rem 0rem}.-esm-form-builder__interactive-builder__heading___YzI9_,.-esm-form-builder__interactive-builder__name___DstHx,.-esm-form-builder__interactive-builder__subheading___KNIIX{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);margin:1rem 0rem .5rem}.-esm-form-builder__interactive-builder__styledHeading___On3NK{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0);margin:.5rem 0rem}.-esm-form-builder__interactive-builder__styledHeading___On3NK:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__interactive-builder__subheading___KNIIX{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0)}.-esm-form-builder__interactive-builder__name___DstHx{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0)}.-esm-form-builder__interactive-builder__editableFieldsContainer___IXTus{margin:1rem 0;border-bottom:1px solid #e0e0e0}.-esm-form-builder__interactive-builder__addQuestionButton___tNA7f{margin:.75rem 0}.-esm-form-builder__interactive-builder__header___PFzXV{margin:2rem 0}.-esm-form-builder__interactive-builder__explainer___IK72c{margin:1rem .5rem}.-esm-form-builder__interactive-builder__explainer___IK72c p{margin:1.5rem 0}.-esm-form-builder__interactive-builder__explainer___IK72c p:first-of-type{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-form-builder__interactive-builder__sectionExplainer___g_g6b{margin:1rem .5rem}.-esm-form-builder__interactive-builder__startButton___BrSte{margin:1rem 0}.-esm-form-builder__interactive-builder__editorContainer___OseKc{display:flex;justify-content:space-between;margin:.25rem .5rem;align-items:center;width:100%}.-esm-form-builder__interactive-builder__buttonContainer___JLN17 span{margin:0rem .5rem}.-esm-form-builder__interactive-builder__addSectionButton___BOQnt{margin:1rem}.-esm-form-builder__interactive-builder__validationErrorMessage___JQuV_{margin-left:1rem;color:#da1e28;font-size:.75rem}.-esm-form-builder__interactive-builder__answerErrors___CRbQP{display:flex;flex-direction:column;gap:.5rem;margin-left:2rem;margin-top:1rem;font-size:.75rem}',"",{version:3,sources:["webpack://./src/components/interactive-builder/interactive-builder.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAIE,qFACE,YAAA,CAGF,yEACE,SAAA,CAIJ,+DACE,YAAA,CACA,kBAAA,CAGF,4DCg1BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD90BF,gBAAA,CAGF,2KC20BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDz0BF,sBAAA,CAGF,+DCs0BI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDp0BF,iBAAA,CAEA,qEACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAIJ,4DCyzBI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDpzBJ,sDCozBI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD/yBJ,yEACE,aAAA,CACA,+BAAA,CAGF,mEACE,eAAA,CAGF,wDACE,aAAA,CAGF,2DACE,iBAAA,CAEA,6DACE,eAAA,CAEA,2EC4xBA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,sDAAA,CDtxBJ,kEACE,iBAAA,CAGF,6DACE,aAAA,CAGF,iEACE,YAAA,CACA,6BAAA,CACA,mBAAA,CACA,kBAAA,CACA,UAAA,CAIA,sEACE,iBAAA,CAIJ,kEACE,WAAA,CAGF,wEACE,gBAAA,CACA,aEPO,CFQP,gBAAA,CAGF,8DACE,YAAA,CACA,qBAAA,CACA,SAAA,CACA,gBAAA,CACA,eAAA,CACA,gBAAA",sourceRoot:""}]),i.locals={container:"-esm-form-builder__interactive-builder__container___QqXP7",flexContainer:"-esm-form-builder__interactive-builder__flexContainer___hKEjz",helperText:"-esm-form-builder__interactive-builder__helperText___hIqWi",heading:"-esm-form-builder__interactive-builder__heading___YzI9_",name:"-esm-form-builder__interactive-builder__name___DstHx",subheading:"-esm-form-builder__interactive-builder__subheading___KNIIX",styledHeading:"-esm-form-builder__interactive-builder__styledHeading___On3NK",editableFieldsContainer:"-esm-form-builder__interactive-builder__editableFieldsContainer___IXTus",addQuestionButton:"-esm-form-builder__interactive-builder__addQuestionButton___tNA7f",header:"-esm-form-builder__interactive-builder__header___PFzXV",explainer:"-esm-form-builder__interactive-builder__explainer___IK72c",sectionExplainer:"-esm-form-builder__interactive-builder__sectionExplainer___g_g6b",startButton:"-esm-form-builder__interactive-builder__startButton___BrSte",editorContainer:"-esm-form-builder__interactive-builder__editorContainer___OseKc",buttonContainer:"-esm-form-builder__interactive-builder__buttonContainer___JLN17",addSectionButton:"-esm-form-builder__interactive-builder__addSectionButton___BOQnt",validationErrorMessage:"-esm-form-builder__interactive-builder__validationErrorMessage___JQuV_",answerErrors:"-esm-form-builder__interactive-builder__answerErrors___CRbQP"};const l=i},76115:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,'.-esm-form-builder__question-modal__label___sskPy{margin-bottom:.5rem}.-esm-form-builder__question-modal__loader___Qa5xT{padding:.75rem .5rem}.-esm-form-builder__question-modal__tag___vovd0{margin-right:.5rem}.-esm-form-builder__question-modal__form___iKunL{overflow-y:scroll}.-esm-form-builder__question-modal__conceptList___mA4im,.-esm-form-builder__question-modal__personAttributeTypeList___UMfHx{background:#fff;max-height:14rem;overflow-y:auto;border:1px solid #e0e0e0;border-top:none}.-esm-form-builder__question-modal__conceptList___mA4im,.-esm-form-builder__question-modal__personAttributeTypeList___UMfHx li:hover{background-color:#e0e0e0}.-esm-form-builder__question-modal__concept___mZEZr,.-esm-form-builder__question-modal__personAttributeType___TvlLc{padding:.75rem;border-bottom:1px solid #e0e0e0}.-esm-form-builder__question-modal__concept___mZEZr:last-of-type,.-esm-form-builder__question-modal__personAttributeType___TvlLc:last-of-type{border-bottom:none}.-esm-form-builder__question-modal__emptyResults___WqYUv{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#525252;min-height:1rem}.-esm-form-builder__question-modal__oclLauncherBanner___bvAqp{padding:.5rem 1rem;display:flex;justify-content:space-between;align-items:center;background-color:#8d8d8d}.-esm-form-builder__question-modal__oclLauncherBanner___bvAqp p{color:#fff}.-esm-form-builder__question-modal__oclLink___MSYtU{color:#edf5ff;display:flex;align-items:center}.-esm-form-builder__question-modal__oclLink___MSYtU svg{margin-left:.25rem}.-esm-form-builder__question-modal__table___yZxgG,.-esm-form-builder__question-modal__tableStriped___db53S{width:100%}.-esm-form-builder__question-modal__table___yZxgG tr,.-esm-form-builder__question-modal__tableStriped___db53S tr{background-color:#fff;border:1px solid #e0e0e0}.-esm-form-builder__question-modal__table___yZxgG td,.-esm-form-builder__question-modal__tableStriped___db53S td,.-esm-form-builder__question-modal__table___yZxgG th,.-esm-form-builder__question-modal__tableStriped___db53S th{padding:.25rem;border:1px solid #e0e0e0;max-width:10rem;text-align:left}.-esm-form-builder__question-modal__tableStriped___db53S thead{font-weight:bold}.-esm-form-builder__question-modal__tableStriped___db53S tbody>tr:nth-child(odd){background-color:#f4f4f4}.-esm-form-builder__question-modal__multiSelect___GYmMF .cds--list-box__field--wrapper{align-items:center;display:flex;height:2.5rem;justify-content:space-between;margin-left:.5rem;width:100%}.-esm-form-builder__question-modal__error___insjw{width:100%;max-width:unset;padding:"0rem";margin-bottom:1rem}.-esm-form-builder__question-modal__questionIdLabel___kEBUA{display:flex;align-items:center}.-esm-form-builder__question-modal__questionIdLabel___kEBUA>span{display:inline-block;margin-right:1rem}.-esm-form-builder__question-modal__required___irTPy{color:#da1e28;margin-left:.125rem}',"",{version:3,sources:["webpack://./src/components/interactive-builder/question-modal.scss","webpack://./node_modules/@carbon/colors/index.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAGA,kDACE,mBAAA,CAGF,mDACE,oBAAA,CAGF,gDACE,kBAAA,CAGF,iDACE,iBAAA,CAGF,4HACE,eCsGQ,CDrGR,gBAAA,CACA,eAAA,CACA,wBAAA,CACA,eAAA,CAGF,qIACE,wBCeQ,CDZV,oHACE,cAAA,CACA,+BAAA,CAEA,8IACE,kBAAA,CAIJ,yDE0zBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CFxzBF,aCMQ,CDLR,eAAA,CAGF,8DACE,kBAAA,CACA,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,wBCLQ,CDOR,gEACE,UCoEM,CDhEV,oDACE,aC/CQ,CDgDR,YAAA,CACA,kBAAA,CAEA,wDACE,kBAAA,CAIJ,2GACE,UAAA,CAEA,iHACE,qBCkDM,CDjDN,wBAAA,CAGF,kOACE,cAAA,CACA,wBAAA,CACA,eAAA,CACA,eAAA,CAOF,+DACE,gBAAA,CAGF,iFACE,wBClDM,CDuDR,uFACE,kBAAA,CACA,YAAA,CACA,aAAA,CACA,6BAAA,CACA,iBAAA,CACA,UAAA,CAIJ,kDACE,UAAA,CACA,eAAA,CACA,cAAA,CACA,kBAAA,CAGF,4DAME,YAAA,CACA,kBAAA,CANA,iEACE,oBAAA,CACA,iBAAA,CAOJ,qDACE,aC5BO,CD6BP,mBAAA",sourceRoot:""}]),i.locals={label:"-esm-form-builder__question-modal__label___sskPy",loader:"-esm-form-builder__question-modal__loader___Qa5xT",tag:"-esm-form-builder__question-modal__tag___vovd0",form:"-esm-form-builder__question-modal__form___iKunL",conceptList:"-esm-form-builder__question-modal__conceptList___mA4im",personAttributeTypeList:"-esm-form-builder__question-modal__personAttributeTypeList___UMfHx",concept:"-esm-form-builder__question-modal__concept___mZEZr",personAttributeType:"-esm-form-builder__question-modal__personAttributeType___TvlLc",emptyResults:"-esm-form-builder__question-modal__emptyResults___WqYUv",oclLauncherBanner:"-esm-form-builder__question-modal__oclLauncherBanner___bvAqp",oclLink:"-esm-form-builder__question-modal__oclLink___MSYtU",table:"-esm-form-builder__question-modal__table___yZxgG",tableStriped:"-esm-form-builder__question-modal__tableStriped___db53S",multiSelect:"-esm-form-builder__question-modal__multiSelect___GYmMF",error:"-esm-form-builder__question-modal__error___insjw",questionIdLabel:"-esm-form-builder__question-modal__questionIdLabel___kEBUA",required:"-esm-form-builder__question-modal__required___irTPy"};const l=i},81201:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__value-editor__actionButtons___IHzt_{display:flex;align-items:center;justify-content:flex-end;margin:1rem 0}.-esm-form-builder__value-editor__actionButtons___IHzt_ button{margin-left:1rem}","",{version:3,sources:["webpack://./src/components/interactive-builder/value-editor.scss"],names:[],mappings:"AAAA,wDACE,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,aAAA,CAEA,+DACE,gBAAA",sourceRoot:""}]),i.locals={actionButtons:"-esm-form-builder__value-editor__actionButtons___IHzt_"};const l=i},62852:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__save-form-modal__spinner___MeJjY.cds--inline-loading{min-height:1rem}.-esm-form-builder__save-form-modal__saveFormBody___DeV3z{max-height:75vh;overflow-y:auto}","",{version:3,sources:["webpack://./src/components/modals/save-form-modal.scss"],names:[],mappings:"AACE,yEACE,eAAA,CAIJ,0DACE,eAAA,CACA,eAAA",sourceRoot:""}]),i.locals={spinner:"-esm-form-builder__save-form-modal__spinner___MeJjY",saveFormBody:"-esm-form-builder__save-form-modal__saveFormBody___DeV3z"};const l=i},2511:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__pagination__bodyShort01___EqwXU,.-esm-form-builder__pagination__configurableLink___p0FSW{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-form-builder__pagination__desktop___hgBiG,.-esm-form-builder__pagination__tablet___qRkW1{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);display:flex;justify-content:space-between;color:#525252;background-color:#fff;padding-left:1rem;align-items:center}.-esm-form-builder__pagination__desktop___hgBiG .cds--pagination{min-height:0rem;height:2rem;width:auto;border:none}.-esm-form-builder__pagination__desktop___hgBiG .cds--pagination .cds--select-input,.-esm-form-builder__pagination__desktop___hgBiG .cds--pagination .cds--btn,.-esm-form-builder__pagination__desktop___hgBiG .cds--pagination .cds--pagination__right{min-height:0rem;height:2rem}.-esm-form-builder__pagination__tablet___qRkW1 .cds--pagination{min-height:0rem;height:3rem;width:auto;border:none}.-esm-form-builder__pagination__tablet___qRkW1 .cds--pagination .cds--select-input,.-esm-form-builder__pagination__tablet___qRkW1 .cds--pagination .cds--btn,.-esm-form-builder__pagination__tablet___qRkW1 .cds--pagination .cds--pagination__right{min-height:0rem;height:3rem}.-esm-form-builder__pagination__configurableLink___p0FSW{text-decoration:none;padding:0 .5rem}.-esm-form-builder__pagination__pagination___AT0no{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);background-color:#fff;color:#525252;display:flex}div.-esm-form-builder__pagination__pagination___AT0no>.cds--pagination__left{display:none}","",{version:3,sources:["webpack://./src/components/pagination/pagination.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAIA,6GC81BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD11BJ,+FC01BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDx1BF,YAAA,CACA,6BAAA,CACA,aEoCQ,CFnCR,qBE6GQ,CF5GR,iBAAA,CACA,kBAAA,CAGF,iEACE,eAAA,CACA,WAAA,CACA,UAAA,CACA,WAAA,CAEA,wPACE,eAAA,CACA,WAAA,CAIJ,gEACE,eAAA,CACA,WAAA,CACA,UAAA,CACA,WAAA,CAEA,qPACE,eAAA,CACA,WAAA,CAIJ,yDACE,oBAAA,CAEA,eAAA,CAGF,mDCkzBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDhzBF,qBEwEQ,CFvER,aEHQ,CFIR,YAAA,CAIA,6EACE,YAAA",sourceRoot:""}]),i.locals={bodyShort01:"-esm-form-builder__pagination__bodyShort01___EqwXU",configurableLink:"-esm-form-builder__pagination__configurableLink___p0FSW",desktop:"-esm-form-builder__pagination__desktop___hgBiG",tablet:"-esm-form-builder__pagination__tablet___qRkW1",pagination:"-esm-form-builder__pagination__pagination___AT0no"};const l=i},14858:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__schema-editor__actionButtons___RskyC{display:flex;align-items:center;justify-content:flex-end;margin:1rem 0}.-esm-form-builder__schema-editor__actionButtons___RskyC button{margin-left:1rem}.-esm-form-builder__schema-editor__errorContainer___qqx2V{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);background-color:#ffd7d9;color:#a2191f;padding:1.5rem;margin:1rem 0}.-esm-form-builder__schema-editor__validationErrorsContainer___C3Dk3{display:flex;gap:.5rem}.-esm-form-builder__schema-editor__validationErrorsContainer___C3Dk3 .cds--actionable-notification{max-width:38rem}.-esm-form-builder__schema-editor__validationErrorsContainer___C3Dk3 .cds--actionable-notification__details{margin:0 0rem 0 .8125rem !important}.-esm-form-builder__schema-editor__pagination___E1aa6{display:flex;align-items:center;gap:.5rem;font-size:.875rem}.-esm-form-builder__schema-editor__pagination___E1aa6 .-esm-form-builder__schema-editor__paginationIcon___DKe3W{fill:#4589ff;cursor:pointer}.-esm-form-builder__schema-editor__pagination___E1aa6 .-esm-form-builder__schema-editor__disabledIcon___wE65f{fill:#a8a8a8;cursor:not-allowed}.-esm-form-builder__schema-editor__heading___wAlzp{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);margin-bottom:1rem}","",{version:3,sources:["webpack://./src/components/schema-editor/schema-editor.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAGA,yDACE,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,aAAA,CAEA,gEACE,gBAAA,CAIJ,0DCo1BI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CDl1BF,wBE6EO,CF5EP,aEiFO,CFhFP,cAAA,CACA,aAAA,CAGF,qEACE,YAAA,CACA,SAAA,CAEA,mGACE,eAAA,CAEF,4GACE,mCAAA,CAIJ,sDACE,YAAA,CACA,kBAAA,CACA,SAAA,CACA,iBAAA,CAEA,gHACE,YEzBM,CF0BN,cAAA,CAGF,8GACE,YEDM,CFEN,kBAAA,CAIJ,mDC+yBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD7yBF,kBAAA",sourceRoot:""}]),i.locals={actionButtons:"-esm-form-builder__schema-editor__actionButtons___RskyC",errorContainer:"-esm-form-builder__schema-editor__errorContainer___qqx2V",validationErrorsContainer:"-esm-form-builder__schema-editor__validationErrorsContainer___C3Dk3",pagination:"-esm-form-builder__schema-editor__pagination___E1aa6",paginationIcon:"-esm-form-builder__schema-editor__paginationIcon___DKe3W",disabledIcon:"-esm-form-builder__schema-editor__disabledIcon___wE65f",heading:"-esm-form-builder__schema-editor__heading___wAlzp"};const l=i},95177:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ir});var r=n(81672),o=n.n(r),a=n(79655),i=n(89250),l=n(63397),s=n(43645),c=n(44672),u=n(32254),d=n(17141),m=n(81132),A=n(95591);function _(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_(a,r,o,i,l,"next",e)}function l(e){_(a,r,o,i,l,"throw",e)}i(void 0)}))}}function p(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function b(e){return h.apply(this,arguments)}function h(){return(h=f((function(e){return p(this,(function(t){switch(t.label){case 0:return[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/clobdata/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}function g(){return(g=f((function(e){return p(this,(function(t){switch(t.label){case 0:return[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/form/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}function C(){return(C=f((function(e,t){return p(this,(function(n){switch(n.label){case 0:return[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/form/").concat(e,"/resource/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}})];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function y(e){return v.apply(this,arguments)}function v(){return(v=f((function(e){var t,n;return p(this,(function(r){switch(r.label){case 0:return t=new Blob([JSON.stringify(e)],{type:void 0}),(n=new FormData).append("file",t),[4,window.fetch("".concat(window.openmrsBase,"/").concat(m.restBaseUrl,"/clobdata"),{body:n,method:"POST"}).then((function(e){return e.text()}))];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}function E(e,t){return w.apply(this,arguments)}function w(){return(w=f((function(e,t){var n;return p(this,(function(r){switch(r.label){case 0:return n={name:"JSON schema",dataType:"AmpathJsonSchema",valueReference:t},[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/form/").concat(e,"/resource"),{method:"POST",headers:{"Content-Type":"application/json"},body:n})];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}function k(e,t,n,r,o){return S.apply(this,arguments)}function S(){return(S=f((function(e,t,n,r,o){var a,i;return p(this,(function(l){switch(l.label){case 0:return a=new AbortController,i={name:t,version:n,description:r,encounterType:{uuid:o}},[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/form/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:i,signal:a.signal})];case 1:return[2,l.sent()]}}))}))).apply(this,arguments)}function x(e,t,n,r,o){return D.apply(this,arguments)}function D(){return(D=f((function(e,t,n,r,o){var a,i,l;return p(this,(function(s){switch(s.label){case 0:return a=new AbortController,i={name:e,version:t,published:null!=n&&n,description:null!=r?r:""},o&&(i.encounterType=o),l={"Content-Type":"application/json"},[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/form"),{method:"POST",headers:l,body:i,signal:a.signal})];case 1:return[2,s.sent().data]}}))}))).apply(this,arguments)}function B(e){return O.apply(this,arguments)}function O(){return(O=f((function(e){var t;return p(this,(function(n){switch(n.label){case 0:return t={published:!0},[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/form/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:t})];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function I(e){return T.apply(this,arguments)}function T(){return(T=f((function(e){var t;return p(this,(function(n){switch(n.label){case 0:return t={published:!1},[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/form/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:t})];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=n(87410),N=n.n(F),P=n(44766),j=n.n(P),z=n(51991),L=n.n(z),M=n(33702),U=n.n(M),R=n(12434),G=n.n(R),Z=n(81422),H=n.n(Z),Q=n(2511),V={};V.styleTagTransform=H(),V.setAttributes=U(),V.insert=L().bind(null,"head"),V.domAPI=j(),V.insertStyleElement=G(),N()(Q.Z,V);const Y=Q.Z&&Q.Z.locals?Q.Z.locals:void 0;var J=function(e){var t=e.totalItems,n=e.pageSize,a=e.onPageNumberChange,i=e.pageNumber,c=function(e,t,n,o){var a=(0,l.useTranslation)().t,i=(0,r.useMemo)((function(){var n,r=Math.ceil(t/e);return isNaN(r)&&(r=0),(n=Array(r).keys(),function(e){if(Array.isArray(e))return q(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(t){return(t+1)*e}))}),[e,t]),s=(0,r.useMemo)((function(){return e>t?"".concat(t," / ").concat(t):e*n>t?"".concat(e*(n-1)+o," / ").concat(t):"".concat(e*n," / ").concat(t)}),[e,t,n,o]);return{pageSizes:i,itemsDisplayed:"".concat(s," ").concat(a("items"," items"))}}(n,t,i,e.currentItems),u=c.itemsDisplayed,d=c.pageSizes,A="tablet"===(0,m.useLayoutType)();return o().createElement(o().Fragment,null,t>0&&o().createElement("div",{className:A?Y.tablet:Y.desktop},o().createElement("div",null,u),o().createElement(s.tlE,{className:Y.pagination,page:i,pageSize:n,pageSizes:d,totalItems:t,onChange:a,size:A?"lg":"sm"})))},W=n(49770),K=function(e){var t,n,r,o=null==e||null===(n=e.resources)||void 0===n||null===(t=n.find((function(e){return"JSON schema"===e.name})))||void 0===t?void 0:t.valueReference,a=e&&(null==e||null===(r=e.resources)||void 0===r?void 0:r.length)>0&&o,i="".concat(m.restBaseUrl,"/clobdata/").concat(o),l=(0,W.Z)(a?i:null,m.openmrsFetch),s=l.data,c=l.error,u=l.isLoading,d=l.isValidating,A=l.mutate;return{clobdata:null==s?void 0:s.data,clobdataError:c,isLoadingClobdata:u,isValidatingClobdata:d,mutate:A}},X=function(e){var t=e.width,n=void 0===t?"64":t,r=e.height,a=void 0===r?"64":r;return o().createElement("svg",{width:n,height:a,viewBox:"0 0 64 64"},o().createElement("title",null,"Empty data illustration"),o().createElement("g",{fill:"none",fillRule:"evenodd"},o().createElement("path",{d:"M38.133 13.186H21.947c-.768.001-1.39.623-1.39 1.391V50.55l-.186.057-3.97 1.216a.743.743 0 01-.927-.493L3.664 12.751a.742.742 0 01.492-.926l6.118-1.874 17.738-5.43 6.119-1.873a.741.741 0 01.926.492L38.076 13l.057.186z",fill:"#F4F4F4"}),o().createElement("path",{d:"M41.664 13L38.026 1.117A1.576 1.576 0 0036.056.07l-8.601 2.633-17.737 5.43-8.603 2.634a1.578 1.578 0 00-1.046 1.97l12.436 40.616a1.58 1.58 0 001.969 1.046l5.897-1.805.185-.057v-.194l-.185.057-5.952 1.822a1.393 1.393 0 01-1.737-.923L.247 12.682a1.39 1.39 0 01.923-1.738L9.772 8.31 27.51 2.881 36.112.247a1.393 1.393 0 011.737.923L41.47 13l.057.186h.193l-.057-.185z",fill:"#8D8D8D"}),o().createElement("path",{d:"M11.378 11.855a.836.836 0 01-.798-.59L9.385 7.361a.835.835 0 01.554-1.042l16.318-4.996a.836.836 0 011.042.554l1.195 3.902a.836.836 0 01-.554 1.043l-16.318 4.995a.831.831 0 01-.244.037z",fill:"#C6C6C6"}),o().createElement("circle",{fill:"#C6C6C6",cx:17.636,cy:2.314,r:1.855}),o().createElement("circle",{fill:"#FFF",fillRule:"nonzero",cx:17.636,cy:2.314,r:1.175}),o().createElement("path",{d:"M55.893 53.995H24.544a.79.79 0 01-.788-.789V15.644a.79.79 0 01.788-.788h31.349a.79.79 0 01.788.788v37.562a.79.79 0 01-.788.789z",fill:"#F4F4F4"}),o().createElement("path",{d:"M41.47 13H21.948a1.579 1.579 0 00-1.576 1.577V52.4l.185-.057V14.577c.001-.768.623-1.39 1.391-1.39h19.581L41.471 13zm17.02 0H21.947a1.579 1.579 0 00-1.576 1.577v42.478c0 .87.706 1.576 1.576 1.577H58.49a1.579 1.579 0 001.576-1.577V14.577a1.579 1.579 0 00-1.576-1.576zm1.39 44.055c0 .768-.622 1.39-1.39 1.392H21.947c-.768-.001-1.39-.624-1.39-1.392V14.577c0-.768.622-1.39 1.39-1.39H58.49c.768 0 1.39.622 1.39 1.39v42.478z",fill:"#8D8D8D"}),o().createElement("path",{d:"M48.751 17.082H31.686a.836.836 0 01-.835-.835v-4.081c0-.46.374-.834.835-.835H48.75c.461 0 .834.374.835.835v4.08c0 .462-.374.835-.835.836z",fill:"#C6C6C6"}),o().createElement("circle",{fill:"#C6C6C6",cx:40.218,cy:9.755,r:1.855}),o().createElement("circle",{fill:"#FFF",fillRule:"nonzero",cx:40.218,cy:9.755,r:1.13})))},$=n(4298),ee={};ee.styleTagTransform=H(),ee.setAttributes=U(),ee.insert=L().bind(null,"head"),ee.domAPI=j(),ee.insertStyleElement=G(),N()($.Z,ee);const te=$.Z&&$.Z.locals?$.Z.locals:void 0,ne=function(){var e=(0,l.useTranslation)().t,t="tablet"===(0,m.useLayoutType)();return o().createElement(s.mh4,null,o().createElement(s.n9L,{className:te.tile},o().createElement("div",{className:t?te.tabletHeading:te.desktopHeading},o().createElement("h4",null,e("forms","Forms"))),o().createElement(X,null),o().createElement("p",{className:te.content},e("noFormsToDisplay","There are no forms to display.")),o().createElement("p",{className:te.action},o().createElement(s.rUS,{onClick:function(){return(0,m.navigate)({to:"".concat(window.spaBase,"/form-builder/new")})}},e("createNewForm","Create a new form")))))};var re=n(39761),oe={};oe.styleTagTransform=H(),oe.setAttributes=U(),oe.insert=L().bind(null,"head"),oe.domAPI=j(),oe.insertStyleElement=G(),N()(re.Z,oe);const ae=re.Z&&re.Z.locals?re.Z.locals:void 0,ie=function(e){var t=e.error,n=(0,l.useTranslation)().t,r="tablet"===(0,m.useLayoutType)();return o().createElement(s.mh4,null,o().createElement(s.n9L,{className:ae.tile},o().createElement("div",{className:r?ae.tabletHeading:ae.desktopHeading},o().createElement("h4",null,n("forms","Forms"))),o().createElement("p",{className:ae.errorMessage},n("error","Error"),": ",null==t?void 0:t.message),o().createElement("p",{className:ae.errorCopy},n("errorCopy","Sorry, there was a problem displaying this information. You can try to reload this page, or contact the site administrator and quote the error code above."))))};var le=n(77913),se=n(59658);const ce=function(){return o().createElement("svg",{height:"64",width:"64",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2"},o().createElement("path",{d:"M27 31.36H8a.36.36 0 0 1-.36-.36v-1.64H6a.36.36 0 0 1-.36-.36v-1.64H5a.36.36 0 0 1-.36-.36V3A.36.36 0 0 1 5 2.64h4.64V2a.36.36 0 0 1 .36-.36h1.64V1A.36.36 0 0 1 12 .64h4a.36.36 0 0 1 .36.36v.64H18a.36.36 0 0 1 .36.36v.64H23a.36.36 0 0 1 .36.36v1.64H25a.36.36 0 0 1 .36.36v1.64H27a.36.36 0 0 1 .36.36v24a.36.36 0 0 1-.36.36Z",fill:"#d2e5e5"}),o().createElement("path",{d:"M8.36 30.64h18.28V7.36h-1.28V29a.36.36 0 0 1-.36.36H8.36v1.28Z",fill:"#8abab8"}),o().createElement("path",{d:"M5.36 26.64h17.28V3.36h-4.28V4a.36.36 0 0 1-.36.36h-8A.36.36 0 0 1 9.64 4v-.64H5.36v23.28Z",fill:"#8abab8"}),o().createElement("path",{fill:"#fff",d:"M7.5 12.64h13v.72h-13zM7.5 8.64h13v.72h-13zM7.5 20.64h13v.72h-13zM7.5 16.64h13v.72h-13z"}),o().createElement("path",{d:"M10.36 3.64h7.28V2.36H16a.36.36 0 0 1-.36-.36v-.64h-3.28V2a.36.36 0 0 1-.36.36h-1.64v1.28ZM6.36 28.64h18.28V5.36h-1.28V27a.36.36 0 0 1-.36.36H6.36v1.28Z",fill:"#8abab8"}))};var ue=n(62251),de={};de.styleTagTransform=H(),de.setAttributes=U(),de.insert=L().bind(null,"head"),de.domAPI=j(),de.insertStyleElement=G(),N()(ue.Z,de);const me=ue.Z&&ue.Z.locals?ue.Z.locals:void 0,Ae=function(e){var t,n,r,a=e.title,i=(0,l.useTranslation)().t,s=(0,m.useSession)(),c=null==s||null===(t=s.sessionLocation)||void 0===t?void 0:t.display;return o().createElement("div",{className:me.header},o().createElement("div",{className:me["left-justified-items"]},o().createElement(ce,null),o().createElement("div",{className:me["page-labels"]},o().createElement("p",null,i("formBuilder","Form builder")),o().createElement("p",{className:me["page-name"]},a))),o().createElement("div",{className:me["right-justified-items"]},o().createElement("div",{className:me.userContainer},o().createElement("p",null,null==s||null===(r=s.user)||void 0===r||null===(n=r.person)||void 0===n?void 0:n.display),o().createElement(u.JT,{size:16,className:me.userIcon})),o().createElement("div",{className:me["date-and-location"]},o().createElement(le.Ye,{size:16}),o().createElement("span",{className:me.value},c),o().createElement("span",{className:me.middot},""),o().createElement(se.f,{size:16}),o().createElement("span",{className:me.value},(0,m.formatDate)(new Date,{mode:"standard"})))))};var _e=n(40270),fe={};fe.styleTagTransform=H(),fe.setAttributes=U(),fe.insert=L().bind(null,"head"),fe.domAPI=j(),fe.insertStyleElement=G(),N()(_e.Z,fe);const pe=_e.Z&&_e.Z.locals?_e.Z.locals:void 0;function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function he(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ge(e,t,n[t])}))}return e}function ye(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?be(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e){var t=e.condition,n=(0,l.useTranslation)().t;return t?o().createElement(s.Vp9,{type:"green",size:"md",title:"Clear Filter","data-testid":"yes-tag"},n("yes","Yes")):o().createElement(s.Vp9,{type:"red",size:"md",title:"Clear Filter","data-testid":"no-tag"},n("no","No"))}function we(e){var t=e.form,n=e.mutate,a=e.responsiveSize,i=e.t,l=K(t).clobdata,d=null==t?void 0:t.resources,A=ve((0,r.useState)(!1),2),_=A[0],f=A[1],p=ve((0,r.useState)(!1),2),b=p[0],h=p[1],C=(0,r.useMemo)((function(){return new Blob([JSON.stringify(l,null,2)],{type:"application/json"})}),[l]),y=(0,r.useCallback)((function(e){var r,o;(function(e){return g.apply(this,arguments)})(e).then((r=function(e){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:return 204!==e.status?[3,2]:((0,m.showSnackbar)({title:i("formDeleted","Form deleted"),kind:"success",isLowContrast:!0,subtitle:"".concat(t.name," ")+i("formDeletedSuccessfully","deleted successfully")}),[4,n()]);case 1:r.sent(),f(!1),r.label=2;case 2:return[2]}}))},o=function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(e){he(a,n,o,i,l,"next",e)}function l(e){he(a,n,o,i,l,"throw",e)}i(void 0)}))},function(e){return o.apply(this,arguments)})).catch((function(e){return(0,m.showSnackbar)({title:i("errorDeletingForm","Error deleting form"),kind:"error",subtitle:null==e?void 0:e.message})})).finally((function(){return h(!1)}))}),[t.name,n,i]),v=function(){return o().createElement(s.zxk,{renderIcon:c.rs,onClick:function(){return(0,m.navigate)({to:"".concat(window.spaBase,"/form-builder/edit/").concat(t.uuid)})},kind:"ghost",iconDescription:i("import","Import"),hasIconOnly:!0,size:a})},E=function(){return o().createElement(s.zxk,{enterDelayMs:300,renderIcon:c.I8,onClick:function(){return(0,m.navigate)({to:"".concat(window.spaBase,"/form-builder/edit/").concat(t.uuid)})},kind:"ghost",iconDescription:i("editSchema","Edit schema"),hasIconOnly:!0,size:a,tooltipAlignment:"start"})},w=function(){return o().createElement("a",{download:"".concat(null==t?void 0:t.name,".json"),href:window.URL.createObjectURL(C)},o().createElement(s.zxk,{enterDelayMs:300,renderIcon:c.UW,kind:"ghost",iconDescription:i("downloadSchema","Download schema"),hasIconOnly:!0,size:a,tooltipAlignment:"start"}))},k=function(){return o().createElement(s.zxk,{enterDelayMs:300,renderIcon:u.ZN,onClick:function(){return f(!0)},kind:"ghost",iconDescription:i("deleteSchema","Delete schema"),hasIconOnly:!0,size:a,tooltipAlignment:"start"})},S=function(){return o().createElement(s.lpG,{danger:!0,open:_,onClose:function(){return f(!1)},preventCloseOnClickOutside:!0},o().createElement(s.xBx,{title:i("deleteForm","Delete form")}),o().createElement(s.l09,{onSubmit:function(e){return e.preventDefault()}},o().createElement(s.fef,null,o().createElement("p",null,i("deleteFormConfirmation","Are you sure you want to delete this form?")))),o().createElement(s.mzw,null,o().createElement(s.zxk,{kind:"secondary",onClick:function(){return f(!1)}},i("cancel","Cancel")),o().createElement(s.zxk,{disabled:b,kind:"danger",onClick:function(){h(!0),y(t.uuid)}},b?o().createElement(s.lSo,{className:pe.spinner,description:i("deleting","Deleting")+"..."}):o().createElement("span",null,i("delete","Delete")))))};return o().createElement(o().Fragment,null,0!=d.length&&(null==t?void 0:t.resources[0])?o().createElement(o().Fragment,null,o().createElement(E,null),o().createElement(w,null)):o().createElement(v,null),o().createElement(k,null),_&&o().createElement(S,null))}function ke(e){var t=e.forms,n=e.isValidating,a=e.mutate,i=e.t,l=(0,m.useConfig)(),c="tablet"===(0,m.useLayoutType)(),u=c?"lg":"sm",_=ve((0,r.useState)(""),2),f=_[0],p=_[1],b=ve((0,r.useState)(""),2),h=b[0],g=b[1],C=(0,r.useMemo)((function(){return f?"Published"===f?t.filter((function(e){return e.published})):"Unpublished"===f?t.filter((function(e){return!e.published})):"Retired"===f?t.filter((function(e){return e.retired})):t:t}),[f,t]),y=[{header:i("name","Name"),key:"name"},{header:i("version","Version"),key:"version"},{header:i("published","Published"),key:"published"},{header:i("retired","Retired"),key:"retired"},{header:i("schemaActions","Schema actions"),key:"actions"}],v=(0,r.useMemo)((function(){return h&&""!==h.trim()?C.filter((function(e){return e.name.toLowerCase().includes(h.toLowerCase())})):C}),[h,C]),E=(0,m.usePagination)(v,10),w=E.paginated,k=E.goTo,S=E.results,x=E.currentPage,D=null==S?void 0:S.map((function(e){return ye(Ce({},e),{id:null==e?void 0:e.uuid,name:o().createElement(m.ConfigurableLink,{className:pe.link,to:"${openmrsSpaBase}/form-builder/edit/${formUuid}",templateParams:{formUuid:null==e?void 0:e.uuid},onMouseEnter:function(){(0,A.MA)("".concat(m.restBaseUrl,"/form/").concat(null==e?void 0:e.uuid,"?v=full"),m.openmrsFetch)}},e.name),published:o().createElement(Ee,{condition:e.published}),retired:o().createElement(Ee,{condition:e.retired}),actions:o().createElement(we,{form:e,mutate:a,responsiveSize:u,t:i})})})),B=(0,r.useCallback)((function(e){k(1),g(e.target.value)}),[k,g]);return o().createElement(o().Fragment,null,l.showSchemaSaveWarning&&o().createElement(s.K0D,{className:pe.warningMessage,kind:"info",lowContrast:!0,title:i("schemaSaveWarningMessage","The dev3 server is ephemeral at best and can't be relied upon to save your schemas permanently. To avoid losing your work, please save your schemas to your local machine. Alternatively, upload your schema to the distro repo to have it persisted across server resets.")}),o().createElement("div",{className:pe.flexContainer},o().createElement("div",{className:pe.filterContainer},o().createElement(s.Ltx,{className:pe.filterDropdown,id:"publishStatusFilter",initialSelectedItem:"All",label:"",titleText:i("filterBy","Filter by")+":",size:u,type:"inline",items:["All","Published","Unpublished","Retired"],onChange:function(e){var t=e.selectedItem;return p(t)}})),o().createElement("div",{className:pe.backgroundDataFetchingIndicator},o().createElement("span",null,n?o().createElement(s.lSo,null):null))),o().createElement(s.wQF,{rows:D,headers:y,size:c?"lg":"sm",useZebraStyles:!0},(function(e){var t=e.rows,n=e.headers,r=e.getTableProps,a=e.getHeaderProps,l=e.getRowProps;return o().createElement(o().Fragment,null,o().createElement(s.xJi,{className:pe.tableContainer,"data-testid":"forms-table"},o().createElement("div",{className:pe.toolbarWrapper},o().createElement(s.fjU,{className:pe.tableToolbar,size:u},o().createElement(s.Vj0,{className:pe.headerContainer},o().createElement(s.Ys1,{expanded:!0,className:pe.searchbox,onChange:B,placeholder:i("searchThisList","Search this list")}),o().createElement(s.zxk,{kind:"primary",iconDescription:i("createNewForm","Create a new form"),renderIcon:function(){return o().createElement(d.mm,{size:16})},size:u,onClick:function(){return(0,m.navigate)({to:"".concat(window.spaBase,"/form-builder/new")})}},i("createNewForm","Create a new form"))))),o().createElement(s.iA_,ye(Ce({},r()),{className:pe.table}),o().createElement(s.ssF,null,o().createElement(s.SCH,null,n.map((function(e){return o().createElement(s.xDH,a({header:e}),e.header)})))),o().createElement(s.RMI,null,t.map((function(e){return o().createElement(s.SCH,ye(Ce({key:"row.id"},l({row:e})),{"data-testid":"form-row-".concat(e.id)}),e.cells.map((function(e){return o().createElement(s.pj1,{key:e.id},e.value)})))}))))),0===t.length?o().createElement("div",{className:pe.tileContainer},o().createElement(s.n9L,{className:pe.tile},o().createElement("div",{className:pe.tileContent},o().createElement("p",{className:pe.content},i("noMatchingFormsToDisplay","No matching forms to display")),o().createElement("p",{className:pe.helper},i("checkFilters","Check the filters above"))))):null)})),w&&o().createElement(J,{currentItems:S.length,totalItems:v.length,onPageNumberChange:function(e){var t=e.page;k(t)},pageNumber:x,pageSize:10}))}const Se=function(){var e=(0,l.useTranslation)().t,t=function(){var e,t,n="".concat(m.restBaseUrl,"/form?v=custom:(uuid,name,encounterType:(uuid,name),version,published,retired,resources:(uuid,name,dataType,valueReference))"),r=(0,A.ZP)(n,m.openmrsFetch),o=r.data,a=r.error,i=r.isValidating,l=r.mutate;return{forms:null!==(t=null==o||null===(e=o.data)||void 0===e?void 0:e.results)&&void 0!==t?t:[],error:a,isLoading:!o&&!a||!1,isValidating:i,mutate:l}}(),n=t.forms,r=t.error,a=t.isLoading,i=t.isValidating,c=t.mutate;return o().createElement("main",null,o().createElement(Ae,{title:e("home","Home")}),o().createElement("div",{className:pe.container},r?o().createElement(ie,{error:r}):a?o().createElement(s.gqd,{role:"progressbar"}):0===n.length?o().createElement(ne,null):o().createElement(ke,{forms:n,isValidating:i,mutate:c,t:e})))};var xe=n(94184),De=n.n(xe),Be=n(33497),Oe=function(e){var t="".concat(m.restBaseUrl,"/form/").concat(e,"?v=full"),n=(0,W.Z)(e?t:null,m.openmrsFetch),r=n.data,o=n.error,a=n.isLoading,i=n.isValidating,l=n.mutate;return{form:null==r?void 0:r.data,formError:o,isLoadingForm:a,isValidatingForm:i,mutate:l}},Ie=n(62852),Te={};Te.styleTagTransform=H(),Te.setAttributes=U(),Te.insert=L().bind(null,"head"),Te.domAPI=j(),Te.insertStyleElement=G(),N()(Ie.Z,Te);const qe=Ie.Z&&Ie.Z.locals?Ie.Z.locals:void 0;function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ne(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function Pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ne(a,r,o,i,l,"next",e)}function l(e){Ne(a,r,o,i,l,"throw",e)}i(void 0)}))}}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ze(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){je(e,t,n[t])}))}return e}function Me(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}const Ge=function(e){var t,n,a,c,u,d,A,_=e.form,f=e.schema,p=(0,l.useTranslation)().t,h=(a="".concat(m.restBaseUrl,"/encountertype?v=custom:(uuid,name)"),c=(0,W.Z)(a,m.openmrsFetch),u=c.data,d=c.error,A=c.isLoading,{encounterTypes:null!==(n=null==u||null===(t=u.data)||void 0===t?void 0:t.results)&&void 0!==n?n:[],encounterTypesError:d,isEncounterTypesLoading:A}).encounterTypes,g=(0,i.UO)().formUuid,v=Oe(g).mutate,w=!g,S=Ue((0,r.useState)(""),2),D=S[0],B=S[1],O=Ue((0,r.useState)(""),2),I=O[0],T=O[1],q=Ue((0,r.useState)(!1),2),F=q[0],N=q[1],P=Ue((0,r.useState)(!1),2),j=P[0],z=P[1],L=Ue((0,r.useState)(""),2),M=L[0],U=L[1],R=Ue((0,r.useState)(!1),2),G=R[0],Z=R[1],H=Ue((0,r.useState)(!1),2),Q=H[0],V=H[1],Y=Ue((0,r.useState)(""),2),J=Y[0],K=Y[1],X=Ue((0,r.useState)(""),2),$=X[0],ee=X[1],te=(0,r.useCallback)((function(){return localStorage.removeItem("formSchema")}),[]);(0,r.useEffect)((function(){f&&(U(f.name),B(f.description),T(f.encounterType),ee(f.version))}),[f]);var ne,re=(0,r.useCallback)((function(e){"newVersion"===e?(K("newVersion"),Z(!1),V(!0)):"new"===e?(K("newVersion"),V(!0)):"update"===e&&(K("update"),Z(!1),V(!0))}),[]),oe=(ne=Pe((function(e){var t,n,r,o,a,i,l,s,c,u,d,A,h,g,w;return Re(this,(function(S){switch(S.label){case 0:if(e.preventDefault(),z(!0),t=e.target,"new"!==J&&"newVersion"!==J)return[3,8];n=t.name.value,r=t.version.value,o=t.encounterType.value,a=t.description.value,S.label=1;case 1:return S.trys.push([1,6,,7]),[4,x(n,r,!1,a,o)];case 2:return i=S.sent(),[4,y(Me(Le({},f),{name:n,version:r,description:a,encounterType:o,uuid:i.uuid}))];case 3:return l=S.sent(),[4,E(i.uuid,l.toString())];case 4:return S.sent(),(0,m.showSnackbar)({title:p("formCreated","New form created"),kind:"success",isLowContrast:!0,subtitle:n+" "+p("saveSuccessMessage","was created successfully. It is now visible on the Forms dashboard.")}),te(),V(!1),[4,v()];case 5:return S.sent(),(0,m.navigate)({to:"".concat(window.spaBase,"/form-builder/edit/").concat(i.uuid)}),z(!1),[3,7];case 6:return ze(s=S.sent(),Error)&&(0,m.showSnackbar)({title:p("errorCreatingForm","Error creating form"),kind:"error",subtitle:null==s?void 0:s.message}),z(!1),[3,7];case 7:return[3,13];case 8:return S.trys.push([8,12,,13]),u=Me(Le({},f),{name:M,version:$,description:D,encounterType:I}),[4,k(_.uuid,M,$,D,I)];case 9:return S.sent(),0===(null==_||null===(c=_.resources)||void 0===c?void 0:c.length)?[3,11]:(g=null!==(h=null==_||null===(A=_.resources)||void 0===A||null===(d=A.find((function(e){return"JSON schema"===e.name})))||void 0===d?void 0:d.valueReference)&&void 0!==h?h:"",[4,b(g).catch((function(e){return console.error("Unable to delete clobdata: ",e)})).then((function(){var e,t,n,r=null!==(n=null==_||null===(t=_.resources)||void 0===t||null===(e=t.find((function(e){return"JSON schema"===e.name})))||void 0===e?void 0:e.uuid)&&void 0!==n?n:"";(function(e,t){return C.apply(this,arguments)})(null==_?void 0:_.uuid,r).then((function(){y(u).then((function(e){E(null==_?void 0:_.uuid,e.toString()).then(Pe((function(){return Re(this,(function(e){switch(e.label){case 0:return(0,m.showSnackbar)({title:p("success","Success!"),kind:"success",isLowContrast:!0,subtitle:(null==_?void 0:_.name)+" "+p("saveSuccess","was updated successfully")}),V(!1),[4,v()];case 1:return e.sent(),z(!1),[2]}}))}))).catch((function(e){console.error("Error associating form with new schema: ",e),(0,m.showSnackbar)({title:p("errorSavingForm","Unable to save form"),kind:"error",subtitle:p("saveError","There was a problem saving your form. Try saving again. To ensure you dont lose your changes, copy them, reload the page and then paste them back into the editor.")})}))})).catch((function(e){return console.error("Error uploading new schema: ",e)}))})).catch((function(e){return console.error("Unable to create new clobdata resource: ",e)}))}))]);case 10:S.sent(),S.label=11;case 11:return[3,13];case 12:return ze(w=S.sent(),Error)&&(0,m.showSnackbar)({title:p("errorUpdatingForm","Error updating form"),kind:"error",subtitle:null==w?void 0:w.message}),z(!1),[3,13];case 13:return[2]}}))})),function(e){return ne.apply(this,arguments)});return o().createElement(o().Fragment,null,w?null:o().createElement(s.lpG,{open:G,onClose:function(){return Z(!1)},preventCloseOnClickOutside:!0},o().createElement(s.xBx,{title:p("saveConfirmation","Save or Update form")}),o().createElement(s.fef,null,o().createElement("p",null,p("saveAsModal","A version of the form you're working on already exists on the server. Do you want to update the form or to save it as a new version?"))),o().createElement(s.mzw,null,o().createElement(s.zxk,{kind:"tertiary",onClick:function(){return re("update")}},p("updateExistingForm","Update existing version")),o().createElement(s.zxk,{kind:"primary",onClick:function(){return re("newVersion")}},p("saveAsNewForm","Save as a new")),o().createElement(s.zxk,{kind:"secondary",onClick:function(){return Z(!1)}},p("close","Close")))),o().createElement(s.lpG,{open:Q,onClose:function(){return V(!1)},preventCloseOnClickOutside:!0},o().createElement(s.xBx,{title:p("saveFormToServer","Save form to server")}),o().createElement(s.l09,{onSubmit:oe,className:qe.saveFormBody},o().createElement(s.fef,null,o().createElement("p",null,p("saveExplainerText","Clicking the Save button saves your form schema to the database. To see your form in your frontend, you first need to publish it. Click the Publish button to publish your form.")),o().createElement(s.cwH,{legendText:""},o().createElement(s.Kqy,{gap:5},o().createElement(s.oil,{id:"name",labelText:p("formName","Form Name"),onChange:function(e){return U(e.target.value)},placeholder:p("formNamePlaceholder","e.g. OHRI Express Care Patient Encounter Form"),required:!0,value:M}),"update"===J?o().createElement(s.oil,{id:"uuid",labelText:p("autogeneratedUuid","UUID (auto-generated"),disabled:!0,value:null==_?void 0:_.uuid}):null,o().createElement(s.oil,{id:"version",labelText:p("version","Version"),placeholder:"e.g. 1.0",onChange:function(e){!function(e){if(!e)return N(!1);N(!/^[0-9]/.test(e))}(e.target.value),F||ee(e.target.value)},invalid:F,invalidText:p("invalidVersionWarning","Version can only start with with a number"),required:!0,value:$}),o().createElement(s.PhF,{id:"encounterType",labelText:p("encounterType","Encounter Type"),onChange:function(e){return T(e.target.value)},required:!0,value:I},I?null:o().createElement(s.QlF,{text:p("chooseEncounterType","Choose an encounter type to link your form to"),value:""}),(null==h?void 0:h.length)>0&&h.map((function(e){return o().createElement(s.QlF,{key:e.uuid,value:e.uuid,text:e.name},e.name)}))),o().createElement(s.Kx8,{labelText:p("description","Description"),onChange:function(e){return B(e.target.value)},id:"description",placeholder:p("descriptionPlaceholderText","e.g. A form used to collect encounter data for clients in the Express Care program."),required:!0,value:D})))),o().createElement(s.mzw,null,o().createElement(s.zxk,{kind:"secondary",onClick:function(){return V(!1)}},p("close","Close")),o().createElement(s.zxk,{disabled:j||F,className:qe.spinner,type:"submit",kind:"primary"},j?o().createElement(s.lSo,{description:p("saving","Saving")+"..."}):o().createElement("span",null,p("save","Save")))))),o().createElement(s.zxk,{disabled:!f,kind:"primary",onClick:function(){return w?re("new"):Z(!0)}},p("saveForm","Save form")))};function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function He(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function Qe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){He(a,r,o,i,l,"next",e)}function l(e){He(a,r,o,i,l,"throw",e)}i(void 0)}))}}function Ve(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var Ye,Je=(Ye=Qe((function(e,t){var n,r,o,a,i;return Ve(this,(function(l){switch(l.label){case 0:return n=[],r=[],e?(a="string"==typeof e?JSON.parse(e):e,i=[],null===(o=a.pages)||void 0===o||o.forEach((function(e){var o;return null===(o=e.sections)||void 0===o?void 0:o.forEach((function(e){var o;return null===(o=e.questions)||void 0===o?void 0:o.forEach((function(e){var o;i.push(We(e,n,t,r),Xe(e,n)),"obsGroup"===e.type&&(null==e||null===(o=e.questions)||void 0===o||o.forEach((function(o){return i.push(We(o,n,t,r),Xe(e,n))})))}))}))})),[4,Promise.all(i)]):[3,2];case 1:return l.sent(),[2,[n,r]];case 2:return[2,[n,r]]}}))})),function(e,t){return Ye.apply(this,arguments)}),We=function(){var e=Qe((function(e,t,n,r){var o,a,i,l,s,c,u,d;return Ve(this,(function(A){switch(A.label){case 0:if(i="custom:(uuid,display,datatype,answers,conceptMappings:(conceptReferenceTerm:(conceptSource:(name),code)))",!(l=e.questionOptions.concept?e.questionOptions.concept:(null===(o=e.questionOptions.conceptMappings)||void 0===o?void 0:o.length)?null===(a=e.questionOptions.conceptMappings)||void 0===a?void 0:a.map((function(e){return"".concat(e.type,":").concat(e.value)})).join(","):""))return[3,5];A.label=1;case 1:return A.trys.push([1,3,,4]),[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/concept?references=").concat(l,"&v=").concat(i))];case 2:return(s=A.sent().data).results.length?(_=s.results,f=1,c=function(e){if(Array.isArray(e))return e}(_)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(_,f)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(e,t):void 0}}(_,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),"Boolean"===(u=c[0]).datatype.name&&e.questionOptions.answers.forEach((function(n){"cf82933b-3f3f-45e7-a5ab-5d31aaee3da3"!==n.concept&&"488b58ff-64f5-4f8a-8979-fa79940b1594"!==n.concept&&t.push({errorMessage:' concept "'.concat(e.questionOptions.concept,'" of type "boolean" has a non-boolean answer "').concat(n.label,'"'),field:e})})),"Coded"===u.datatype.name&&e.questionOptions.answers.forEach((function(t){u.answers.some((function(e){return e.uuid===t.concept}))||r.push({warningMessage:' answer: "'.concat(t.label,'" - "').concat(t.concept,'" does not exist in the response answers but exists in the form'),field:e})})),Ke(e,u,t,n)):t.push({errorMessage:' Concept "'.concat(e.questionOptions.concept,'" not found'),field:e}),[3,4];case 3:return d=A.sent(),console.error(d),[3,4];case 4:return[3,6];case 5:t.push({errorMessage:" No UUID",field:e}),A.label=6;case 6:return[2]}var _,f}))}));return function(t,n,r,o){return e.apply(this,arguments)}}(),Ke=function(e,t,n,r){Object.prototype.hasOwnProperty.call(r,t.datatype.name)&&!r[t.datatype.name].includes(e.questionOptions.rendering)&&n.push({errorMessage:" ".concat(e.questionOptions.concept,': datatype "').concat(t.datatype.name,'" doesn\'t match control type "').concat(e.questionOptions.rendering,'"'),field:e}),!Object.prototype.hasOwnProperty.call(r,t.datatype.name)&&n.push({errorMessage:' Untracked datatype "'.concat(t.datatype.name,'"'),field:e})},Xe=function(){var e=Qe((function(e,t){var n,r,o,a,i,l,s,c,u,d,A,_;return Ve(this,(function(f){switch(f.label){case 0:if(n=e.questionOptions.answers,r="custom:(uuid,display,datatype,conceptMappings:(conceptReferenceTerm:(conceptSource:(name),code)))",!(null==n?void 0:n.length))return[3,10];o=!0,a=!1,i=void 0,f.label=1;case 1:f.trys.push([1,8,9,10]),l=n[Symbol.iterator](),f.label=2;case 2:if(o=(s=l.next()).done)return[3,7];c=s.value,d=c.concept?c.concept:(null===(u=c.conceptMappings)||void 0===u?void 0:u.length)?c.conceptMappings.map((function(e){return"".concat(e.type,":").concat(e.value)})).join(","):"",f.label=3;case 3:return f.trys.push([3,5,,6]),[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/concept?references=").concat(d,"&v=").concat(r))];case 4:return f.sent().data.results.length||t.push({errorMessage:' concept "'.concat(c.concept,'" not found'),field:c}),[3,6];case 5:return A=f.sent(),console.error("Error fetching concept:",A),[3,6];case 6:return o=!0,[3,2];case 7:return[3,10];case 8:return _=f.sent(),a=!0,i=_,[3,10];case 9:try{o||null==l.return||l.return()}finally{if(a)throw i}return[7];case 10:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),$e=n(89454),et={};et.styleTagTransform=H(),et.setAttributes=U(),et.insert=L().bind(null,"head"),et.domAPI=j(),et.insertStyleElement=G(),N()($e.Z,et);const tt=$e.Z&&$e.Z.locals?$e.Z.locals:void 0;function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rt(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function ot(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){rt(a,r,o,i,l,"next",e)}function l(e){rt(a,r,o,i,l,"throw",e)}i(void 0)}))}}function at(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}const st=function(e){var t=e.schema,n=e.t,a=e.isValidating,l=e.setPublishedWithErrors,c=e.onFormValidation,u=e.setValidationComplete,d=e.setValidationResponse,A=(0,i.UO)().formUuid,_=Oe(A),f=_.form,p=_.mutate,b=it((0,r.useState)("idle"),2),h=b[0],g=b[1],C=it((0,r.useState)(!1),2),y=C[0],v=C[1],E=(0,m.useConfig)(),w=E.dataTypeToRenderingMap,k=E.enableFormValidation;function S(){return x.apply(this,arguments)}function x(){return(x=ot((function(){var e;return lt(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),g("publishing"),[4,B(f.uuid)];case 1:return t.sent(),(0,m.showSnackbar)({title:n("formPublished","Form published"),kind:"success",isLowContrast:!0,subtitle:"".concat(f.name," ")+n("formPublishedSuccessfully","form was published successfully")}),g("published"),[4,p()];case 2:return t.sent(),[3,4];case 3:return at(e=t.sent(),Error)&&((0,m.showSnackbar)({title:n("errorPublishingForm","Error publishing form"),kind:"error",subtitle:null==e?void 0:e.message}),g("error")),[3,4];case 4:return[2]}}))}))).apply(this,arguments)}function D(){return D=ot((function(){var e,n;return lt(this,(function(r){switch(r.label){case 0:return g("validateBeforePublishing"),[4,Je(t,w)];case 1:return e=it.apply(void 0,[r.sent(),1]),n=e[0],d(n),n.length?(g("validated"),u(!0),l(!0),[2]):[4,S()];case 2:return r.sent(),[2]}}))})),D.apply(this,arguments)}function O(){return(O=ot((function(){var e;return lt(this,(function(t){switch(t.label){case 0:g("unpublishing"),t.label=1;case 1:return t.trys.push([1,4,,5]),[4,I(f.uuid)];case 2:return t.sent(),(0,m.showSnackbar)({title:n("formUnpublished","Form unpublished"),kind:"success",isLowContrast:!0,subtitle:"".concat(f.name," ")+n("formUnpublishedSuccessfully","form was unpublished successfully")}),g("unpublished"),[4,p()];case 3:return t.sent(),[3,5];case 4:return at(e=t.sent(),Error)&&((0,m.showSnackbar)({title:n("errorUnpublishingForm","Error unpublishing form"),kind:"error",subtitle:null==e?void 0:e.message}),g("error")),[3,5];case 5:return v(!1),[2]}}))}))).apply(this,arguments)}return o().createElement("div",{className:tt.actionButtons},o().createElement(Ge,{form:f,schema:t}),o().createElement(o().Fragment,null,f&&k&&o().createElement(s.zxk,{kind:"tertiary",onClick:c,disabled:a},a?o().createElement(s.lSo,{className:tt.spinner,description:n("validating","Validating")+"..."}):o().createElement("span",null,n("validateForm","Validate form"))),f&&!f.published?k?o().createElement(s.zxk,{kind:"secondary",onClick:function(){return D.apply(this,arguments)},disabled:"validateBeforePublishing"===h},"validateBeforePublishing"===h?o().createElement(s.lSo,{className:tt.spinner,description:n("validating","Validating")+"..."}):o().createElement("span",null,n("validateAndPublishForm","Validate and publish form"))):o().createElement(s.zxk,{kind:"secondary",onClick:S,disabled:"publishing"===h},"publishing"!==h||(null==f?void 0:f.published)?o().createElement("span",null,n("publishForm","Publish form")):o().createElement(s.lSo,{className:tt.spinner,description:n("publishing","Publishing")+"..."})):null,f&&f.published?o().createElement(s.zxk,{kind:"danger",onClick:function(){v(!0)},disabled:"unpublishing"===h},n("unpublishForm","Unpublish form")):null,!!y&&o().createElement(s.lpG,{open:!0,onClose:function(){return v(!1)},preventCloseOnClickOutside:!0},o().createElement(s.xBx,{title:n("unpublishConfirmation","Are you sure you want to unpublish this form?")}),o().createElement(s.fef,null,o().createElement("p",null,n("unpublishExplainerText","Unpublishing a form means you can no longer access it from your frontend. Unpublishing forms does not delete their associated schemas, it only affects whether or not you can access them in your frontend."))),o().createElement(s.mzw,null,o().createElement(s.zxk,{kind:"secondary",onClick:function(){return v(!1)}},n("cancel","Cancel")),o().createElement(s.zxk,{disabled:"unpublishing"===h,kind:"unpublishing"===h?"secondary":"danger",onClick:function(){return O.apply(this,arguments)}},"unpublishing"===h?o().createElement(s.lSo,{className:tt.spinner,description:n("unpublishing","Unpublishing")+"..."}):o().createElement("span",null,n("confirm","Confirm")))))))},ct=function(e){var t,n,r,a,i,c,u,d=e.form,A=(0,l.useTranslation)().t;return o().createElement(s.x4x,{isCondensed:!0,selection:!1},o().createElement(s.FxI,null,o().createElement(s.s1N,null,o().createElement(s.agF,null,o().createElement("b",null,A("formName","Form Name"))),o().createElement(s.agF,null,d.name)),o().createElement(s.s1N,null,o().createElement(s.agF,null,A("description","Description")),o().createElement(s.agF,null,d.description)),o().createElement(s.s1N,null,o().createElement(s.agF,null,A("formUuid","Form UUID")),o().createElement(s.agF,null,d.uuid)),o().createElement(s.s1N,null,o().createElement(s.agF,null,A("version","Version")),o().createElement(s.agF,null,d.version)),o().createElement(s.s1N,null,o().createElement(s.agF,null,A("encounterType","Encounter Type")),o().createElement(s.agF,null,d.encounterType.uuid)),o().createElement(s.s1N,null,o().createElement(s.agF,null,A("createdBy","Created By")),o().createElement(s.agF,null,"".concat(null!==(u=null==d||null===(n=d.auditInfo)||void 0===n||null===(t=n.creator)||void 0===t?void 0:t.display)&&void 0!==u?u:A("unknownUser","Unknown")," on ").concat((0,m.formatDatetime)((0,m.parseDate)(null==d||null===(r=d.auditInfo)||void 0===r?void 0:r.dateCreated))))),o().createElement(s.s1N,null,o().createElement(s.agF,null,A("lastEditedBy","Last Edited By")),o().createElement(s.agF,null,(null==d||null===(a=d.auditInfo)||void 0===a?void 0:a.dateChanged)?"".concat(null==d||null===(i=d.auditInfo)||void 0===i?void 0:i.changedBy.display," on ").concat((0,m.formatDatetime)((0,m.parseDate)(null==d||null===(c=d.auditInfo)||void 0===c?void 0:c.dateChanged))):A("uneditedFormMsg","This form has never been edited"))),o().createElement(s.s1N,null,o().createElement(s.agF,null,A("published","Published")),o().createElement(s.agF,null,d.published?A("yes","Yes"):A("no","No"))),o().createElement(s.s1N,null,o().createElement(s.agF,null,A("retired","Retired")),o().createElement(s.agF,null,d.retired?A("yes","Yes"):A("no","No")))))};var ut=n(4511),dt=n(32990),mt=n(51659),At={};At.styleTagTransform=H(),At.setAttributes=U(),At.insert=L().bind(null,"head"),At.domAPI=j(),At.insertStyleElement=G(),N()(mt.Z,At);const _t=mt.Z&&mt.Z.locals?mt.Z.locals:void 0;function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pt(e){var t=e.error,n=e.resetErrorBoundary,r=(0,l.useTranslation)().t;return o().createElement(s.n9L,{className:_t.errorStateTile},o().createElement("h4",{className:_t.heading},r("problemLoadingPreview","There was a problem loading the form preview")),o().createElement("p",{className:_t.helperText},o().createElement("pre",null,t.message)),o().createElement(s.zxk,{kind:"primary",onClick:n},r("tryAgain","Try again")))}const bt=function(e){var t,n,a=e.isLoading,i=e.schema,c=(0,l.useTranslation)().t,u=(t=(0,r.useState)({encounterType:"",name:"Test Form",pages:[{label:"Test Page",sections:[{label:"Test Section",isExpanded:"true",questions:[{label:"Test Question",type:"obs",questionOptions:{rendering:"text",concept:"xxxx"},id:"testQuestion"}]}]}],processor:"EncounterFormProcessor",referencedForms:[],uuid:"xxx"}),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ft(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],m=u[1];return(0,r.useEffect)((function(){i&&m(i)}),[i]),a?o().createElement("div",{className:_t.loadingContainer},o().createElement(s.lSo,{className:_t.loader,description:c("loading","Loading")+"..."})):o().createElement("div",{className:_t.container},!i&&o().createElement(s.n9L,{className:_t.emptyStateTile},o().createElement("h4",{className:_t.heading},c("noSchemaLoaded","No schema loaded")),o().createElement("p",{className:_t.helperText},c("formRendererHelperText","Load a form schema in the Schema Editor to the left to see it rendered here by the Form Engine."))),i===d&&o().createElement(ut.SV,{FallbackComponent:pt},o().createElement(dt.SS,{formJson:d,mode:"enter",patientUUID:""})))};var ht=n(60887),gt=n(43925);function Ct(e){var t,n,r="".concat(m.restBaseUrl,"/concept?q=").concat(e,"&v=full"),o=(0,A.ZP)(e?r:null,m.openmrsFetch),a=o.data,i=o.error,l=o.isLoading;return{concepts:null!==(n=null==a||null===(t=a.data)||void 0===t?void 0:t.results)&&void 0!==n?n:[],conceptLookupError:i,isLoadingConcepts:l}}var yt=n(76115),vt={};vt.styleTagTransform=H(),vt.setAttributes=U(),vt.insert=L().bind(null,"head"),vt.domAPI=j(),vt.insertStyleElement=G(),N()(yt.Z,vt);const Et=yt.Z&&yt.Z.locals?yt.Z.locals:void 0;function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){kt(e,t,n[t])}))}return e}function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Dt="both";function Bt(e){var t=e.isRequired,n=e.text,r=e.t;return o().createElement(o().Fragment,null,o().createElement("span",null,n),t&&o().createElement("span",{title:r("required","Required"),className:Et.required},"*"))}const Ot=function(e){var t,n,a,i,c,u,_,f=e.onModalChange,p=e.onSchemaChange,b=e.pageIndex,h=e.questionIndex,g=e.resetIndices,C=e.schema,y=e.sectionIndex,v=e.showModal,E=(0,l.useTranslation)().t,w=(0,m.useConfig)(),k=w.fieldTypes,S=w.questionTypes,x=xt((0,r.useState)([]),2),D=x[0],B=x[1],O=xt((0,r.useState)([]),2),I=O[0],T=O[1],q=xt((0,r.useState)(""),2),F=q[0],N=q[1],P=(0,m.useDebounce)(F),j=xt((0,r.useState)(Dt),2),z=j[0],L=j[1],M=xt((0,r.useState)(null),2),U=M[0],R=M[1],G=xt((0,r.useState)(!1),2),Z=G[0],H=G[1],Q=xt((0,r.useState)(""),2),V=Q[0],Y=Q[1],J=xt((0,r.useState)(""),2),W=J[0],K=J[1],X=xt((0,r.useState)(""),2),$=X[0],ee=X[1],te=xt((0,r.useState)(""),2),ne=te[0],re=te[1],oe=xt((0,r.useState)(null),2),ae=oe[0],ie=oe[1],le=xt((0,r.useState)(""),2),se=le[0],ce=le[1],ue=xt((0,r.useState)([]),2),de=ue[0],me=ue[1],Ae=xt((0,r.useState)(null),2),_e=Ae[0],fe=Ae[1],pe=xt((0,r.useState)(null),2),be=pe[0],he=pe[1],ge=Ct(P),Ce=ge.concepts,ye=ge.conceptLookupError,ve=ge.isLoadingConcepts,Ee=(a="".concat(m.restBaseUrl,"/personattributetype?v=").concat("custom:(uuid,display,format,concept)"),c=(i=(0,A.ZP)(a,m.openmrsFetch)).data,u=i.error,_=i.isLoading,{personAttributeTypes:null!==(n=null==c||null===(t=c.data)||void 0===t?void 0:t.results)&&void 0!==n?n:[],personAttributeTypeLookupError:u,isLoadingPersonAttributeTypes:_}),we=Ee.personAttributeTypes,ke=Ee.personAttributeTypeLookupError,Se=function(e){var t,n=null==C||null===(t=C.pages)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.sections)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.questions)||void 0===t?void 0:t.map((function(e){return e.id}))}))}));return(0,gt.Z)(n).includes(e)},xe=function(){try{var e,t,n,r,o="question".concat(h+1,"Section").concat(y+1,"Page-").concat(b+1),a=(i=St({label:ne,type:ae,required:Z,id:null!=$?$:o},"encounterDatetime"===ae&&{datePickerType:z}),l=null!=(l={questionOptions:St({rendering:U,concept:null==_e?void 0:_e.uuid},I.length&&{conceptMappings:I},de.length&&{answers:de.map((function(e){return{concept:e.id,label:e.text}}))},"personAttribute"===ae&&{attributeType:be.uuid},"obs"===ae&&"number"===U&&!1===(null==_e?void 0:_e.allowDecimal)&&{disallowDecimals:!0}),validators:[]})?l:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(l)).forEach((function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(l,e))})),i);null===(r=C.pages[b])||void 0===r||null===(n=r.sections)||void 0===n||null===(t=n[y])||void 0===t||null===(e=t.questions)||void 0===e||e.push(a),p(St({},C)),g(),re(""),ee(""),H(!1),ie(null),R(null),fe(null),T([]),B([]),me([]),(0,m.showSnackbar)({title:E("success","Success!"),kind:"success",isLowContrast:!0,subtitle:E("questionCreated","New question created")})}catch(e){s=e,(null!=(c=Error)&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](s):s instanceof c)&&(0,m.showSnackbar)({title:E("errorCreatingQuestion","Error creating question"),kind:"error",subtitle:null==e?void 0:e.message})}var i,l,s,c};return o().createElement(s.lpG,{open:v,onClose:function(){return f(!1)},preventCloseOnClickOutside:!0},o().createElement(s.xBx,{title:E("createNewQuestion","Create a new question")}),o().createElement(s.l09,{className:Et.form,onSubmit:function(e){return e.preventDefault()}},o().createElement(s.fef,{hasScrollingContent:!0},o().createElement(s.cwH,{legendText:""},o().createElement(s.Kqy,{gap:5},o().createElement(s.oil,{id:"questionLabel",labelText:o().createElement(Bt,{isRequired:Z,text:E("questionLabel","Label"),t:E}),placeholder:E("labelPlaceholder","e.g. Type of Anaesthesia"),value:ne,onChange:function(e){return re(e.target.value)},required:!0}),o().createElement(s.oil,{id:"questionId",invalid:Se($),invalidText:E("questionIdExists","This question ID already exists in your schema"),labelText:o().createElement("div",{className:Et.questionIdLabel},o().createElement("span",null,E("questionId","Question ID (prefer using camel-case for IDs). Each field should have a unique ID.")),ne?o().createElement(s.zxk,{kind:"ghost",onClick:function(){var e,t=null==ne||null===(e=ne.toLowerCase())||void 0===e?void 0:e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"");ee(t)},size:"sm"},E("convertLabelToCamelCase","Convert label to camel-case")):null),value:$,onChange:function(e){ee(e.target.value)},placeholder:E("questionIdPlaceholder",'Enter a unique ID e.g. "anaesthesiaType" for a question asking about the type of anaesthesia.'),required:!0}),o().createElement(s.SYO,{defaultSelected:"optional",name:"isQuestionRequired",legendText:E("isQuestionRequiredOrOptional","Is this question a required or optional field? Required fields must be answered before the form can be submitted.")},o().createElement(s.EUY,{id:"questionIsNotRequired",defaultChecked:!0,labelText:E("optional","Optional"),onClick:function(){return H(!1)},value:"optional"}),o().createElement(s.EUY,{id:"questionIsRequired",defaultChecked:!1,labelText:E("required","Required"),onClick:function(){return H(!0)},value:"required"})),o().createElement(s.PhF,{value:ae,onChange:function(e){return ie(e.target.value)},id:"questionType",invalidText:E("typeRequired","Type is required"),labelText:E("questionType","Question type"),required:!0},!ae&&o().createElement(s.QlF,{text:E("chooseQuestionType","Choose a question type"),value:""}),S.map((function(e,t){return o().createElement(s.QlF,{text:e,value:e,key:t})}))),o().createElement(s.PhF,{value:U,onChange:function(e){return R(e.target.value)},id:"renderingType",invalidText:E("validRenderingTypeRequired","A valid rendering type value is required"),labelText:E("renderingType","Rendering type"),required:!0},!U&&o().createElement(s.QlF,{text:E("chooseRenderingType","Choose a rendering type"),value:""}),S.filter((function(e){return"obs"!==e})).includes(ae)?{control:["text"],encounterDatetime:["date"],encounterLocation:["ui-select-extended"],encounterProvider:["ui-select-extended"],obsGroup:["group","repeating"],personAttribute:["ui-select-extended","select","text"],testOrder:["group","repeating"]}[ae].map((function(e,t){return o().createElement(s.QlF,{key:"".concat(ae,"-").concat(t),text:e,value:e})})):k.map((function(e,t){return o().createElement(s.QlF,{key:t,text:e,value:e})}))),"personAttribute"===ae&&o().createElement("div",null,o().createElement(s.lXp,{className:Et.label},E("searchForBackingPersonAttributeType","Search for a backing person attribute type")),ke?o().createElement(s.K0D,{kind:"error",lowContrast:!0,className:Et.error,title:E("errorFetchingPersonAttributeTypes","Error fetching person attribute types"),subtitle:E("pleaseTryAgain","Please try again.")}):null,o().createElement(s.CtY,{helperText:E("personAttributeTypeHelperText","Person attribute type fields must be linked to a person attribute type"),id:"personAttributeTypeLookup",items:we,itemToString:function(e){return null==e?void 0:e.display},onChange:function(e){var t=e.selectedItem;he(t)},placeholder:E("choosePersonAttributeType","Choose a person attribute type"),selectedItem:be})),"obs"===ae?o().createElement(o().Fragment,null,"number"===U?o().createElement(o().Fragment,null,o().createElement(s.oil,{id:"min",labelText:"Min",value:W||"",onChange:function(e){return K(e.target.value)},required:!0}),o().createElement(s.oil,{id:"max",labelText:"Max",value:V||"",onChange:function(e){return Y(e.target.value)},required:!0})):"textarea"===U?o().createElement(s.oil,{id:"textAreaRows",labelText:E("rows","Rows"),value:se||"",onChange:function(e){return ce(e.target.value)},required:!0}):null,"ui-select-extended"!==U&&o().createElement("div",null,o().createElement(s.lXp,{className:Et.label},E("searchForBackingConcept","Search for a backing concept")),ye?o().createElement(s.K0D,{kind:"error",lowContrast:!0,className:Et.error,title:E("errorFetchingConcepts","Error fetching concepts"),subtitle:E("pleaseTryAgain","Please try again.")}):null,o().createElement(s.olm,{id:"conceptLookup",onClear:function(){fe(null),B([]),T([])},onChange:function(e){return N(e.target.value)},placeholder:E("searchConcept","Search using a concept name or UUID"),required:!0,size:"md",value:F||(_e?_e.display:"")}),F?ve?o().createElement(s.lSo,{className:Et.loader,description:E("searching","Searching")+"..."}):(null==Ce?void 0:Ce.length)&&!ve?o().createElement("ul",{className:Et.conceptList},null==Ce?void 0:Ce.map((function(e,t){return o().createElement("li",{role:"menuitem",className:Et.concept,key:t,onClick:function(){return function(e){var t,n;N(""),fe(e),B(null==e||null===(t=e.answers)||void 0===t?void 0:t.map((function(e){return{concept:null==e?void 0:e.uuid,label:null==e?void 0:e.display}}))),T(null==e||null===(n=e.mappings)||void 0===n?void 0:n.map((function(e){var t=e.display.split(": ");return{relationship:e.conceptMapType.display,type:t[0],value:t[1]}})))}(e)}},e.display)}))):o().createElement(s.mh4,null,o().createElement(s.n9L,{className:Et.emptyResults},o().createElement("span",null,E("noMatchingConcepts","No concepts were found that match")," ",o().createElement("strong",null,'"',P,'".'))),o().createElement("div",{className:Et.oclLauncherBanner},o().createElement("p",{className:Et.bodyShort01},E("conceptSearchHelpText","Can't find a concept?")),o().createElement("a",{className:Et.oclLink,target:"_blank",rel:"noopener noreferrer",href:"https://app.openconceptlab.org/"},E("searchInOCL","Search in OCL"),o().createElement(d.Gu,{size:16})))):null),!1===(null==_e?void 0:_e.allowDecimal)&&o().createElement(s.K0D,{kind:"info",lowContrast:!0,title:E("decimalsNotAllowed","This concept does not allow decimals")}),(null==I?void 0:I.length)?o().createElement(s.cwH,null,o().createElement(s.lXp,{className:Et.label},E("mappings","Mappings")),o().createElement("table",{className:Et.tableStriped},o().createElement("thead",null,o().createElement("tr",null,o().createElement("th",null,E("relationship","Relationship")),o().createElement("th",null,E("source","Source")),o().createElement("th",null,E("code","Code")))),o().createElement("tbody",null,I.map((function(e,t){return o().createElement("tr",{key:"mapping-".concat(t)},o().createElement("td",null,e.relationship),o().createElement("td",null,e.type),o().createElement("td",null,e.value))}))))):null,(null==D?void 0:D.length)?o().createElement(s.NUq,{className:Et.multiSelect,direction:"top",id:"selectAnswers",itemToString:function(e){return e.text},items:D.map((function(e){return{id:e.concept,text:e.label}})),onChange:function(e){var t=e.selectedItems;return me(t.sort())},size:"md",titleText:E("selectAnswersToDisplay","Select answers to display")}):null,de.length?o().createElement("div",null,de.map((function(e){return o().createElement(s.Vp9,{className:Et.tag,key:e.id,type:"blue"},e.text)}))):null):null,"encounterDatetime"===ae?o().createElement(s.SYO,{defaultSelected:"both",name:"datePickerType",legendText:E("datePickerType","The type of date picker to show ")},o().createElement(s.EUY,{id:"both",defaultChecked:!0,labelText:E("calendarAndTimer","Calendar and timer"),onClick:function(){return L(Dt)},value:"both"}),o().createElement(s.EUY,{id:"calendar",defaultChecked:!1,labelText:E("calendarOnly","Calendar only"),onClick:function(){return L("calendar")},value:"calendar"}),o().createElement(s.EUY,{id:"timer",defaultChecked:!1,labelText:E("timerOnly","Timer only"),onClick:function(){return L("timer")},value:"timer"})):null)))),o().createElement(s.mzw,null,o().createElement(s.zxk,{onClick:function(){return f(!1)},kind:"secondary"},E("cancel","Cancel")),o().createElement(s.zxk,{disabled:!ne||!$||Se($)||!U,onClick:function(){xe(),f(!1)}},o().createElement("span",null,E("save","Save")))))};function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Tt=function(e){var t=e.onModalChange,n=e.onSchemaChange,r=e.resetIndices,a=e.pageIndex,i=e.sectionIndex,c=e.schema,u=e.showModal,d=(0,l.useTranslation)().t;return o().createElement(s.lpG,{open:u,onClose:function(){return t(!1)},preventCloseOnClickOutside:!0},o().createElement(s.xBx,{title:d("deleteSectionConfirmation","Are you sure you want to delete this section?")}),o().createElement(s.fef,null,o().createElement("p",null,d("deleteSectionExplainerText","Deleting this section will delete all the questions associated with it. This action cannot be undone."))),o().createElement(s.mzw,null,o().createElement(s.zxk,{kind:"secondary",onClick:function(){return t(!1)}},d("cancel","Cancel")),o().createElement(s.zxk,{kind:"danger",onClick:function(){(function(e,t){try{c.pages[e].sections.splice(t,1),n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){It(e,t,n[t])}))}return e}({},c)),r(),(0,m.showSnackbar)({title:d("success","Success!"),kind:"success",isLowContrast:!0,subtitle:d("SectionDeleted","Section deleted")})}catch(e){o=e,(null!=(a=Error)&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](o):o instanceof a)&&(0,m.showSnackbar)({title:d("errorDeletingSection","Error deleting section"),kind:"error",subtitle:null==e?void 0:e.message})}var o,a})(a,i),t(!1)}},o().createElement("span",null,d("deleteSection","Delete section")))))};function qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ft=function(e){var t=e.onModalChange,n=e.onSchemaChange,r=e.resetIndices,a=e.pageIndex,i=e.schema,c=e.showModal,u=(0,l.useTranslation)().t;return o().createElement(s.lpG,{open:c,onClose:function(){return t(!1)},preventCloseOnClickOutside:!0},o().createElement(s.xBx,{title:u("deletePageConfirmation","Are you sure you want to delete this page?")}),o().createElement(s.fef,null,o().createElement("p",null,u("deletePageExplainerText","Deleting this page will delete all the sections and questions associated with it. This action cannot be undone."))),o().createElement(s.mzw,null,o().createElement(s.zxk,{kind:"secondary",onClick:function(){return t(!1)}},u("cancel","Cancel")),o().createElement(s.zxk,{kind:"danger",onClick:function(){(function(e){try{i.pages.splice(e,1),n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){qt(e,t,n[t])}))}return e}({},i)),r(),(0,m.showSnackbar)({title:u("success","Success!"),kind:"success",isLowContrast:!0,subtitle:u("pageDeleted","Page deleted")})}catch(e){t=e,(null!=(o=Error)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](t):t instanceof o)&&(0,m.showSnackbar)({title:u("errorDeletingPage","Error deleting page"),kind:"error",subtitle:null==e?void 0:e.message})}var t,o})(a),t(!1)}},o().createElement("span",null,u("deletePage","Delete page")))))};function Nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Pt=function(e){var t=e.onModalChange,n=e.onSchemaChange,r=e.resetIndices,a=e.pageIndex,i=e.sectionIndex,c=e.questionIndex,u=e.schema,d=e.showModal,A=(0,l.useTranslation)().t;return o().createElement(s.lpG,{open:d,onClose:function(){return t(!1)},preventCloseOnClickOutside:!0},o().createElement(s.xBx,{title:A("deleteQuestionConfirmation","Are you sure you want to delete this question?")}),o().createElement(s.fef,null,o().createElement("p",null,A("deleteQuestionExplainerText","This action cannot be undone."))),o().createElement(s.mzw,null,o().createElement(s.zxk,{kind:"secondary",onClick:function(){return t(!1)}},A("cancel","Cancel")),o().createElement(s.zxk,{kind:"danger",onClick:function(){(function(e,t,o){try{u.pages[e].sections[t].questions.splice(o,1),n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Nt(e,t,n[t])}))}return e}({},u)),r(),(0,m.showSnackbar)({title:A("success","Success!"),kind:"success",isLowContrast:!0,subtitle:A("QuestionDeleted","Question deleted")})}catch(e){a=e,(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](a):a instanceof i)&&(0,m.showSnackbar)({title:A("errorDeletingQuestion","Error deleting question"),kind:"error",subtitle:null==e?void 0:e.message})}var a,i})(a,i,c),t(!1)}},o().createElement("span",null,A("deleteQuestion","Delete question")))))};var jt=n(36409);function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Ut=function(e){var t,n,a,i,c,u,_,f,p,b,h,g,C,y,v,E,w,k,S,x,D,B,O,I=e.onModalChange,T=e.onQuestionEdit,q=e.onSchemaChange,F=e.pageIndex,N=e.questionIndex,P=e.questionToEdit,j=e.resetIndices,z=e.schema,L=e.sectionIndex,M=e.showModal,U=(0,l.useTranslation)().t,R=(0,m.useConfig)(),G=R.fieldTypes,Z=R.questionTypes,H=Mt((0,r.useState)(!1),2),Q=H[0],V=H[1],Y=Mt((0,r.useState)([]),2),J=Y[0],W=Y[1],K=Mt((0,r.useState)(P.questionOptions.conceptMappings),2),X=K[0],$=K[1],ee=Mt((0,r.useState)(""),2),te=ee[0],ne=ee[1],re=Mt((0,r.useState)(null),2),oe=re[0],ae=re[1],ie=Mt((0,r.useState)(!1),2),le=ie[0],se=ie[1],ce=Mt((0,r.useState)(""),2),ue=ce[0],de=ce[1],me=Mt((0,r.useState)(""),2),Ae=me[0],_e=me[1],fe=Mt((0,r.useState)(""),2),pe=fe[0],be=fe[1],he=Mt((0,r.useState)(""),2),ge=he[0],Ce=he[1],ye=Mt((0,r.useState)(null),2),ve=ye[0],Ee=ye[1],we=Mt((0,r.useState)(""),2),ke=we[0],Se=we[1],xe=Mt((0,r.useState)([]),2),De=xe[0],Be=xe[1],Oe=Mt((0,r.useState)(null),2),Ie=Oe[0],Te=Oe[1],qe=Ct(te),Fe=qe.concepts,Ne=qe.isLoadingConcepts,Pe=(g=P.questionOptions.concept,E="".concat(m.restBaseUrl,"/concept/").concat(g,"?v=").concat("custom:(name:(display))"),k=(w=(0,A.ZP)(g?E:null,m.openmrsFetch)).data,S=w.error,{conceptName:null!==(v=null==k||null===(y=k.data)||void 0===y||null===(C=y.name)||void 0===C?void 0:C.display)&&void 0!==v?v:null,conceptNameLookupError:S,isLoadingConceptName:!k&&!S||!1}),je=Pe.conceptName,ze=Pe.conceptNameLookupError,Le=Pe.isLoadingConceptName,Me=Ie&&(null==P||null===(t=P.questionOptions)||void 0===t?void 0:t.concept)!==(null==Ie?void 0:Ie.uuid),Ue=(0,r.useMemo)((function(){return(0,jt.Z)((function(e){return ne(e)}),500)}),[]);return o().createElement(s.lpG,{open:M,onClose:function(){return I(!1)},preventCloseOnClickOutside:!0},o().createElement(s.xBx,{title:U("editQuestion","Edit question")}),o().createElement(s.l09,{className:Et.form,onSubmit:function(e){return e.preventDefault()}},o().createElement(s.fef,{hasScrollingContent:!0},o().createElement(s.Kqy,{gap:5},o().createElement(s.oil,{defaultValue:P.label,id:P.id,labelText:U("questionLabel","Label"),onChange:function(e){return Ce(e.target.value)},required:!0}),o().createElement(s.oil,{defaultValue:P.id,id:"questionId",invalid:function(e){var t;if((null==P?void 0:P.id)===e)return!1;var n=null==z||null===(t=z.pages)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.sections)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.questions)||void 0===t?void 0:t.map((function(e){return e.id}))}))}));return(0,gt.Z)(n).includes(e)}(pe),invalidText:U("questionIdExists","This question ID already exists in your schema"),labelText:U("questionId","Question ID (prefer using camel-case for IDs). Each field should have a unique ID."),onChange:function(e){return be(e.target.value)},placeholder:U("questionIdPlaceholder",'Enter a unique ID e.g. "anaesthesiaType" for a question asking about the type of anaesthesia.'),required:!0}),o().createElement(s.SYO,{defaultSelected:/true/.test(null==P||null===(n=P.required)||void 0===n?void 0:n.toString())?"required":"optional",name:"isQuestionRequired",legendText:U("isQuestionRequiredOrOptional","Is this question a required or optional field? Required fields must be answered before the form can be submitted.")},o().createElement(s.EUY,{id:"questionIsNotRequired",defaultChecked:!0,labelText:U("optional","Optional"),onClick:function(){return se(!1)},value:"optional"}),o().createElement(s.EUY,{id:"questionIsRequired",defaultChecked:!1,labelText:U("required","Required"),onClick:function(){return se(!0)},value:"required"})),o().createElement(s.PhF,{defaultValue:P.type,onChange:function(e){return Ee(e.target.value)},id:"questionType",invalidText:U("typeRequired","Type is required"),labelText:U("questionType","Question type"),required:!0},!ve&&o().createElement(s.QlF,{text:U("chooseQuestionType","Choose a question type"),value:""}),Z.map((function(e,t){return o().createElement(s.QlF,{text:e,value:e,key:t})}))),o().createElement(s.PhF,{defaultValue:P.questionOptions.rendering,onChange:function(e){return ae(e.target.value)},id:"renderingType",invalidText:U("validFieldTypeRequired","A valid field type value is required"),labelText:U("renderingType","Rendering type"),required:!0},!oe&&o().createElement(s.QlF,{text:U("chooseRenderingType","Choose a rendering type"),value:""}),G.map((function(e,t){return o().createElement(s.QlF,{text:e,value:e,key:t})}))),"number"===oe?o().createElement(o().Fragment,null,o().createElement(s.oil,{id:"min",labelText:"Min",value:Ae||"",onChange:function(e){return _e(e.target.value)},required:!0}),o().createElement(s.oil,{id:"max",labelText:"Max",value:ue||"",onChange:function(e){return de(e.target.value)},required:!0})):"textarea"===oe?o().createElement(s.oil,{id:"textAreaRows",labelText:U("rows","Rows"),value:ke||"",onChange:function(e){return Se(e.target.value)},required:!0}):null,"ui-select-extended"!==oe&&o().createElement("div",null,o().createElement(s.lXp,{className:Et.label},U("searchForBackingConcept","Search for a backing concept")),ze?o().createElement(s.K0D,{kind:"error",lowContrast:!0,className:Et.error,title:U("errorFetchingConceptName","Couldn't resolve concept name"),subtitle:U("conceptDoesNotExist","The linked concept '{{conceptName}}' does not exist in your dictionary",{conceptName:P.questionOptions.concept})}):null,Le?o().createElement(s.lSo,{className:Et.loader,description:U("loading","Loading")+"..."}):o().createElement(o().Fragment,null,o().createElement(s.olm,{defaultValue:je,id:"conceptLookup",onClear:function(){return Te(null)},onChange:function(e){var t,n;(n=null===(t=e.target.value)||void 0===t?void 0:t.trim())&&Ue(n)},placeholder:U("searchConcept","Search using a concept name or UUID"),required:!0,size:"md",value:null==Ie?void 0:Ie.display}),te?Ne?o().createElement(s.lSo,{className:Et.loader,description:U("searching","Searching")+"..."}):(null==Fe?void 0:Fe.length)&&!Ne?o().createElement("ul",{className:Et.conceptList},null==Fe?void 0:Fe.map((function(e,t){return o().createElement("li",{role:"menuitem",className:Et.concept,key:t,onClick:function(){return function(e){var t,n,r;ne(""),Be([]),Te(e),$(null==e||null===(t=e.mappings)||void 0===t?void 0:t.map((function(e){var t=e.display.split(": ");return{relationship:e.conceptMapType.display,type:t[0],value:t[1]}}))),W(null!==(r=null==e||null===(n=e.answers)||void 0===n?void 0:n.map((function(e){return{concept:null==e?void 0:e.uuid,label:null==e?void 0:e.display}})))&&void 0!==r?r:[])}(e)}},e.display)}))):o().createElement(s.mh4,null,o().createElement(s.n9L,{className:Et.emptyResults},o().createElement("span",null,U("noMatchingConcepts","No concepts were found that match")," ",o().createElement("strong",null,'"',te,'".'))),o().createElement("div",{className:Et.oclLauncherBanner},o().createElement("p",{className:Et.bodyShort01},U("conceptSearchHelpText","Can't find a concept?")),o().createElement("a",{className:Et.oclLink,target:"_blank",rel:"noopener noreferrer",href:"https://app.openconceptlab.org/"},U("searchInOCL","Search in OCL"),o().createElement(d.Gu,{size:16})))):null)),(null==X?void 0:X.length)?o().createElement(s.cwH,null,o().createElement(s.lXp,{className:Et.label},U("mappings","Mappings")),o().createElement("table",{className:Et.tableStriped},o().createElement("thead",null,o().createElement("tr",null,o().createElement("th",null,U("relationship","Relationship")),o().createElement("th",null,U("source","Source")),o().createElement("th",null,U("code","Code")))),o().createElement("tbody",null,X.map((function(e,t){return o().createElement("tr",{key:"mapping-".concat(t)},o().createElement("td",null,null!==(x=e.relationship)&&void 0!==x?x:"--"),o().createElement("td",null,null!==(D=e.type)&&void 0!==D?D:"--"),o().createElement("td",null,null!==(B=e.value)&&void 0!==B?B:"--"))}))))):null,!Me&&(null==P||null===(a=P.questionOptions.answers)||void 0===a?void 0:a.length)?o().createElement(s.NUq,{className:Et.multiSelect,direction:"top",id:"selectAnswers",itemToString:function(e){return e.text},initialSelectedItems:null==P||null===(c=P.questionOptions)||void 0===c||null===(i=c.answers)||void 0===i?void 0:i.map((function(e){return{id:e.concept,text:e.label}})),items:null==P||null===(_=P.questionOptions)||void 0===_||null===(u=_.answers)||void 0===u?void 0:u.map((function(e){return{id:e.concept,text:null!==(O=e.label)&&void 0!==O?O:""}})),onChange:function(e){var t=e.selectedItems;V(!0),Be(t.sort())},size:"md",titleText:U("selectAnswersToDisplay","Select answers to display")}):null,Me||!(null==P||null===(p=P.questionOptions)||void 0===p||null===(f=p.answers)||void 0===f?void 0:f.length)||Q?null:o().createElement("div",null,null==P||null===(h=P.questionOptions)||void 0===h||null===(b=h.answers)||void 0===b?void 0:b.map((function(e){return o().createElement(s.Vp9,{className:Et.tag,key:null==e?void 0:e.concept,type:"blue"},null==e?void 0:e.label)}))),Me&&J.length?o().createElement(s.NUq,{className:Et.multiSelect,direction:"top",id:"selectAnswers",itemToString:function(e){return e.text},items:J.map((function(e){return{id:e.concept,text:e.label}})),onChange:function(e){var t=e.selectedItems;return Be(t.sort())},size:"md",titleText:U("selectAnswersToDisplay","Select answers to display")}):null,(null!=Me?Me:Q)&&o().createElement("div",null,De.map((function(e){return o().createElement(s.Vp9,{className:Et.tag,key:e.id,type:"blue"},e.text)}))))),o().createElement(s.mzw,null,o().createElement(s.zxk,{onClick:function(){return I(!1)},kind:"secondary"},U("cancel","Cancel")),o().createElement(s.zxk,{onClick:function(){!function(e){var t,n,r;r=!Me&&(null==De?void 0:De.length)?De.map((function(e){return{concept:e.id,label:e.text}})):Me&&0===J.length?[]:Me&&(null==J?void 0:J.length)>0&&(null==De?void 0:De.length)&&(null==De?void 0:De.length)?De.map((function(e){return{concept:e.id,label:e.text}})):P.questionOptions.answers;try{var o,a={label:ge||P.label,type:ve||P.type,required:le||/true/.test(null==P||null===(o=P.required)||void 0===o?void 0:o.toString()),id:pe||P.id,questionOptions:{rendering:oe||P.questionOptions.rendering,concept:(null==Ie?void 0:Ie.uuid)?Ie.uuid:P.questionOptions.concept,conceptMappings:(null==X?void 0:X.length)?X:P.questionOptions.conceptMappings,answers:r}};z.pages[F].sections[L].questions[e]=a,q(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Lt(e,t,n[t])}))}return e}({},z)),j(),Ce(""),be(""),se(!1),Ee(null),ae(null),Te(null),$([]),Be([]),T(null),(0,m.showSnackbar)({title:U("success","Success!"),kind:"success",isLowContrast:!0,subtitle:U("questionUpdated","Question updated")}),I(!1)}catch(e){t=e,(null!=(n=Error)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)&&(0,m.showSnackbar)({title:U("errorUpdatingQuestion","Error updating question"),kind:"error",subtitle:null==e?void 0:e.message})}}(N)}},o().createElement("span",null,U("save","Save"))))))};var Rt=n(69160),Gt=n(95977),Zt=n(81201),Ht={};Ht.styleTagTransform=H(),Ht.setAttributes=U(),Ht.insert=L().bind(null,"head"),Ht.domAPI=j(),Ht.insertStyleElement=G(),N()(Zt.Z,Ht);const Qt=Zt.Z&&Zt.Z.locals?Zt.Z.locals:void 0;function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Yt(e,t,n[t])}))}return e}function Wt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const Kt=function(e){var t,n,a=e.id,i=e.handleCancel,c=e.handleSave,u=e.value,d=(0,l.useTranslation)().t,m=(t=(0,r.useState)(u),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),A=m[0],_=m[1];return o().createElement(o().Fragment,null,o().createElement(s.oil,{id:a,labelText:"",value:A,onChange:function(e){return _(e.target.value)}}),o().createElement("div",{className:Qt.actionButtons},o().createElement(s.zxk,{size:"md",renderIcon:function(e){return o().createElement(Rt.vc,Wt(Jt({},e),{size:16}))},kind:"primary",onClick:function(){return c(A)}},d("saveButtonText","Save")),o().createElement(s.zxk,{size:"md",renderIcon:function(e){return o().createElement(Gt.x8,Wt(Jt({},e),{size:16}))},kind:"secondary",onClick:i},d("cancelButtonText","Cancel"))))};var Xt=n(83531),$t={};$t.styleTagTransform=H(),$t.setAttributes=U(),$t.insert=L().bind(null,"head"),$t.domAPI=j(),$t.insertStyleElement=G(),N()(Xt.Z,$t);const en=Xt.Z&&Xt.Z.locals?Xt.Z.locals:void 0;function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const rn=function(e){var t,n,a=e.elementType,i=e.id,u=e.value,d=e.onSave,m=(0,l.useTranslation)().t,A=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tn(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),_=A[0],f=A[1],p=function(){f(!1)};return _?o().createElement(Kt,{handleCancel:p,handleSave:function(e){d(e),p()},id:i,value:u}):o().createElement(o().Fragment,null,o().createElement("h1",{className:en["".concat(a)+"Label"]},u),o().createElement(s.zxk,{kind:"ghost",size:"sm",enterDelayMs:300,iconDescription:m("editButton","Edit {{elementType}}",{elementType:a}),onClick:function(){return f(!0)},renderIcon:function(e){return o().createElement(c.I8,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){nn(e,t,n[t])}))}return e}({size:16},e))},hasIconOnly:!0}))};function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function an(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return on(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?on(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const sn=function(e){var t=e.schema,n=e.onSchemaChange,a=e.showModal,i=e.onModalChange,c=(0,l.useTranslation)().t,u=ln((0,r.useState)(""),2),d=u[0],A=u[1],_=ln((0,r.useState)(""),2),f=_[0],p=_[1];return o().createElement(s.lpG,{open:a,onClose:function(){return i(!1)},preventCloseOnClickOutside:!0},o().createElement(s.xBx,{title:c("createNewForm","Create a new form")}),o().createElement(s.l09,{onSubmit:function(e){return e.preventDefault()}},o().createElement(s.fef,null,o().createElement(s.Kqy,{gap:5},o().createElement(s.cwH,{legendText:""},o().createElement(s.oil,{id:"formName",labelText:c("formName","Form Name"),placeholder:c("namePlaceholder","What the form is called in the system"),value:d,onChange:function(e){return A(e.target.value)}})),o().createElement(s.cwH,{legendText:""},o().createElement(s.oil,{id:"formDescription",labelText:c("formDescription","Form description"),placeholder:c("formDescriptionPlaceholder","A short description of the form e.g. A form for collecting COVID-19 symptoms"),value:f,onChange:function(e){return p(e.target.value)}}))))),o().createElement(s.mzw,null,o().createElement(s.zxk,{kind:"secondary",onClick:function(){return i(!1)}},c("cancel","Cancel")),o().createElement(s.zxk,{disabled:!d,onClick:function(){d&&(function(e){try{var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){an(e,t,n[t])}))}return e}({},t,e);n(r),(0,m.showSnackbar)({title:c("success","Success!"),kind:"success",isLowContrast:!0,subtitle:c("formCreated","New form created")})}catch(e){o=e,(null!=(a=Error)&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](o):o instanceof a)&&(0,m.showSnackbar)({title:c("errorCreatingForm","Error creating form"),kind:"error",subtitle:null==e?void 0:e.message})}var o,a}({name:d,description:f}),i(!1))}},o().createElement("span",null,c("createForm","Create Form")))))};function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const dn=function(e){var t,n,a=e.schema,i=e.onSchemaChange,c=e.showModal,u=e.onModalChange,d=(0,l.useTranslation)().t,A=(t=(0,r.useState)(""),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),_=A[0],f=A[1];return o().createElement(s.lpG,{open:c,onClose:function(){return u(!1)},preventCloseOnClickOutside:!0},o().createElement(s.xBx,{title:d("createNewPage","Create a new page")}),o().createElement(s.l09,{onSubmit:function(e){return e.preventDefault()}},o().createElement(s.fef,null,o().createElement(s.cwH,{legendText:""},o().createElement(s.oil,{id:"pageTitle",labelText:d("enterPageTitle","Enter a title for your new page"),value:_,onChange:function(e){return f(e.target.value)}})))),o().createElement(s.mzw,null,o().createElement(s.zxk,{onClick:function(){return u(!1)},kind:"secondary"},d("cancel","Cancel")),o().createElement(s.zxk,{disabled:!_,onClick:function(){(function(){try{_&&(a.pages.push({label:_,sections:[]}),i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){un(e,t,n[t])}))}return e}({},a)),f("")),(0,m.showSnackbar)({title:d("success","Success!"),kind:"success",isLowContrast:!0,subtitle:d("pageCreated","New page created")})}catch(n){e=n,(null!=(t=Error)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t)&&(0,m.showSnackbar)({title:d("errorCreatingPage","Error creating page"),kind:"error",subtitle:null==n?void 0:n.message})}var e,t})(),u(!1)}},o().createElement("span",null,d("save","Save")))))};function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _n=function(e){var t,n,a=e.schema,i=e.onSchemaChange,c=e.pageIndex,u=e.resetIndices,d=e.showModal,A=e.onModalChange,_=(0,l.useTranslation)().t,f=(t=(0,r.useState)(""),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mn(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],b=f[1];return o().createElement(s.lpG,{open:d,onClose:function(){return A(!1)},preventCloseOnClickOutside:!0},o().createElement(s.xBx,{title:_("createNewSection","Create a new section")}),o().createElement(s.l09,{onSubmit:function(e){return e.preventDefault()}},o().createElement(s.fef,null,o().createElement(s.cwH,{legendText:""},o().createElement(s.oil,{id:"sectionTitle",labelText:_("enterSectionTitle","Enter a section title"),value:p,onChange:function(e){return b(e.target.value)}})))),o().createElement(s.mzw,null,o().createElement(s.zxk,{onClick:function(){return A(!1)},kind:"secondary"},_("cancel","Cancel")),o().createElement(s.zxk,{disabled:!p,onClick:function(){(function(){try{var e,t;null===(t=a.pages[c])||void 0===t||null===(e=t.sections)||void 0===e||e.push({label:p,isExpanded:"true",questions:[]}),i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){An(e,t,n[t])}))}return e}({},a)),b(""),u(),(0,m.showSnackbar)({title:_("success","Success!"),kind:"success",isLowContrast:!0,subtitle:_("sectionCreated","New section created")})}catch(e){n=e,(null!=(r=Error)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r)&&(0,m.showSnackbar)({title:_("errorCreatingSection","Error creating section"),kind:"error",subtitle:null==e?void 0:e.message})}var n,r})(),A(!1)}},o().createElement("span",null,_("save","Save")))))};var fn=n(24285),pn=n(16003),bn={};bn.styleTagTransform=H(),bn.setAttributes=U(),bn.insert=L().bind(null,"head"),bn.domAPI=j(),bn.insertStyleElement=G(),N()(pn.Z,bn);const hn=pn.Z&&pn.Z.locals?pn.Z.locals:void 0;function gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){gn(e,t,n[t])}))}return e}var yn=function(e){var t=e.question,n=e.pageIndex,r=e.sectionIndex,a=e.questionIndex,i=e.handleDuplicateQuestion,d=e.handleDeleteButtonClick,m=e.handleEditButtonClick,A=e.questionCount,_=(0,l.useTranslation)().t,f="question-".concat(n,"-").concat(r,"-").concat(a),p=(0,ht.O1)({id:f,disabled:A<=1}),b=p.attributes,h=p.listeners,g=p.transform,C=p.isDragging,y=p.setNodeRef,v={transform:fn.ux.Translate.toString(g)},E=C?hn.isDragged:hn.normal;return o().createElement("div",{className:E,style:v},o().createElement("div",{className:hn.iconAndName},o().createElement("div",Cn({ref:y},b,h),o().createElement(s.zxk,{className:hn.dragIcon,enterDelayMs:300,hasIconOnly:!0,iconDescription:_("reorderQuestion","Reorder question"),kind:"ghost",renderIcon:function(e){return o().createElement(c._l,Cn({size:16},e))},size:"md"})),o().createElement("p",{className:hn.questionLabel},t.label)),o().createElement("div",{className:hn.buttonsContainer},o().createElement(s.qi1,{align:"top",className:"cds--btn--sm",feedback:_("duplicated","Duplicated")+"!",iconDescription:_("duplicateQuestion","Duplicate question"),kind:"ghost",onClick:function(){return!C&&i(t,n,r)}}),o().createElement(s.zxk,{enterDelayMs:300,hasIconOnly:!0,iconDescription:_("editQuestion","Edit question"),kind:"ghost",onClick:function(){C||m(t)},renderIcon:function(e){return o().createElement(c.I8,Cn({size:16},e))},size:"md"}),o().createElement(s.zxk,{enterDelayMs:300,hasIconOnly:!0,iconDescription:_("deleteQuestion","Delete question"),kind:"ghost",onClick:d,renderIcon:function(e){return o().createElement(u.ZN,Cn({size:16},e))},size:"md"})))};function vn(e){var t=e.id,n=e.children,r=(0,ht.Zj)({id:t}),a=r.isOver,i=r.setNodeRef,l={border:"1px solid ".concat(a?"#005d5d":"transparent")};return o().createElement("div",{ref:i,style:l},n)}var En=n(28787),wn={};wn.styleTagTransform=H(),wn.setAttributes=U(),wn.insert=L().bind(null,"head"),wn.domAPI=j(),wn.insertStyleElement=G(),N()(En.Z,wn);const kn=En.Z&&En.Z.locals?En.Z.locals:void 0;function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dn(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xn(e,t,n[t])}))}return e}function On(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function In(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||Tn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tn(e,t){if(e){if("string"==typeof e)return Sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sn(e,t):void 0}}const qn=function(e){var t,n=e.isLoading,a=e.onSchemaChange,c=e.schema,A=e.validationResponse,_=(0,ht.VT)(ht.MA,{activationConstraint:{distance:10}}),f=(0,ht.VT)(ht.Lg),p=(0,ht.Dy)(_,f),b=(0,l.useTranslation)().t,h=(0,i.UO)().formUuid,g=Boolean(h),C=In((0,r.useState)(0),2),y=C[0],v=C[1],E=In((0,r.useState)(0),2),w=E[0],k=E[1],S=In((0,r.useState)(),2),x=S[0],D=S[1],B=In((0,r.useState)(0),2),O=B[0],I=B[1],T=In((0,r.useState)(!1),2),q=T[0],F=T[1],N=In((0,r.useState)(!1),2),P=N[0],j=N[1],z=In((0,r.useState)(!1),2),L=z[0],M=z[1],U=In((0,r.useState)(!1),2),R=U[0],G=U[1],Z=In((0,r.useState)(!1),2),H=Z[0],Q=Z[1],V=In((0,r.useState)(!1),2),Y=V[0],J=V[1],W=In((0,r.useState)(!1),2),K=W[0],X=W[1],$=In((0,r.useState)(!1),2),ee=$[0],te=$[1],ne=(0,r.useCallback)((function(){c||a(Bn({},{name:"",pages:[],processor:"EncounterFormProcessor",encounterType:"",referencedForms:[],uuid:""}))}),[a,c]),re=function(){v(0),I(0),k(0)},oe=(0,r.useCallback)((function(e){try{e&&(c.name=e),a(Bn({},c)),(0,m.showSnackbar)({title:b("success","Success!"),kind:"success",isLowContrast:!0,subtitle:b("formRenamed","Form renamed")})}catch(e){(0,m.showSnackbar)({title:b("errorRenamingForm","Error renaming form"),kind:"error",subtitle:null==e?void 0:e.message})}}),[a,c,b]),ae=(0,r.useCallback)((function(e,t){try{e&&(c.pages[t].label=e),a(Bn({},c)),(0,m.showSnackbar)({title:b("success","Success!"),kind:"success",isLowContrast:!0,subtitle:b("pageRenamed","Page renamed")})}catch(e){Dn(e,Error)&&(0,m.showSnackbar)({title:b("errorRenamingPage","Error renaming page"),kind:"error",subtitle:null==e?void 0:e.message})}}),[a,c,b]),ie=(0,r.useCallback)((function(e,t,n){try{e&&(c.pages[t].sections[n].label=e),a(Bn({},c)),re(),(0,m.showSnackbar)({title:b("success","Success!"),kind:"success",isLowContrast:!0,subtitle:b("sectionRenamed","Section renamed")})}catch(e){Dn(e,Error)&&(0,m.showSnackbar)({title:b("errorRenamingSection","Error renaming section"),kind:"error",subtitle:null==e?void 0:e.message})}}),[a,c,b]),le=(0,r.useCallback)((function(e,t,n){try{var r=JSON.parse(JSON.stringify(e));r.id=r.id+"Duplicate",c.pages[t].sections[n].questions.push(r),a(Bn({},c)),re(),(0,m.showSnackbar)({title:b("success","Success!"),kind:"success",isLowContrast:!0,subtitle:b("questionDuplicated","Question duplicated. Please change the duplicated question's ID to a unique, camelcased value")})}catch(e){Dn(e,Error)&&(0,m.showSnackbar)({title:b("errorDuplicatingQuestion","Error duplicating question"),kind:"error",subtitle:null==e?void 0:e.message})}}),[a,c,b]),se=function(e){X(!0),v(y),I(O),k(w),D(e)},ce=function(){v(y),I(O),k(w),Q(!0)},ue=function(e){var t=(null==e?void 0:e.map((function(e){return e.label})))||[];return A.filter((function(e){return null==t?void 0:t.includes(e.field.label)}))||[]},de=function(e){var t=A.find((function(t){return t.field.label===e.label&&t.field.id===e.id&&t.field.type===e.type}));return(null==t?void 0:t.errorMessage)||""};return o().createElement("div",{className:kn.container},n?o().createElement(s.lSo,{description:b("loadingSchema","Loading schema")+"..."}):null,ee?o().createElement(sn,{schema:c,onSchemaChange:a,showModal:ee,onModalChange:te}):null,q?o().createElement(dn,{schema:c,onSchemaChange:a,showModal:q,onModalChange:F}):null,L?o().createElement(_n,{schema:c,onSchemaChange:a,pageIndex:y,resetIndices:re,showModal:L,onModalChange:M}):null,P?o().createElement(Ot,{onModalChange:j,onQuestionEdit:D,onSchemaChange:a,pageIndex:y,sectionIndex:O,questionIndex:w,resetIndices:re,schema:c,showModal:P}):null,K?o().createElement(Ut,{onModalChange:X,onQuestionEdit:D,onSchemaChange:a,pageIndex:y,questionIndex:w,questionToEdit:x,resetIndices:re,schema:c,sectionIndex:O,showModal:K}):null,R?o().createElement(Ft,{onModalChange:G,onSchemaChange:a,resetIndices:re,pageIndex:y,schema:c,showModal:R}):null,Y?o().createElement(Tt,{onModalChange:J,onSchemaChange:a,resetIndices:re,pageIndex:y,sectionIndex:O,schema:c,showModal:Y}):null,H?o().createElement(Pt,{onModalChange:Q,onSchemaChange:a,resetIndices:re,pageIndex:y,sectionIndex:O,questionIndex:w,schema:c,showModal:H}):null,(null==c?void 0:c.name)&&o().createElement(o().Fragment,null,o().createElement("div",{className:kn.header},o().createElement("div",{className:kn.explainer},o().createElement("p",null,b("welcomeHeading","Welcome to the Interactive Schema builder")),o().createElement("p",null,b("welcomeExplainer","Add pages, sections and questions to your form. The Preview tab automatically updates as you build your form. For a detailed explanation of what constitutes an OpenMRS form schema, please read through the ")," ",o().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ohri-docs.globalhealthapp.net/"},b("formBuilderDocs","form builder documentation"),"."))),o().createElement(s.zxk,{kind:"ghost",renderIcon:d.mm,onClick:function(){F(!0)},iconDescription:b("addPage","Add Page")},b("addPage","Add Page"))),o().createElement("div",{className:kn.editorContainer},o().createElement(rn,{elementType:"schema",id:"formNameInput",value:null==c?void 0:c.name,onSave:function(e){return oe(e)}}))),!g&&!(null==c?void 0:c.name)&&o().createElement("div",{className:kn.header},o().createElement("p",{className:kn.explainer},b("interactiveBuilderHelperText","The Interactive Builder lets you build your form schema without writing JSON code. The Preview tab automatically updates as you build your form. When done, click Save Form to save your form.")),o().createElement(s.zxk,{onClick:function(){ne(),te(!0)},className:kn.startButton,kind:"ghost"},b("startBuilding","Start building"))),o().createElement(ht.LB,{onDragEnd:function(e){return function(e){var t=e.active,n=e.delta;if(t){var r=t.id.toString().split("-"),o=parseInt(r[1]),i=parseInt(r[2]),l=parseInt(r[3]),s=c.pages[o].sections[i].questions,u=s[l];s.splice(l,1),s.splice(l+n.y,0,u);var d=On(Bn({},c),{pages:c.pages.map((function(e,t){return t===o?On(Bn({},e),{sections:e.sections.map((function(e,t){return t===i?On(Bn({},e),{questions:(n=s,function(e){if(Array.isArray(e))return Sn(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||Tn(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}):e;var n}))}):e}))});a(d)}}(e)},sensors:p},(null==c||null===(t=c.pages)||void 0===t?void 0:t.length)?c.pages.map((function(e,t){var n,r,a;return o().createElement("div",{className:kn.editableFieldsContainer},o().createElement("div",{style:{display:"flex",alignItems:"center"}},o().createElement("div",{className:kn.editorContainer},o().createElement(rn,{elementType:"page",id:"pageNameInput",value:c.pages[t].label,onSave:function(e){return ae(e,t)}})),o().createElement(s.zxk,{hasIconOnly:!0,enterDelayMs:300,iconDescription:b("deletePage","Delete page"),kind:"ghost",onClick:function(){v(t),G(!0)},renderIcon:function(e){return o().createElement(u.ZN,Bn({size:16},e))},size:"sm"})),o().createElement("div",null,(null==e||null===(n=e.sections)||void 0===n?void 0:n.length)?o().createElement("p",{className:kn.sectionExplainer},b("expandSectionExplainer","Below are the sections linked to this page. Expand each section to add questions to it.")):null,(null==e||null===(r=e.sections)||void 0===r?void 0:r.length)?null===(a=e.sections)||void 0===a?void 0:a.map((function(e,n){var r;return o().createElement(s.UQy,null,o().createElement(s.Qdk,{title:e.label},o().createElement(o().Fragment,null,o().createElement("div",{style:{display:"flex",alignItems:"center"}},o().createElement("div",{className:kn.editorContainer},o().createElement(rn,{elementType:"section",id:"sectionNameInput",value:e.label,onSave:function(e){return ie(e,t,n)}})),o().createElement(s.zxk,{hasIconOnly:!0,enterDelayMs:300,iconDescription:b("deleteSection","Delete section"),kind:"ghost",onClick:function(){v(t),I(n),J(!0)},renderIcon:function(e){return o().createElement(u.ZN,Bn({size:16},e))},size:"sm"})),o().createElement("div",null,(null===(r=e.questions)||void 0===r?void 0:r.length)?e.questions.map((function(r,a){var i,l;return o().createElement(vn,{id:"droppable-question-".concat(t,"-").concat(n,"-").concat(a)},o().createElement(yn,{key:r.id,question:r,pageIndex:t,sectionIndex:n,questionIndex:a,handleDuplicateQuestion:le,handleEditButtonClick:se,handleDeleteButtonClick:ce,questionCount:e.questions.length}),de(r)&&o().createElement("div",{className:kn.validationErrorMessage},de(r)),(null===(i=ue(r.questionOptions.answers))||void 0===i?void 0:i.length)?o().createElement("div",{className:kn.answerErrors},o().createElement("div",null,"Answer Errors"),null===(l=ue(r.questionOptions.answers))||void 0===l?void 0:l.map((function(e){return o().createElement("div",{className:kn.validationErrorMessage},"".concat(e.field.label,": ").concat(e.errorMessage))}))):null)})):o().createElement("p",{className:kn.explainer},b("sectionExplainer","A section will typically contain one or more questions. Click the button below to add a question to this section.")),o().createElement(s.zxk,{className:kn.addQuestionButton,kind:"ghost",renderIcon:d.mm,onClick:function(){j(!0),k(w),v(t),I(n)},iconDescription:b("addQuestion","Add Question")},b("addQuestion","Add Question"))))))})):o().createElement("p",{className:kn.explainer},b("pageExplainer","Pages typically have one or more sections. Click the button below to add a section to your page."))),o().createElement(s.zxk,{className:kn.addSectionButton,kind:"ghost",renderIcon:d.mm,onClick:function(){M(!0),v(t)},iconDescription:b("addSection","Add Section")},b("addSection","Add Section")))})):null))};var Fn=n(74981),Nn=(n(66245),n(82679)),Pn=n(1581),jn=n.n(Pn),zn=n(57656),Ln=n(14858),Mn={};Mn.styleTagTransform=H(),Mn.setAttributes=U(),Mn.insert=L().bind(null,"head"),Mn.domAPI=j(),Mn.insertStyleElement=G(),N()(Ln.Z,Mn);const Un=Ln.Z&&Ln.Z.locals?Ln.Z.locals:void 0;function Rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Zn=function(e){var t,n,a,i,c=e.onSchemaChange,u=e.stringifiedSchema,d=e.setErrors,A=e.errors,_=e.validationOn,f=e.setValidationOn,p=(n=(t=(0,W.Z)("https://json.openmrs.org/form.schema.json",m.openmrsFetch)).data,a=t.error,i=t.isLoading,{schema:null==n?void 0:n.data,schemaProperties:null==n?void 0:n.data.properties,error:a,isLoading:i}),b=p.schema,h=p.schemaProperties,g=(0,l.useTranslation)().t,C=Gn((0,r.useState)([]),2),y=C[0],v=C[1],E=Gn((0,r.useState)(0),2),w=E[0],k=E[1],S=(0,r.useCallback)((function(){var e=[],t=function(n,r){n&&n&&"object"==typeof n&&Object.entries(n).forEach((function(n){var o=Gn(n,2),a=o[0],i=o[1];if("$schema"!==a){var l=r?"".concat(r,".").concat(a):a,s=i;if("object"==typeof i)if("array"===s.type&&s.items&&s.items.properties)t(s.items.properties,l);else if(s.properties)t(s.properties,l);else if(s.oneOf){var c,u=null==s||null===(c=s.oneOf)||void 0===c?void 0:c.map((function(e){return e.type})).join(" | ");e.push({name:a,type:u||"any",path:l})}e.push({name:a,type:s.type||"any",path:l})}}))};return t(h,""),e}),[h]);(0,r.useEffect)((function(){var e=S();v(e.flat())}),[h,S]),(0,r.useEffect)((function(){(0,Nn.addCompleter)({getCompletions:function(e,t,n,r,o){o(null,y.map((function(e){return{caption:e.name,value:e.name,meta:e.type,docText:"Path: ".concat(e.path)}})))}})}),[y]);var x=(0,jt.Z)((function(e,t){try{if("{}"===e.replace(/\s/g,"").trim())return void d([]);var n=new(jn())({allErrors:!0,jsPropertySyntax:!0,strict:!1}).compile(t),r=n(JSON.parse(e)),o=e.split("\n");if(r)d([]);else{var a=n.errors.map((function(e){var t=function(e){var t=e.split("/").filter((function(e){return""!==e||"type"!==e})),n=-1,r=!0,a=!1,i=void 0;try{for(var l,s=function(){var e=l.value;if("properties"===e||"items"===e)return"continue";if(e.match(/^([^[\]]+)/)){var r=t[t.length-2];n=o.findIndex((function(e){return e.includes(r)}))}return-1!==n?"break":void 0},c=t[Symbol.iterator]();!(r=(l=c.next()).done)&&"break"!==s();r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e.schemaPath.replace(/^#\//,"")),n=e.instancePath.split("."),r=n[n.length-1];return{startRow:t,startCol:0,endRow:t,endCol:1,className:"error",text:"type"===e.keyword?"".concat(r.charAt(0).toUpperCase()+r.slice(1)," ").concat(e.message):"".concat(e.message.charAt(0).toUpperCase()+e.message.slice(1)),type:"text"}}));d(a)}}catch(e){console.error("Error parsing or validating JSON:",e)}}),300),D=function(e){var t=e.text,n=e.line;return o().createElement(s.FQz,{subtitle:t,inline:!0,title:g("errorOnLine","Error on line")+" ".concat(n+1,": "),kind:"error",lowContrast:!0,actionButtonLabel:o().createElement(s.rUS,{target:"_blank",rel:"noopener noreferrer",href:"https://json.openmrs.org/form.schema.json"},g("referenceSchema","Reference schema"))})},B=function(){k((function(e){return Math.max(e-1,0)}))},O=function(){k((function(e){return Math.min(e+1,A.length-1)}))},I=function(){var e,t;return A.length>0&&o().createElement("div",{className:Un.validationErrorsContainer},o().createElement(D,{text:null===(e=A[w])||void 0===e?void 0:e.text,line:null===(t=A[w])||void 0===t?void 0:t.startRow}),o().createElement("div",{className:Un.pagination},o().createElement(zn.s$,{disabled:0===w,onClick:B,className:0===w?Un.disabledIcon:Un.paginationIcon}),o().createElement("div",null,w+1,"/",A.length),o().createElement(zn._Q,{disabled:w===A.length-1,onClick:O,className:w===A.length-1?Un.disabledIcon:Un.paginationIcon})))};return o().createElement("div",null,A.length&&_?o().createElement(I,null):null,o().createElement(Fn.ZP,{style:{height:"100vh",width:"100%",border:A.length?"3px solid #DA1E28":"none"},mode:"json",theme:"textmate",name:"schemaEditor",onChange:function(e){f(!1),k(0),c(e),x(e,b)},fontSize:15,showPrintMargin:!1,showGutter:!0,highlightActiveLine:!0,value:u,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,displayIndentGuides:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2},markers:A}))};var Hn=function(e){var t=e.hasValidationErrors,n=e.publishedWithErrors,r=e.errorsCount,a=(0,l.useTranslation)().t;return n?o().createElement(s.K0D,{kind:"error",title:a("publishingFailed","Publishing failed"),lowContrast:!0,subtitle:a("publishWarning","Cannot publish form with validation errors")}):t?o().createElement(s.K0D,{kind:"error",title:a("validationErrors","Validation found {{count}} errors",{count:r}),lowContrast:!0,subtitle:a("viewErrors","View the errors in the interactive builder")}):o().createElement(s.K0D,{kind:"success",title:a("ValidationSuccessful","Validation Successful"),lowContrast:!0,subtitle:a("noValidationErrorsFound","No validation errors found")})},Qn=n(34553),Vn={};Vn.styleTagTransform=H(),Vn.setAttributes=U(),Vn.insert=L().bind(null,"head"),Vn.domAPI=j(),Vn.insertStyleElement=G(),N()(Qn.Z,Vn);const Yn=Qn.Z&&Qn.Z.locals?Qn.Z.locals:void 0;function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wn(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function Kn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Wn(a,r,o,i,l,"next",e)}function l(e){Wn(a,r,o,i,l,"throw",e)}i(void 0)}))}}function Xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $n(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Xn(e,t,n[t])}))}return e}function tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var rr=function(e){var t=e.error,n=e.title;return o().createElement(s.K0D,{className:Yn.errorNotification,kind:"error",lowContrast:!0,subtitle:null==t?void 0:t.message,title:n})};function or(){var e=(0,l.useTranslation)().t;return o().createElement("div",{className:Yn.backButton},o().createElement(m.ConfigurableLink,{to:window.getOpenmrsSpaBase()+"form-builder"},o().createElement(s.zxk,{kind:"ghost",renderIcon:function(e){return o().createElement(d.Xd,er({size:24},e))},iconDescription:"Return to dashboard"},o().createElement("span",null,e("backToDashboard","Back to dashboard")))))}const ar=function(){var e=(0,l.useTranslation)().t,t=(0,i.UO)().formUuid,n=(0,m.useConfig)().dataTypeToRenderingMap,a=!t,u=tr((0,r.useState)(),2),d=u[0],A=u[1],_=tr((0,r.useState)(!1),2),f=_[0],p=_[1],b=Oe(t),h=b.form,g=b.formError,C=b.isLoadingForm,y=K(h),v=y.clobdata,E=y.clobdataError,w=y.isLoadingClobdata,k=tr((0,r.useState)("idle"),2),S=k[0],x=k[1],D=tr((0,r.useState)(!1),2),B=D[0],O=D[1],I=tr((0,r.useState)(d?JSON.stringify(d,null,2):""),2),T=I[0],q=I[1],F=tr((0,r.useState)([]),2),N=F[0],P=F[1],j=tr((0,r.useState)(!1),2),z=j[0],L=j[1],M=tr((0,r.useState)(!1),2),U=M[0],R=M[1],G=tr((0,r.useState)(!1),2),Z=G[0],H=G[1],Q=tr((0,r.useState)([]),2),V=Q[0],Y=Q[1],J=tr((0,r.useState)(!1),2),W=J[0],X=J[1],$=Boolean(t)&&(w||C);(0,r.useEffect)((function(){t&&(h&&Object.keys(h).length>0&&x("formLoaded"),"formLoaded"!==S||w||void 0!==v||p(!0),v&&Object.keys(v).length>0&&(x("schemaLoaded"),A(v),localStorage.setItem("formJSON",JSON.stringify(v))))}),[v,h,t,w,$,S]),(0,r.useEffect)((function(){q(JSON.stringify(d,null,2))}),[d]);var ee=(0,r.useCallback)((function(){p(!1);try{var e=localStorage.getItem("formJSON");e&&A(JSON.parse(e))}catch(e){console.error("Error fetching draft schema from localStorage: ",null==e?void 0:e.message)}}),[]),te=(0,r.useCallback)((function(e){q(e)}),[]),ne=(0,r.useCallback)((function(e){A(e),localStorage.setItem("formJSON",JSON.stringify(e))}),[]),re=function(){var e=Kn((function(){var e,t,r;return nr(this,(function(o){switch(o.label){case 0:L(!0),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,Je(d,n)];case 2:return e=tr.apply(void 0,[o.sent(),1]),t=e[0],P(t),R(!0),[3,5];case 3:return r=o.sent(),console.error("Error during form validation:",r),[3,5];case 4:return L(!1),[7];case 5:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),oe=(0,r.useCallback)((function(){var e={encounterType:"",name:"Sample Form",processor:"EncounterFormProcessor",referencedForms:[],uuid:"",version:"1.0",pages:[{label:"First Page",sections:[{label:"A Section",isExpanded:"true",questions:[{id:"sampleQuestion",label:"A Question of type obs that renders a text input",type:"obs",questionOptions:{rendering:"text",concept:"a-system-defined-concept-uuid"}}]},{label:"Another Section",isExpanded:"true",questions:[{id:"anotherSampleQuestion",label:"Another Question of type obs whose answers get rendered as radio inputs",type:"obs",questionOptions:{rendering:"radio",concept:"system-defined-concept-uuid",answers:[{concept:"another-system-defined-concept-uuid",label:"Choice 1",conceptMappings:[]},{concept:"yet-another-system-defined-concept-uuid",label:"Choice 2",conceptMappings:[]},{concept:"yet-one-more-system-defined-concept-uuid",label:"Choice 3",conceptMappings:[]}]}}]}]}]};q(JSON.stringify(e,null,2)),ne(er({},e))}),[ne]),ae=tr((0,r.useState)(""),2),ie=ae[0],se=ae[1],ce=(0,r.useCallback)((function(){se("")}),[]),ue=(0,r.useCallback)((function(){if(ce(),V.length)X(!0);else try{var e=JSON.parse(T);ne(e),q(JSON.stringify(e,null,2))}catch(e){$n(e,Error)&&se(e.message)}}),[T,ne,ce,V.length]),de=function(){return o().createElement(s.lpG,{open:f,onClose:function(){return p(!1)},preventCloseOnClickOutside:!0},o().createElement(s.xBx,{title:e("schemaNotFound","Schema not found")}),o().createElement(s.l09,{onSubmit:function(e){return e.preventDefault()}},o().createElement(s.fef,null,o().createElement("p",null,e("schemaNotFoundText","The schema originally associated with this form could not be found. A draft schema was found saved in your browser's local storage. Would you like to load it instead?")))),o().createElement(s.mzw,null,o().createElement(s.zxk,{onClick:function(){return p(!1)},kind:"secondary"},e("cancel","Cancel")),o().createElement(s.zxk,{onClick:ee},o().createElement("span",null,e("loadDraft","Load draft")))))},me=(0,r.useMemo)((function(){return new Blob([JSON.stringify(d,null,2)],{type:"application/json"})}),[d]),_e=(0,r.useCallback)(Kn((function(){return nr(this,(function(e){switch(e.label){case 0:return[4,navigator.clipboard.writeText(T)];case 1:return e.sent(),[2]}}))})),[T]),fe=B?16:8;return o().createElement(o().Fragment,null,o().createElement(Ae,{title:e("schemaEditor","Schema editor")}),o().createElement(or,null),o().createElement("div",{className:Yn.container},f&&o().createElement(de,null),o().createElement(s.rjZ,{className:De()(Yn.grid,Xn({},Yn.maximized,B))},o().createElement(s.sgG,{lg:fe,md:fe,className:Yn.column},o().createElement("div",{className:Yn.actionButtons},$?o().createElement(s.lSo,{description:e("loadingSchema","Loading schema")+"..."}):o().createElement("h1",{className:Yn.formName},null==h?void 0:h.name)),o().createElement("div",null,o().createElement("div",{className:Yn.heading},o().createElement("span",{className:Yn.tabHeading},e("schemaEditor","Schema editor")),o().createElement("div",{className:Yn.topBtns},d?null:o().createElement(s.bAu,{onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onload=function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.result;if("string"==typeof n){var r=n,o=JSON.parse(r);A(o)}else if($n(n,ArrayBuffer)){var a=(new TextDecoder).decode(n),i=JSON.parse(a);A(i)}},n.readAsText(t)},labelTitle:"",labelDescription:"",buttonLabel:e("importSchema","Import schema"),buttonKind:"ghost",size:"lg",filenameStatus:"edit",accept:[".json"],multiple:!1,disabled:!1,iconDescription:e("importSchema","Import schema"),name:"form-import"}),a&&!d?o().createElement(s.zxk,{kind:"ghost",onClick:oe},e("inputDummySchema","Input dummy schema")):null,o().createElement(s.zxk,{kind:"ghost",onClick:ue,disabled:ie},o().createElement("span",null,e("renderChanges","Render changes")))),d?o().createElement(o().Fragment,null,o().createElement(s.zxk,{enterDelayMs:300,renderIcon:B?Be.gR:le.Yq,kind:"ghost",iconDescription:B?e("minimizeEditor","Minimize editor"):e("maximizeEditor","Maximize editor"),hasIconOnly:!0,size:"md",tooltipAlignment:"start",onClick:function(){O(!B)}}),o().createElement(s.qi1,{align:"top",className:"cds--btn--md",enterDelayMs:300,iconDescription:e("copySchema","Copy schema"),kind:"ghost",onClick:_e}),o().createElement("a",{download:"".concat(null==h?void 0:h.name,".json"),href:window.URL.createObjectURL(me)},o().createElement(s.zxk,{enterDelayMs:300,renderIcon:c.UW,kind:"ghost",iconDescription:e("downloadSchema","Download schema"),hasIconOnly:!0,size:"md",tooltipAlignment:"start"}))):null),g?o().createElement(rr,{error:g,title:e("formError","Error loading form metadata")}):null,E?o().createElement(rr,{error:E,title:e("schemaLoadError","Error loading schema")}):null,o().createElement("div",{className:Yn.editorContainer},o().createElement(Zn,{validationOn:W,setValidationOn:X,errors:V,setErrors:Y,isLoading:$,onSchemaChange:te,stringifiedSchema:T})))),o().createElement(s.sgG,{lg:8,md:8,className:Yn.column},o().createElement(st,{schema:d,t:e,setPublishedWithErrors:H,onFormValidation:re,setValidationResponse:P,setValidationComplete:R,isValidating:z}),U&&o().createElement(Hn,{hasValidationErrors:N.length>0,publishedWithErrors:Z,errorsCount:N.length}),o().createElement(s.mQc,null,o().createElement(s.tdY,{"aria-label":"Form previews"},o().createElement(s.OK9,null,e("preview","Preview")),o().createElement(s.OK9,null,e("interactiveBuilder","Interactive Builder")),h&&o().createElement(s.OK9,null,e("auditDetails","Audit Details"))),o().createElement(s.nPR,null,o().createElement(s.x45,null,o().createElement(bt,{schema:d,isLoading:$})),o().createElement(s.x45,null,o().createElement(qn,{schema:d,onSchemaChange:ne,isLoading:$,validationResponse:N})),o().createElement(s.x45,null,h&&o().createElement(ct,{form:h,key:h.uuid}))))))))},ir=function(){return o().createElement(a.VK,{basename:"".concat(window.spaBase,"/form-builder")},o().createElement(i.Z5,null,o().createElement(i.AW,{path:"/",element:o().createElement(Se,null)}),o().createElement(i.AW,{path:"/new",element:o().createElement(ar,null)}),o().createElement(i.AW,{path:"/edit/:formUuid",element:o().createElement(ar,null)})))}}}]);