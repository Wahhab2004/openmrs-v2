"use strict";(globalThis.webpackChunk_openmrs_esm_appointments_app=globalThis.webpackChunk_openmrs_esm_appointments_app||[]).push([[309],{5309:(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var i=n(268),o=n.n(i),s=n(4924),a=n(2870),l=n(5368),p=n(8527),c=n(3291);const r=function(t){var e=t.patientUuid,n=t.appointmentUuid,i=t.closeModal,r=(0,a.useVisit)(e),u=r.activeVisit,d=r.mutate,m=(0,s.useTranslation)().t,h=(0,c.EJ)().mutateAppointments;return o().createElement("div",null,o().createElement(l.xBx,{closeModal:i,title:m("endAppointmentConfirmation","Are you sure you want to check the patient out for this appointment?")}),o().createElement(l.fef,null,o().createElement("p",null,u?m("endAppointmentAndVisitConfirmationMessage","Checking the patient out will mark the appointment as complete, and close out the active visit for this patient."):m("endAppointmentConfirmationMessage","Checking the patient out will mark the appointment as complete."))),o().createElement(l.mzw,null,o().createElement(l.zxk,{kind:"secondary",onClick:i},m("cancel","Cancel")),o().createElement(l.zxk,{kind:"danger",onClick:function(){return(0,p.q)("Completed",n).then((function(){if(h(),u){var t=new AbortController,e={location:u.location.uuid,startDatetime:(0,a.parseDate)(u.startDatetime),visitType:u.visitType.uuid,stopDatetime:new Date};(0,a.updateVisit)(u.uuid,e,t).toPromise().then((function(){d(),(0,a.showSnackbar)({title:m("appointmentEnded","Appointment ended"),subtitle:m("appointmentEndedAndVisitClosedSuccessfully","Appointment successfully ended and visit successfully closed."),isLowContrast:!0,kind:"success"}),i()})).catch((function(t){i(),(0,a.showSnackbar)({title:m("appointmentEndedButVisitNotClosedError","Appointment ended, but error closing visit"),subtitle:null==t?void 0:t.message,kind:"error",isLowContrast:!0})}))}else i(),(0,a.showSnackbar)({title:m("appointmentEnded","Appointment ended"),subtitle:m("appointmentEndedSuccessfully","Appointment successfully ended."),isLowContrast:!0,kind:"success"})})).catch((function(t){i(),(0,a.showSnackbar)({title:m("appointmentEndError","Error ending appointment"),subtitle:null==t?void 0:t.message,kind:"error",isLowContrast:!0})}))}},m("checkOut","Check Out"))))}}}]);