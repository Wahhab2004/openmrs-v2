(globalThis.webpackChunk_openmrs_esm_patient_programs_app=globalThis.webpackChunk_openmrs_esm_patient_programs_app||[]).push([[461],{5351:(e,r,t)=>{"use strict";t.d(r,{Z:()=>i});var n=t(272),a=t.n(n),o=t(2609),l=t.n(o)()(a());l.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79;--bottom-nav-height: 4rem;--workspace-header-height: 3rem;--tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height));--desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height))}.-esm-patient-programs__programs-detailed-summary__widgetCard___R5Btc{border:1px solid #e0e0e0;border-bottom:none}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/programs/programs-detailed-summary.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,+BAAA,CACA,yEAAA,CACA,2GAAA,CCzDF,sEACE,wBAAA,CACA,kBAAA",sourceRoot:""}]),l.locals={widgetCard:"-esm-patient-programs__programs-detailed-summary__widgetCard___R5Btc"};const i=l},6983:(e,r,t)=>{"use strict";t.d(r,{Z:()=>i});var n=t(272),a=t.n(n),o=t(2609),l=t.n(o)()(a());l.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79;--bottom-nav-height: 4rem;--workspace-header-height: 3rem;--tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height));--desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height))}.-esm-patient-programs__programs-overview__widgetCard___yEo1t{border:1px solid #e0e0e0}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/programs/programs-overview.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,+BAAA,CACA,yEAAA,CACA,2GAAA,CCzDF,8DACE,wBAAA",sourceRoot:""}]),l.locals={widgetCard:"-esm-patient-programs__programs-overview__widgetCard___yEo1t"};const i=l},7461:(e,r,t)=>{"use strict";t.r(r),t.d(r,{importTranslation:()=>M,programsDashboardLink:()=>q,programsDetailedSummary:()=>$,programsFormWorkspace:()=>G,programsOverview:()=>V,startupApp:()=>U});var n=t(2870),a=t(2821),o={hideAddProgramButton:{_type:n.Type.Boolean,_default:!1}},l=t(268),i=t.n(l),s=t(2779),c=t.n(s),d=t(4924),u=t(4700),m=t(810),p=t(4076),g=t(321),v=t.n(g),b=t(1195),f=t.n(b),h=t(3275),y=t.n(h),A=t(7162),E=t.n(A),w=t(2094),C=t.n(w),O=t(757),P=t.n(O),k=t(6983),j={};j.styleTagTransform=P(),j.setAttributes=E(),j.insert=y().bind(null,"head"),j.domAPI=f(),j.insertStyleElement=C(),v()(k.Z,j);const _=k.Z&&k.Z.locals?k.Z.locals:void 0;function S(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){S(e,r,t[r])}))}return e}var D=t(5362),T=t(5351),B={};B.styleTagTransform=P(),B.setAttributes=E(),B.insert=y().bind(null,"head"),B.domAPI=f(),B.insertStyleElement=C(),v()(T.Z,B);const L=T.Z&&T.Z.locals?T.Z.locals:void 0;function x(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){x(e,r,t[r])}))}return e}function I(e){var r=e.programEnrollmentId,t="tablet"===(0,n.useLayoutType)(),o=(0,d.useTranslation)().t,l=i().useCallback((function(){return(0,a.launchPatientWorkspace)("programs-form-workspace",{programEnrollmentId:r})}),[r]);return i().createElement(u.zxk,{"aria-label":"edit program",kind:"ghost",renderIcon:function(e){return i().createElement(D.I8,z({size:16},e))},iconDescription:o("editProgram","Edit Program"),onClick:l,hasIconOnly:!0,tooltipPosition:"left",size:t?"lg":"sm"})}function F(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var H="@openmrs/esm-patient-programs-app",N={featureName:"patient-programs",moduleName:H},M=t(3979);function U(){(0,n.defineConfigSchema)(H,o)}var W,R,V=(0,n.getSyncLifecycle)((function(e){e.basePath;var r=e.patientUuid,t=(0,d.useTranslation)().t,o=(0,n.useConfig)(),l=t("programs","Program enrollments"),s=t("carePrograms","Care Programs"),g=t("seeAll","See all"),v="${openmrsSpaBase}/patient/".concat(r,"/chart/Programs"),b=(0,n.useLayoutType)(),f="tablet"===b,h=(0,n.isDesktop)(b),y=(0,p.b$)(r),A=y.activeEnrollments,E=y.availablePrograms,w=y.eligiblePrograms,C=y.enrollments,O=y.isError,P=y.isLoading,k=y.isValidating,j=(0,n.usePagination)(null!=C?C:[],5),S=j.results,D=j.goTo,T=j.currentPage,B=i().useCallback((function(){return(0,a.launchPatientWorkspace)("programs-form-workspace")}),[]),L=[{key:"display",header:t("activePrograms","Active programs")},{key:"location",header:t("location","Location")},{key:"dateEnrolled",header:t("dateEnrolled","Date enrolled")},{key:"status",header:t("status","Status")},{key:"actions",header:t("actions","Actions")}],x=i().useMemo((function(){return null==S?void 0:S.map((function(e){var r,a;return{id:e.uuid,display:e.display,location:null!==(a=null===(r=e.location)||void 0===r?void 0:r.display)&&void 0!==a?a:"--",dateEnrolled:e.dateEnrolled?(0,n.formatDatetime)(new Date(e.dateEnrolled)):"--",status:e.dateCompleted?"".concat(t("completedOn","Completed On")," ").concat((0,n.formatDate)(new Date(e.dateCompleted))):t("active","Active")}}))}),[S,t]);return P?i().createElement(u.gqd,{role:"progressbar",compact:h,zebra:!0}):O?i().createElement(a.ErrorState,{error:O,headerTitle:s}):(null==A?void 0:A.length)?i().createElement("div",{className:_.widgetCard},i().createElement(a.CardHeader,{title:s},i().createElement("span",null,k?i().createElement(u.lSo,null):null),o.hideAddProgramButton?null:i().createElement(u.zxk,{kind:"ghost",renderIcon:function(e){return i().createElement(m.mm,Z({size:16},e))},iconDescription:"Add programs",onClick:B,disabled:(null==E?void 0:E.length)&&0===(null==w?void 0:w.length)},t("add","Add"))),(null==E?void 0:E.length)&&0===(null==w?void 0:w.length)&&i().createElement(u.K0D,{style:{minWidth:"100%",margin:"0rem",padding:"0rem"},kind:"info",lowContrast:!0,subtitle:t("noEligibleEnrollments","There are no more programs left to enroll this patient in"),title:t("fullyEnrolled","Enrolled in all programs")}),i().createElement(u.wQF,{rows:x,headers:L,isSortable:!0,size:f?"lg":"sm",useZebraStyles:!0},(function(e){var r=e.rows,t=e.headers,n=e.getHeaderProps,a=e.getTableProps;return i().createElement(u.xJi,null,i().createElement(u.iA_,Z({"aria-label":"programs overview"},a()),i().createElement(u.ssF,null,i().createElement(u.SCH,null,t.map((function(e){var r,t;return i().createElement(u.xDH,Z({className:c()(_.productiveHeading01,_.text02)},n({header:e,isSortable:e.isSortable})),null!==(t=null===(r=e.header)||void 0===r?void 0:r.content)&&void 0!==t?t:e.header)})))),i().createElement(u.RMI,null,r.map((function(e){return i().createElement(u.SCH,{key:e.id},e.cells.map((function(e){var r,t;return i().createElement(u.pj1,{key:e.id},null!==(t=null===(r=e.value)||void 0===r?void 0:r.content)&&void 0!==t?t:e.value)})))})))))})),i().createElement(a.PatientChartPagination,{currentItems:S.length,onPageNumberChange:function(e){var r=e.page;return D(r)},pageNumber:T,pageSize:5,totalItems:null==C?void 0:C.length,dashboardLinkUrl:v,dashboardLinkLabel:g})):i().createElement(a.EmptyState,{displayText:l,headerTitle:s,launchForm:B})}),N),$=(0,n.getSyncLifecycle)((function(e){var r=e.patientUuid,t=(0,d.useTranslation)().t,o=(0,n.useLayoutType)(),s="tablet"===o,g=(0,n.isDesktop)(o),v=(0,n.useConfig)().hideAddProgramButton,b=t("programEnrollments","Program enrollments"),f=t("carePrograms","Care Programs"),h=(0,p.b$)(r),y=h.enrollments,A=h.isLoading,E=h.isError,w=h.isValidating,C=h.availablePrograms,O=h.eligiblePrograms,P=(0,l.useMemo)((function(){return[{key:"display",header:t("activePrograms","Active programs")},{key:"location",header:t("location","Location")},{key:"dateEnrolled",header:t("dateEnrolled","Date enrolled")},{key:"status",header:t("status","Status")}]}),[t]),k=(0,l.useMemo)((function(){return null==y?void 0:y.map((function(e){var r,a;return{id:e.uuid,display:e.display,location:null!==(a=null===(r=e.location)||void 0===r?void 0:r.display)&&void 0!==a?a:"--",dateEnrolled:(0,n.formatDatetime)(new Date(e.dateEnrolled)),status:e.dateCompleted?"".concat(t("completedOn","Completed On")," ").concat((0,n.formatDate)(new Date(e.dateCompleted))):t("active","Active")}}))}),[y,t]),j=(0,l.useCallback)((function(){return(0,a.launchPatientWorkspace)("programs-form-workspace")}),[]);return A?i().createElement(u.gqd,{role:"progressbar",compact:g,zebra:!0}):E?i().createElement(a.ErrorState,{error:E,headerTitle:f}):(null==y?void 0:y.length)?i().createElement("div",{className:L.widgetCard},i().createElement(a.CardHeader,{title:f},i().createElement("span",null,w?i().createElement(u.lSo,null):null),v?null:i().createElement(u.zxk,{kind:"ghost",renderIcon:function(e){return i().createElement(m.mm,z({size:16},e))},iconDescription:"Add programs",onClick:j,disabled:(null==C?void 0:C.length)&&0===(null==O?void 0:O.length)},t("add","Add"))),(null==C?void 0:C.length)&&0===(null==O?void 0:O.length)?i().createElement(u.K0D,{style:{minWidth:"100%",margin:"0rem",padding:"0rem"},kind:"info",lowContrast:!0,subtitle:t("noEligibleEnrollments","There are no more programs left to enroll this patient in"),title:t("fullyEnrolled","Enrolled in all programs")}):null,i().createElement(u.wQF,{rows:k,headers:P,isSortable:!0,size:s?"lg":"sm",useZebraStyles:!0},(function(e){var r=e.rows,t=e.headers,n=e.getHeaderProps,a=e.getTableProps;return i().createElement(u.xJi,null,i().createElement(u.iA_,z({"aria-label":"program enrollments"},a()),i().createElement(u.ssF,null,i().createElement(u.SCH,null,t.map((function(e){var r,t;return i().createElement(u.xDH,z({className:c()(L.productiveHeading01,L.text02)},n({header:e,isSortable:e.isSortable})),null!==(t=null===(r=e.header)||void 0===r?void 0:r.content)&&void 0!==t?t:e.header)})),i().createElement(u.xDH,null))),i().createElement(u.RMI,null,r.map((function(e,r){var t;return i().createElement(u.SCH,{key:e.id},e.cells.map((function(e){var r,t;return i().createElement(u.pj1,{key:e.id},null!==(t=null===(r=e.value)||void 0===r?void 0:r.content)&&void 0!==t?t:e.value)})),i().createElement(u.pj1,{className:"cds--table-column-menu"},i().createElement(I,{programEnrollmentId:null===(t=y[r])||void 0===t?void 0:t.uuid})))})))))}))):i().createElement(a.EmptyState,{displayText:b,headerTitle:f,launchForm:j})}),N),q=(0,n.getSyncLifecycle)((0,a.createDashboardLink)((W=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){F(e,r,t[r])}))}return e}({},{slot:"patient-chart-programs-dashboard-slot",columns:1,path:"Programs",title:"Programs"}),R=null!=(R={moduleName:H})?R:{},Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(R)):function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(R)).forEach((function(e){Object.defineProperty(W,e,Object.getOwnPropertyDescriptor(R,e))})),W)),N),G=(0,n.getAsyncLifecycle)((function(){return Promise.all([t.e(940),t.e(234)]).then(t.bind(t,234))}),N)},4076:(e,r,t)=>{"use strict";t.d(r,{Bw:()=>u,YX:()=>g,b$:()=>v,df:()=>p,oI:()=>m});var n=t(3255),a=t(2870),o=t(4221),l=t(9626),i=t(4185),s=t(6772);function c(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var d="custom:(uuid,display,program,dateEnrolled,dateCompleted,location:(uuid,display))";function u(e){var r,t="".concat(a.restBaseUrl,"/programenrollment?patient=").concat(e,"&v=").concat(d),l=(0,n.ZP)(e?t:null,a.openmrsFetch),i=l.data,s=l.error,c=l.isLoading,u=l.isValidating,m=l.mutate,p=(null==i||null===(r=i.data)||void 0===r?void 0:r.results.length)>0?null==i?void 0:i.data.results.sort((function(e,r){return r.dateEnrolled>e.dateEnrolled?1:-1})):null,g=null==p?void 0:p.filter((function(e){return!e.dateCompleted}));return{data:i?(0,o.Z)(p,(function(e){var r;return null==e||null===(r=e.program)||void 0===r?void 0:r.uuid})):null,isError:s,isLoading:c,isValidating:u,activeEnrollments:g,mutateEnrollments:m}}function m(e){var r,t,o=(0,n.ZP)("".concat(a.restBaseUrl,"/program?v=custom:(uuid,display,allWorkflows,concept:(uuid,display))"),a.openmrsFetch),c=o.data,d=o.error,u=o.isLoading,m=null!==(t=null==c||null===(r=c.data)||void 0===r?void 0:r.results)&&void 0!==t?t:null;return{data:m,isError:d,isLoading:u,eligiblePrograms:(0,l.Z)(m,(function(r){return!(0,i.Z)((0,s.Z)(e,"program.uuid"),r.uuid)}))}}function p(e,r){if(!e)return null;var t=e.program,n=e.patient,o=e.dateEnrolled,l=e.dateCompleted,i=e.location;return(0,a.openmrsObservableFetch)("".concat(a.restBaseUrl,"/programenrollment"),{method:"POST",headers:{"Content-Type":"application/json"},body:{program:t,patient:n,dateEnrolled:o,dateCompleted:l,location:i},signal:r.signal})}function g(e,r,t){if(!r&&!r.program)return null;r.program;var n=r.dateEnrolled,o=r.dateCompleted,l=r.location;return(0,a.openmrsObservableFetch)("".concat(a.restBaseUrl,"/programenrollment/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:{dateEnrolled:n,dateCompleted:o,location:l},signal:t.signal})}var v=function(e){var r,t,n=u(e),a=n.data,o=n.isError,l=n.isLoading,i=n.isValidating,s=n.activeEnrollments,d=m(a),p=d.data,g=d.eligiblePrograms;return r=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){c(e,r,t[r])}))}return e}({enrollments:a},{isLoading:l,isError:o}),t=null!=(t={isValidating:i,activeEnrollments:s,availablePrograms:p,eligiblePrograms:g})?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})),r}},3979:(e,r,t)=>{var n={"./am.json":[8788,788],"./ar.json":[4460,460],"./en.json":[3574,574],"./es.json":[8319,319],"./fr.json":[2757,757],"./he.json":[5833,833],"./km.json":[7807,807],"./zh.json":[8271,271],"./zh_CN.json":[1644,644]};function a(e){if(!t.o(n,e))return Promise.resolve().then((()=>{var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}));var r=n[e],a=r[0];return t.e(r[1]).then((()=>t(a)))}a.keys=()=>Object.keys(n),a.id=3979,e.exports=a},506:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});const n=function(e,r,t){for(var n=-1,a=Object(e),o=t(e),l=o.length;l--;){var i=o[++n];if(!1===r(a[i],i,a))break}return e};var a=t(2198);var o=t(3282);const l=(i=function(e,r){return e&&n(e,r,a.Z)},function(e,r){if(null==e)return e;if(!(0,o.Z)(e))return i(e,r);for(var t=e.length,n=-1,a=Object(e);++n<t&&!1!==r(a[n],n,a););return e});var i},9626:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});var n=t(2300),a=t(506);const o=function(e,r){var t=[];return(0,a.Z)(e,(function(e,n,a){r(e,n,a)&&t.push(e)})),t};var l=t(9481),i=t(7885);const s=function(e,r){return((0,i.Z)(e)?n.Z:o)(e,(0,l.Z)(r,3))}},4185:(e,r,t)=>{"use strict";t.d(r,{Z:()=>p});var n=t(7626),a=t(3282),o=t(8147),l=t(7885),i=t(3391);var s=t(6127),c=t(5598);var d=t(2198);const u=function(e){return null==e?[]:function(e,r){return(0,c.Z)(r,(function(r){return e[r]}))}(e,(0,d.Z)(e))};var m=Math.max;const p=function(e,r,t,c){e=(0,a.Z)(e)?e:u(e),t=t&&!c?(0,s.Z)(t):0;var d=e.length;return t<0&&(t=m(d+t,0)),function(e){return"string"==typeof e||!(0,l.Z)(e)&&(0,i.Z)(e)&&"[object String]"==(0,o.Z)(e)}(e)?t<=d&&e.indexOf(r,t)>-1:!!d&&(0,n.Z)(e,r,t)>-1}},6772:(e,r,t)=>{"use strict";t.d(r,{Z:()=>c});var n=t(5598),a=t(9481),o=t(506),l=t(3282);const i=function(e,r){var t=-1,n=(0,l.Z)(e)?Array(e.length):[];return(0,o.Z)(e,(function(e,a,o){n[++t]=r(e,a,o)})),n};var s=t(7885);const c=function(e,r){return((0,s.Z)(e)?n.Z:i)(e,(0,a.Z)(r,3))}}}]);