(globalThis.webpackChunk_openmrs_esm_patient_allergies_app=globalThis.webpackChunk_openmrs_esm_patient_allergies_app||[]).push([[560],{5456:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var l=r(272),a=r.n(l),n=r(2609),i=r.n(n)()(a());i.push([e.id,".-esm-patient-allergies__allergies-action-menu__layer___wKuhP{height:100%}.-esm-patient-allergies__allergies-action-menu__layer___wKuhP .cds--overflow-menu{min-height:unset}.-esm-patient-allergies__allergies-action-menu__menuItem___u3m42{max-width:none}","",{version:3,sources:["webpack://./src/allergies/allergies-action-menu.scss"],names:[],mappings:"AAAA,8DACE,WAAA,CAEA,kFACE,gBAAA,CAIJ,iEACE,cAAA",sourceRoot:""}]),i.locals={layer:"-esm-patient-allergies__allergies-action-menu__layer___wKuhP",menuItem:"-esm-patient-allergies__allergies-action-menu__menuItem___u3m42"};const A=i},5771:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var l=r(272),a=r.n(l),n=r(2609),i=r.n(n)()(a());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79;--bottom-nav-height: 4rem;--workspace-header-height: 3rem;--tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height));--desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height))}.-esm-patient-allergies__allergies-detailed-summary__widgetCard___h_2Ps{border:1px solid #e0e0e0}.-esm-patient-allergies__allergies-detailed-summary__allergyCriticality___oKFHF{display:flex;align-items:center;text-transform:uppercase}.-esm-patient-allergies__allergies-detailed-summary__allergySeverityHigh___BXOA1{font-weight:800}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/allergies/allergies-detailed-summary.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,+BAAA,CACA,yEAAA,CACA,2GAAA,CCvDF,wEACE,wBAAA,CAGF,gFACE,YAAA,CACA,kBAAA,CACA,wBAAA,CAGF,iFACE,eAAA",sourceRoot:""}]),i.locals={widgetCard:"-esm-patient-allergies__allergies-detailed-summary__widgetCard___h_2Ps",allergyCriticality:"-esm-patient-allergies__allergies-detailed-summary__allergyCriticality___oKFHF",allergySeverityHigh:"-esm-patient-allergies__allergies-detailed-summary__allergySeverityHigh___BXOA1"};const A=i},5807:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var l=r(272),a=r.n(l),n=r(2609),i=r.n(n)()(a());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79;--bottom-nav-height: 4rem;--workspace-header-height: 3rem;--tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height));--desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height))}.-esm-patient-allergies__allergies-tile__label___dMfkW{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px);color:#525252}.-esm-patient-allergies__allergies-tile__content____n5Gu{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#525252;margin-top:5px}.-esm-patient-allergies__allergies-tile__value___qWVfJ{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/allergies/allergies-tile.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,+BAAA,CACA,yEAAA,CACA,2GAAA,CCxDF,uDC+1BI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CD71BF,aAAA,CAGF,yDC01BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDx1BF,aDLQ,CCMR,cAAA,CAGF,uDCo1BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA",sourceRoot:""}]),i.locals={label:"-esm-patient-allergies__allergies-tile__label___dMfkW",content:"-esm-patient-allergies__allergies-tile__content____n5Gu",value:"-esm-patient-allergies__allergies-tile__value___qWVfJ"};const A=i},6705:(e,t,r)=>{"use strict";r.d(t,{$e:()=>A,PI:()=>n});var l=r(3255),a=r(2870);function n(e){var t,r="".concat(a.fhirBaseUrl,"/AllergyIntolerance?patient=").concat(e),n=(0,l.ZP)(e?r:null,a.openmrsFetch),A=n.data,o=n.error,s=n.isLoading,c=n.isValidating,d=n.mutate,u=(null==A||null===(t=A.data)||void 0===t?void 0:t.total)>0?null==A?void 0:A.data.entry.map((function(e){var t;return null!==(t=e.resource)&&void 0!==t?t:[]})).map(i).sort((function(e,t){return t.lastUpdated>e.lastUpdated?1:-1})):null;return{allergies:A?u:null,isError:o,isLoading:s,isValidating:c,mutate:d}}function i(e){var t,r,l,a,n,i,A,o,s,c,d,u,m,p=null==e||null===(r=e.reaction[0])||void 0===r||null===(t=r.manifestation)||void 0===t?void 0:t.map((function(e){return null==e?void 0:e.text}));return{id:null==e?void 0:e.id,clinicalStatus:null==e||null===(a=e.clinicalStatus)||void 0===a||null===(l=a.coding[0])||void 0===l?void 0:l.display,criticality:null==e?void 0:e.criticality,display:null==e||null===(n=e.code)||void 0===n?void 0:n.text,recordedDate:null==e?void 0:e.recordedDate,recordedBy:null==e||null===(i=e.recorder)||void 0===i?void 0:i.display,recorderType:null==e||null===(A=e.recorder)||void 0===A?void 0:A.type,note:null==e||null===(s=e.note)||void 0===s||null===(o=s[0])||void 0===o?void 0:o.text,reactionToSubstance:null==e||null===(d=e.reaction[0])||void 0===d||null===(c=d.substance)||void 0===c?void 0:c.text,reactionManifestations:p,reactionSeverity:null==e||null===(u=e.reaction[0])||void 0===u?void 0:u.severity,lastUpdated:null==e||null===(m=e.meta)||void 0===m?void 0:m.lastUpdated}}function A(e,t,r){return(0,a.openmrsFetch)("".concat(a.restBaseUrl,"/patient/").concat(e,"/allergy/").concat(t),{method:"DELETE",signal:r.signal})}},5560:(e,t,r)=>{"use strict";r.r(t),r.d(t,{allergiesDashboardLink:()=>J,allergiesDetailedSummary:()=>K,allergyDeleteConfirmationDialog:()=>X,allergyFormWorkspace:()=>q,allergyTile:()=>Q,importTranslation:()=>z,startupApp:()=>W});var l=r(2870),a=r(2821),n={concepts:{drugAllergenUuid:{_type:l.Type.ConceptUuid,_default:"162552AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},environmentalAllergenUuid:{_type:l.Type.ConceptUuid,_default:"162554AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},foodAllergenUuid:{_type:l.Type.ConceptUuid,_default:"162553AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},mildReactionUuid:{_type:l.Type.ConceptUuid,_default:"1498AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},moderateReactionUuid:{_type:l.Type.ConceptUuid,_default:"1499AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},severeReactionUuid:{_type:l.Type.ConceptUuid,_default:"1500AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},allergyReactionUuid:{_type:l.Type.ConceptUuid,_default:"162555AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},otherConceptUuid:{_type:l.Type.ConceptUuid,_default:"5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"}}},i=r(7900),A=r.n(i),o=r(2779),s=r.n(o),c=r(4924),d=r(935),u=r(8871),m=r(6705),p="patient-allergy-form-workspace",g=r(321),y=r.n(g),_=r(1195),v=r.n(_),h=r(3275),f=r.n(h),b=r(7162),C=r.n(b),E=r(2094),w=r.n(E),O=r(757),D=r.n(O),k=r(5771),S={};S.styleTagTransform=D(),S.setAttributes=C(),S.insert=f().bind(null,"head"),S.domAPI=v(),S.insertStyleElement=w(),y()(k.Z,S);const j=k.Z&&k.Z.locals?k.Z.locals:void 0;var P=r(8697),T=r(5456),U={};U.styleTagTransform=D(),U.setAttributes=C(),U.insert=f().bind(null,"head"),U.domAPI=v(),U.insertStyleElement=w(),y()(T.Z,U);const B=T.Z&&T.Z.locals?T.Z.locals:void 0;var I=function(e){var t=e.allergy,r=e.patientUuid,n=(0,c.useTranslation)().t,o="tablet"===(0,l.useLayoutType)(),s=(0,i.useCallback)((function(){(0,a.launchPatientWorkspace)(p,{workspaceTitle:n("editAllergy","Edit an Allergy"),allergy:t,formContext:"editing"})}),[t,n]);return A().createElement(d.mh4,{className:B.layer},A().createElement(d.PQB,{"aria-label":n("editOrDeleteAllergy","Edit or delete allergy"),size:o?"lg":"sm",flipped:!0,align:"left"},A().createElement(d.laM,{className:B.menuItem,id:"editAllergy",onClick:s,itemText:n("edit","Edit")}),A().createElement(d.laM,{className:B.menuItem,id:"deleteAllergy",itemText:n("delete","Delete"),onClick:function(){return e=t.id,void(a=(0,l.showModal)("allergy-delete-confirmation-dialog",{closeDeleteModal:function(){return a()},allergyId:e,patientUuid:r}));var e,a},isDelete:!0,hasDivider:!0})))};function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},l=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),l.forEach((function(t){N(e,t,r[t])}))}return e}var F=r(5807),R={};R.styleTagTransform=D(),R.setAttributes=C(),R.insert=f().bind(null,"head"),R.domAPI=v(),R.insertStyleElement=w(),y()(F.Z,R);const L=F.Z&&F.Z.locals?F.Z.locals:void 0;function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H="@openmrs/esm-patient-allergies-app",Z={featureName:"patient-allergies",moduleName:H},z=r(3979);function W(){(0,l.messageOmrsServiceWorker)({type:"registerDynamicRoute",pattern:".+".concat(l.restBaseUrl,"/concept.+")}),(0,l.messageOmrsServiceWorker)({type:"registerDynamicRoute",pattern:".+".concat(l.restBaseUrl,"/patient/.+/allergy.+")}),(0,l.messageOmrsServiceWorker)({type:"registerDynamicRoute",pattern:".+".concat(l.fhirBaseUrl,"/AllergyIntolerance.+")}),(0,l.defineConfigSchema)(H,n)}var G,V,K=(0,l.getSyncLifecycle)((function(e){var t=e.patient,r=(0,c.useTranslation)().t,n=r("allergyIntolerances","allergy intolerances"),i=r("allergies","Allergies"),o=(0,m.PI)(t.id),g=o.allergies,y=o.isError,_=o.isLoading,v=o.isValidating,h=(0,l.useLayoutType)(),f="tablet"===h,b="small-desktop"===h||"large-desktop"===h,C=A().useCallback((function(){return(0,a.launchPatientWorkspace)(p)}),[]),E=[{key:"display",header:r("allergen","Allergen")},{key:"reactionSeverity",header:r("severityandReaction","Severity")},{key:"reaction",header:r("reaction","Reaction")},{key:"note",header:r("onsetDateAndComments","Onset date and comments")}],w=A().useMemo((function(){return null==g?void 0:g.map((function(e){var t,r;return function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);r.push.apply(r,l)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}(x({},e),{reactionSeverity:{content:A().createElement("span",{className:j.allergyCriticality},e.reactionSeverity===P.I.SEVERE&&A().createElement("svg",{className:"omrs-icon omrs-margin-right-4",fill:"rgba(181, 7, 6, 1)",style:{height:"1.25rem"}},A().createElement("use",{xlinkHref:"#omrs-icon-important-notification"})),A().createElement("span",{className:s()(N({},j.allergySeverityHigh,e.reactionSeverity===P.I.SEVERE))},e.reactionSeverity))},lastUpdated:e.lastUpdated?(0,l.formatDate)((0,l.parseDate)(e.lastUpdated),{time:!1}):"--",reaction:null===(t=e.reactionManifestations)||void 0===t?void 0:t.join(", "),note:null!==(r=null==e?void 0:e.note)&&void 0!==r?r:"--"})}))}),[g]);return _?A().createElement(d.gqd,{role:"progressbar",compact:b,zebra:!0}):y?A().createElement(a.ErrorState,{error:y,headerTitle:i}):(null==g?void 0:g.length)?A().createElement("div",{className:j.widgetCard},A().createElement(a.CardHeader,{title:i},A().createElement("span",null,v?A().createElement(d.lSo,null):null),A().createElement(d.zxk,{kind:"ghost",renderIcon:function(e){return A().createElement(u.mm,x({size:16},e))},iconDescription:"Add allergies",onClick:C},r("add","Add"))),A().createElement(d.wQF,{rows:w,headers:E,isSortable:!0,useZebraStyles:!0,size:f?"lg":"sm"},(function(e){var r=e.rows,l=e.headers,a=e.getHeaderProps,n=e.getTableProps;return A().createElement(d.xJi,null,A().createElement(d.iA_,x({"aria-label":"allergies summary"},n()),A().createElement(d.ssF,null,A().createElement(d.SCH,null,l.map((function(e){var t,r;return A().createElement(d.xDH,x({className:s()(j.productiveHeading01,j.text02)},a({header:e,isSortable:e.isSortable})),null!==(r=null===(t=e.header)||void 0===t?void 0:t.content)&&void 0!==r?r:e.header)})),A().createElement(d.xDH,null))),A().createElement(d.RMI,null,r.map((function(e){return A().createElement(d.SCH,{key:e.id},e.cells.map((function(e){var t,r;return A().createElement(d.pj1,{key:e.id},null!==(r=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==r?r:e.value)})),A().createElement(d.pj1,{className:"cds--table-column-menu"},A().createElement(I,{patientUuid:t.id,allergy:g.find((function(t){return t.id==e.id}))})))})))))}))):A().createElement(a.EmptyState,{displayText:n,headerTitle:i,launchForm:C})}),Z),J=(0,l.getSyncLifecycle)((0,a.createDashboardLink)((G=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},l=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),l.forEach((function(t){M(e,t,r[t])}))}return e}({},{slot:"patient-chart-allergies-dashboard-slot",columns:1,path:"Allergies",title:"Allergies"}),V=null!=(V={moduleName:H})?V:{},Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(V)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);r.push.apply(r,l)}return r}(Object(V)).forEach((function(e){Object.defineProperty(G,e,Object.getOwnPropertyDescriptor(V,e))})),G)),Z),q=(0,l.getAsyncLifecycle)((function(){return Promise.all([r.e(940),r.e(198),r.e(27)]).then(r.bind(r,4027))}),Z),Q=(0,l.getSyncLifecycle)((function(e){var t=e.patientUuid,r=(0,c.useTranslation)().t,l=(0,m.PI)(t),a=l.allergies;return l.isLoading?A().createElement(d.lSo,{role:"progressbar",description:"".concat(r("loading","Loading")," ...")}):(null==a?void 0:a.length)?A().createElement("div",null,A().createElement("p",{className:L.label},r("allergies","Allergies")),A().createElement("p",{className:L.content},A().createElement("span",{className:L.value},null==a?void 0:a.map((function(e){return null==e?void 0:e.display})).join(", ")))):A().createElement("div",null,A().createElement("p",{className:L.label},r("allergies","Allergies")),A().createElement("p",{className:L.content},"--"))}),Z),X=(0,l.getAsyncLifecycle)((function(){return r.e(910).then(r.bind(r,5910))}),Z)},8697:(e,t,r)=>{"use strict";var l,a;r.d(t,{H:()=>a,I:()=>l}),function(e){e.MILD="mild",e.MODERATE="moderate",e.SEVERE="severe"}(l||(l={})),function(e){e.DRUG="DRUG",e.FOOD="FOOD",e.ENVIRONMENT="ENVIRONMENT",e.OTHER="OTHER"}(a||(a={}))},3979:(e,t,r)=>{var l={"./am.json":[8788,788],"./ar.json":[4460,460],"./en.json":[3574,574],"./es.json":[8319,319],"./fr.json":[2757,757],"./he.json":[5833,833],"./km.json":[7807,807],"./zh.json":[8271,271],"./zh_CN.json":[1644,644]};function a(e){if(!r.o(l,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=l[e],a=t[0];return r.e(t[1]).then((()=>r(a)))}a.keys=()=>Object.keys(l),a.id=3979,e.exports=a}}]);