"use strict";(globalThis.webpackChunk_openmrs_esm_patient_attachments_app=globalThis.webpackChunk_openmrs_esm_patient_attachments_app||[]).push([[797],{5088:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(272),r=a.n(n),i=a(2609),o=a.n(i)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79;--bottom-nav-height: 4rem;--workspace-header-height: 3rem;--tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height));--desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height))}:root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79;--bottom-nav-height: 4rem;--workspace-header-height: 3rem;--tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height));--desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height))}.-esm-patient-attachments__camera-media-uploader__productiveHeading02___SF9v_{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-patient-attachments__camera-media-uploader__productiveHeading03___kyc2j{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-attachments__camera-media-uploader__bodyLong01___E3SSh{font-size:var(--cds-body-long-01-font-size, 0.875rem);font-weight:var(--cds-body-long-01-font-weight, 400);line-height:var(--cds-body-long-01-line-height, 1.42857);letter-spacing:var(--cds-body-long-01-letter-spacing, 0.16px)}.-esm-patient-attachments__camera-media-uploader__bodyShort01___Fgqqf{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-attachments__camera-media-uploader__text02___zldA6{color:#525252}.-esm-patient-attachments__camera-media-uploader__cameraSection___O1_hE{width:inherit;background-color:#fff}.-esm-patient-attachments__camera-media-uploader__cameraSection___O1_hE .react-html5-camera-photo>img,.-esm-patient-attachments__camera-media-uploader__cameraSection___O1_hE .react-html5-camera-photo>video{max-width:100%;max-height:100%}.-esm-patient-attachments__camera-media-uploader__uploadFile___xPA_w{color:#fff}.-esm-patient-attachments__camera-media-uploader__uploadFile___xPA_w label{max-width:unset}.-esm-patient-attachments__camera-media-uploader__uploadFile___xPA_w label>div{height:25rem;justify-content:center;align-items:center}.-esm-patient-attachments__camera-media-uploader__modalBody___YH4FB{padding:0;margin:0}@media(max-width: 1023px){.-esm-patient-attachments__camera-media-uploader__frameContent___f9Y86{width:65%}}.-esm-patient-attachments__camera-media-uploader__tabList___ougWM{border-bottom:2px solid #e0e0e0}.-esm-patient-attachments__camera-media-uploader__tabList___ougWM div{position:absolute;bottom:-2px;height:100%;z-index:1}.-esm-patient-attachments__camera-media-uploader__tabList___ougWM div button>div{align-items:center}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/root.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./src/camera-media-uploader/camera-media-uploader.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,+BAAA,CACA,yEAAA,CACA,2GAAA,CAPF,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,+BAAA,CACA,yEAAA,CACA,2GAAA,CCvDF,8EC81BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD11BJ,8EC01BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDt1BJ,qECs1BI,qDAAA,CAAA,oDAAA,CAAA,wDAAA,CAAA,6DAAA,CDl1BJ,sECk1BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD90BJ,iEACE,aDhBQ,CGDV,wEACE,aAAA,CACA,qBHLM,CGSN,8MACE,cAAA,CACA,eAAA,CAIJ,qEACE,UHhBM,CGkBN,2EACE,eAAA,CAGF,+EACE,YAAA,CACA,sBAAA,CACA,kBAAA,CAKJ,oEACE,SAAA,CACA,QAAA,CAGF,0BACE,uEACE,SAAA,CAAA,CAIJ,kEACE,+BAAA,CAEA,sEACE,iBAAA,CACA,WAAA,CACA,WAAA,CACA,SAAA,CAEA,iFACE,kBAAA",sourceRoot:""}]),o.locals={productiveHeading02:"-esm-patient-attachments__camera-media-uploader__productiveHeading02___SF9v_",productiveHeading03:"-esm-patient-attachments__camera-media-uploader__productiveHeading03___kyc2j",bodyLong01:"-esm-patient-attachments__camera-media-uploader__bodyLong01___E3SSh",bodyShort01:"-esm-patient-attachments__camera-media-uploader__bodyShort01___Fgqqf",text02:"-esm-patient-attachments__camera-media-uploader__text02___zldA6",cameraSection:"-esm-patient-attachments__camera-media-uploader__cameraSection___O1_hE",uploadFile:"-esm-patient-attachments__camera-media-uploader__uploadFile___xPA_w",modalBody:"-esm-patient-attachments__camera-media-uploader__modalBody___YH4FB",frameContent:"-esm-patient-attachments__camera-media-uploader__frameContent___f9Y86",tabList:"-esm-patient-attachments__camera-media-uploader__tabList___ougWM"};const s=o},8265:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(272),r=a.n(n),i=a(2609),o=a.n(i)()(r());o.push([e.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79;--bottom-nav-height: 4rem;--workspace-header-height: 3rem;--tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height));--desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height))}.-esm-patient-attachments__file-review__productiveHeading02___vucWQ{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-patient-attachments__file-review__productiveHeading03___nppG6{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-attachments__file-review__bodyLong01___Jn8EJ{font-size:var(--cds-body-long-01-font-size, 0.875rem);font-weight:var(--cds-body-long-01-font-weight, 400);line-height:var(--cds-body-long-01-line-height, 1.42857);letter-spacing:var(--cds-body-long-01-letter-spacing, 0.16px)}.-esm-patient-attachments__file-review__bodyShort01___tbQT7{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-attachments__file-review__text02___zvcF2{color:#525252}.-esm-patient-attachments__file-review__filePreviewContainer___uBnMP{background-color:#fff}.-esm-patient-attachments__file-review__overview___BVR7S{display:grid;grid-template-columns:1fr 1fr}.-esm-patient-attachments__file-review__overview___BVR7S img{max-width:100%;max-height:20rem;display:block;align-self:center;justify-self:center}.-esm-patient-attachments__file-review__overview___BVR7S .-esm-patient-attachments__file-review__imageDetails___wd97h{margin-left:1rem}.-esm-patient-attachments__file-review__captionFrame___J0fPF{margin-bottom:.3rem}.-esm-patient-attachments__file-review__buttonSetOverrides___LxmlD{margin:1rem auto 0;display:grid;grid-template-columns:1fr 1fr}.-esm-patient-attachments__file-review__buttonSetOverrides___LxmlD>button{max-width:unset}.-esm-patient-attachments__file-review__filePlaceholder___URPz3{background-color:#c6c6c6;display:flex;justify-content:center;align-items:center;width:50%;margin:0 auto}.-esm-patient-attachments__file-review__filePlaceholder___URPz3::after{content:"";display:block;padding-bottom:100%}',"",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/root.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./src/camera-media-uploader/file-review.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,+BAAA,CACA,yEAAA,CACA,2GAAA,CCvDF,oEC81BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD11BJ,oEC01BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDt1BJ,2DCs1BI,qDAAA,CAAA,oDAAA,CAAA,wDAAA,CAAA,6DAAA,CDl1BJ,4DCk1BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD90BJ,uDACE,aDhBQ,CGFV,qEACE,qBHHM,CGMR,yDACE,YAAA,CACA,6BAAA,CAED,6DACG,cAAA,CACA,gBAAA,CACA,aAAA,CACA,iBAAA,CACA,mBAAA,CAGF,sHACE,gBAAA,CAIJ,6DACE,mBAAA,CAGF,mEACE,kBAAA,CACA,YAAA,CACA,6BAAA,CAEA,0EACE,eAAA,CAIJ,gEACE,wBH/Bc,CGgCd,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,SAAA,CACA,aAAA,CAGF,uEACE,UAAA,CACA,aAAA,CACA,mBAAA",sourceRoot:""}]),o.locals={productiveHeading02:"-esm-patient-attachments__file-review__productiveHeading02___vucWQ",productiveHeading03:"-esm-patient-attachments__file-review__productiveHeading03___nppG6",bodyLong01:"-esm-patient-attachments__file-review__bodyLong01___Jn8EJ",bodyShort01:"-esm-patient-attachments__file-review__bodyShort01___tbQT7",text02:"-esm-patient-attachments__file-review__text02___zvcF2",filePreviewContainer:"-esm-patient-attachments__file-review__filePreviewContainer___uBnMP",overview:"-esm-patient-attachments__file-review__overview___BVR7S",imageDetails:"-esm-patient-attachments__file-review__imageDetails___wd97h",captionFrame:"-esm-patient-attachments__file-review__captionFrame___J0fPF",buttonSetOverrides:"-esm-patient-attachments__file-review__buttonSetOverrides___LxmlD",filePlaceholder:"-esm-patient-attachments__file-review__filePlaceholder___URPz3"};const s=o},6591:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(272),r=a.n(n),i=a(2609),o=a.n(i)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79;--bottom-nav-height: 4rem;--workspace-header-height: 3rem;--tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height));--desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height))}.-esm-patient-attachments__media-uploader__productiveHeading02___LtNE8{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-patient-attachments__media-uploader__productiveHeading03___bUvPn{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-attachments__media-uploader__bodyLong01___ogOno{font-size:var(--cds-body-long-01-font-size, 0.875rem);font-weight:var(--cds-body-long-01-font-weight, 400);line-height:var(--cds-body-long-01-line-height, 1.42857);letter-spacing:var(--cds-body-long-01-letter-spacing, 0.16px)}.-esm-patient-attachments__media-uploader__bodyShort01___qatTh{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-attachments__media-uploader__text02___hkCGz{color:#525252}.-esm-patient-attachments__media-uploader__errorContainer___rCLDn{margin:1rem 0}.-esm-patient-attachments__media-uploader__uploadFile___gNtZ7{color:#fff;width:100%;height:406px}.-esm-patient-attachments__media-uploader__uploadFile___gNtZ7 div>button{max-width:100%;display:flex;flex-flow:column;justify-content:center;align-items:center;height:406px;position:relative}.-esm-patient-attachments__media-uploader__uploadFile___gNtZ7 label{max-width:unset}.-esm-patient-attachments__media-uploader__uploadFile___gNtZ7 label>div{height:25rem;justify-content:center;align-items:center}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/root.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./src/camera-media-uploader/media-uploader.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,+BAAA,CACA,yEAAA,CACA,2GAAA,CCvDF,uEC81BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD11BJ,uEC01BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDt1BJ,8DCs1BI,qDAAA,CAAA,oDAAA,CAAA,wDAAA,CAAA,6DAAA,CDl1BJ,+DCk1BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD90BJ,0DACE,aDhBQ,CGHV,kEACE,aAAA,CAGF,8DACE,UHNM,CGON,UAAA,CACA,YAAA,CAEA,yEACE,cAAA,CACA,YAAA,CACA,gBAAA,CACA,sBAAA,CACA,kBAAA,CACA,YAAA,CACA,iBAAA,CAGF,oEACE,eAAA,CAGF,wEACE,YAAA,CACA,sBAAA,CACA,kBAAA",sourceRoot:""}]),o.locals={productiveHeading02:"-esm-patient-attachments__media-uploader__productiveHeading02___LtNE8",productiveHeading03:"-esm-patient-attachments__media-uploader__productiveHeading03___bUvPn",bodyLong01:"-esm-patient-attachments__media-uploader__bodyLong01___ogOno",bodyShort01:"-esm-patient-attachments__media-uploader__bodyShort01___qatTh",text02:"-esm-patient-attachments__media-uploader__text02___hkCGz",errorContainer:"-esm-patient-attachments__media-uploader__errorContainer___rCLDn",uploadFile:"-esm-patient-attachments__media-uploader__uploadFile___gNtZ7"};const s=o},5248:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(272),r=a.n(n),i=a(2609),o=a.n(i)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79;--bottom-nav-height: 4rem;--workspace-header-height: 3rem;--tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height));--desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height))}.-esm-patient-attachments__upload-status__productiveHeading02___UG8hn{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-patient-attachments__upload-status__productiveHeading03___jJ32M{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-attachments__upload-status__bodyLong01___eCnAr{font-size:var(--cds-body-long-01-font-size, 0.875rem);font-weight:var(--cds-body-long-01-font-weight, 400);line-height:var(--cds-body-long-01-line-height, 1.42857);letter-spacing:var(--cds-body-long-01-letter-spacing, 0.16px)}.-esm-patient-attachments__upload-status__bodyShort01___mDcJW{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-attachments__upload-status__text02___cfYyX{color:#525252}.-esm-patient-attachments__upload-status__cameraSection___ntyQ2{width:inherit;background-color:#fff}.-esm-patient-attachments__upload-status__uploadingFilesSection___POWLO{display:flex;flex-direction:column;justify-content:center;align-items:center;height:25rem;overflow-y:auto;border:1px dashed #8d8d8d}.-esm-patient-attachments__upload-status__buttonSet___JC7BZ{width:100%;display:grid;grid-template-columns:1fr 1fr}.-esm-patient-attachments__upload-status__buttonSet___JC7BZ button{max-width:unset !important}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/root.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./src/camera-media-uploader/upload-status.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,+BAAA,CACA,yEAAA,CACA,2GAAA,CCvDF,sEC81BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD11BJ,sEC01BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDt1BJ,6DCs1BI,qDAAA,CAAA,oDAAA,CAAA,wDAAA,CAAA,6DAAA,CDl1BJ,8DCk1BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD90BJ,yDACE,aDhBQ,CGFV,gEACE,aAAA,CACA,qBHJM,CGOR,wEACE,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,kBAAA,CACA,YAAA,CACA,eAAA,CACA,yBAAA,CAGF,4DACE,UAAA,CACA,YAAA,CACA,6BAAA,CACA,mEACE,0BAAA",sourceRoot:""}]),o.locals={productiveHeading02:"-esm-patient-attachments__upload-status__productiveHeading02___UG8hn",productiveHeading03:"-esm-patient-attachments__upload-status__productiveHeading03___jJ32M",bodyLong01:"-esm-patient-attachments__upload-status__bodyLong01___eCnAr",bodyShort01:"-esm-patient-attachments__upload-status__bodyShort01___mDcJW",text02:"-esm-patient-attachments__upload-status__text02___cfYyX",cameraSection:"-esm-patient-attachments__upload-status__cameraSection___ntyQ2",uploadingFilesSection:"-esm-patient-attachments__upload-status__uploadingFilesSection___POWLO",buttonSet:"-esm-patient-attachments__upload-status__buttonSet___JC7BZ"};const s=o},1797:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ee});var n=a(7900),r=a.n(n),i=a(4924),o=a(6698),s=a(1569),c=a.n(s);const l=(0,n.createContext)({});a(3493);const A=function(e){var t=e.mediaStream,a=e.stopCameraStream,i=(0,n.useContext)(l),o=i.handleTakePhoto,s=i.setError;(0,n.useEffect)((function(){return function(){a()}}),[a]);var A=(0,n.useCallback)((function(e){t.current=e}),[t]);return r().createElement(c(),{isDisplayStartCameraError:!1,onCameraError:s,onCameraStart:A,onCameraStop:a,onTakePhoto:o})};var d=a(5362),m=a(2870),_=a(321),u=a.n(_),p=a(1195),h=a.n(p),f=a(3275),g=a.n(f),C=a(7162),v=a.n(C),b=a(2094),y=a.n(b),w=a(757),E=a.n(w),D=a(8265),k={};k.styleTagTransform=E(),k.setAttributes=v(),k.insert=g().bind(null,"head"),k.domAPI=h(),k.insertStyleElement=y(),u()(D.Z,k);const S=D.Z&&D.Z.locals?D.Z.locals:void 0;function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=function(e){var t=e.uploadedFile,a=e.collectDescription,s=e.onSaveFile,c=e.clearData,l=(0,i.useTranslation)().t,A=F((0,n.useState)(t.fileName),2),_=A[0],u=A[1],p=F((0,n.useState)(t.fileDescription),2),h=p[0],f=p[1],g=F((0,n.useState)(!1),2),C=g[0],v=g[1],b=(0,n.useCallback)((function(e){var a,n;e.preventDefault(),null==s||s((a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){x(e,t,a[t])}))}return e}({},t),n=null!=(n={fileName:_,fileDescription:h})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a.push.apply(a,n)}return a}(Object(n)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(n,e))})),a))}),[s,_,h,t]),y=(0,n.useCallback)((function(e){e.preventDefault(),null==c||c()}),[c]),w=(0,n.useCallback)((function(e){e.preventDefault(),""===e.target.value?v(!0):C&&v(!1),u(e.target.value)}),[v,u,C]),E=(0,n.useCallback)((function(e){e.preventDefault(),f(e.target.value)}),[f]);return r().createElement(o.l09,{onSubmit:b},r().createElement(o.fef,{className:S.overview},"image"===t.fileType?r().createElement("img",{src:t.base64Content,alt:"placeholder"}):"pdf"===t.fileType?r().createElement("div",{className:S.filePlaceholder},r().createElement(d.Lk,{size:16})):r().createElement("div",{className:S.filePlaceholder},r().createElement(d.Qf,{size:16})),r().createElement("div",{className:S.imageDetails},r().createElement(o.Kqy,{gap:5},r().createElement("div",{className:S.captionFrame},r().createElement(o.oil,{autoComplete:"off",autoFocus:!0,id:"caption",invalid:C,invalidText:C&&l("fieldRequired","This field is required"),labelText:"".concat("image"===t.fileType?l("image","Image"):l("file","File")," ").concat(l("name","name")),onChange:w,placeholder:l("attachmentCaptionInstruction","Enter caption"),required:!0,value:_})),a&&r().createElement(o.Kx8,{autoComplete:"off",id:"description",labelText:l("imageDescription","Image description"),onChange:E,placeholder:l("attachmentCaptionInstruction","Enter caption"),value:h})))),r().createElement(o.mzw,null,r().createElement(m.UserHasAccess,{privilege:"Create Attachment"},r().createElement(o.zxk,{kind:"secondary",size:"lg",onClick:y},l("cancel","Cancel")),r().createElement(o.zxk,{type:"submit",size:"lg",onClick:b,disabled:C},l("addAttachment","Add attachment")))))};const z=function(e){var t,a=e.onCompletion,s=(0,i.useTranslation)().t,c=F((0,n.useState)(1),2),A=c[0],d=c[1],m=(0,n.useContext)(l),_=m.clearData,u=m.closeModal,p=m.collectDescription,h=m.filesToUpload,f=m.setFilesToUpload,g=(0,n.useCallback)((function(){A<h.length?d(A+1):a()}),[d,A,h,a]),C=(0,n.useCallback)((function(e){f((function(t){return t.map((function(t,a){return a===A-1?e:t}))})),g()}),[g,f,A]);return r().createElement("div",{className:S.filePreviewContainer},r().createElement(o.xBx,{closeModal:u,className:S.productiveHeading03},s("addAttachment_title","Add Attachment")," ",h.length>1&&"(".concat(A," of ").concat(h.length,")")),r().createElement(O,{key:null===(t=h[A-1])||void 0===t?void 0:t.fileName,clearData:_,collectDescription:"image"===h[A-1].fileType&&p,moveToNextFile:g,onSaveFile:C,uploadedFile:h[A-1]}))};var P=a(7326),T=a(6591),j={};j.styleTagTransform=E(),j.setAttributes=v(),j.insert=g().bind(null,"head"),j.domAPI=h(),j.insertStyleElement=y(),u()(T.Z,j);const I=T.Z&&T.Z.locals?T.Z.locals:void 0;function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function H(e,t){if(e){if("string"==typeof e)return N(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?N(e,t):void 0}}const M=function(){var e,t,a=(0,i.useTranslation)().t,s=(0,m.useConfig)().maxFileSize,c=(0,n.useContext)(l),A=c.setFilesToUpload,d=c.allowedExtensions,_=c.multipleFiles,u=(e=(0,n.useState)(null),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw r}}return i}}(e,t)||H(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=u[0],h=u[1],f=(0,n.useCallback)((function(e){e.forEach((function(e){if(e.size>1024*s*1024)h({title:a("fileSizeLimitExceededText","File size limit exceeded"),subtitle:'The file "'.concat(e.name,'" ').concat(a("fileSizeLimitExceeded","exceeds the size limit of")," ").concat(s," MB.")});else if(g(e.name,d))(0,P.Z)(e).then((function(t){A((function(a){return function(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(a).concat([{base64Content:t,file:e,fileName:e.name,fileType:"image"===e.type.split("/")[0]?"image":"pdf"===e.type.split("/")[1]?"pdf":"other",fileDescription:"",status:"uploading"}])}))}));else{var t=d.pop();h({title:a("unsupportedFileType","Unsupported file type"),subtitle:a("chooseAnAllowedFileType",'The file "{{fileName}}" cannot be uploaded. Please upload a file with one of the following extensions: {{supportedExtensions}}, or {{ lastExtension }}.',{fileName:e.name,lastExtension:t,supportedExtensions:d.join(", ")})})}}))}),[A,s,a,d]),g=function(e,t){if(!t)return!0;var a=e.split(".").pop();return null==t?void 0:t.includes(a.toLowerCase())};return r().createElement("div",{className:"cds--file__container"},p&&r().createElement("div",{className:I.errorContainer},r().createElement(o.K0D,{"aria-label":"Upload error notification",kind:"error",onClose:function(){return h(null)},subtitle:p.subtitle,title:p.title})),r().createElement("p",{className:"cds--label-description"},a("fileUploadSizeConstraints","Size limit is {{fileSize}}MB",{fileSize:s}),"."),r().createElement("div",{className:I.uploadFile},r().createElement(o.awp,{accept:(null==d?void 0:d.map((function(e){return"."+e})))||["*"],labelText:a("fileSizeInstructions","Drag and drop files here or click to upload"),tabIndex:0,multiple:_,onAddFiles:function(e,t){var a=t.addedFiles;f(a)}})))};var J=a(5248),L={};L.styleTagTransform=E(),L.setAttributes=v(),L.insert=g().bind(null,"head"),L.domAPI=h(),L.insertStyleElement=y(),u()(J.Z,L);const G=J.Z&&J.Z.locals?J.Z.locals:void 0;function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){Z(e,t,a[t])}))}return e}function Y(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}const R=function(){var e,t,a=(0,i.useTranslation)().t,s=(0,n.useContext)(l),c=s.filesToUpload,A=s.saveFile,d=s.closeModal,_=s.clearData,u=s.onCompletion,p=(e=(0,n.useState)([]),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=p[0],f=p[1];return(0,n.useEffect)((function(){c&&f(c.map((function(e){return Y(q({},e),{status:"uploading"})})))}),[c,f]),(0,n.useEffect)((function(){Promise.all(c.map((function(e,t){return A(e).then((function(){(0,m.showSnackbar)({title:a("uploadComplete","Upload complete"),subtitle:"".concat(e.fileName," ").concat(a("uploadedSuccessfully","uploaded successfully")),kind:"success",isLowContrast:!0}),f((function(e){return e.map((function(e,a){return a===t?Y(q({},e),{status:"complete"}):e}))}))})).catch((function(t){(0,m.showSnackbar)({kind:"error",subtitle:t,title:"".concat(a("uploading","Uploading")," ").concat(e.fileName," ").concat(a("failed","failed"))})}))}))).then((function(){null==u||u()}))}),[u,A,c,a,f]),r().createElement("div",{className:G.cameraSection},r().createElement(o.xBx,{closeModal:d,className:G.productiveHeading03,title:a("addAttachment_title","Add Attachment")}),r().createElement(o.fef,null,r().createElement("p",{className:"cds--label-description"},a("uploadWillContinueInTheBackground","Files will be uploaded in the background. You can close this modal.")),r().createElement("div",{className:G.uploadingFilesSection},h.map((function(e,t){return r().createElement(o.Py3,{key:t,name:e.fileName,status:e.status,size:"lg"})})))),r().createElement(o.mzw,null,r().createElement(o.uVA,{className:G.buttonSet},r().createElement(o.zxk,{size:"lg",kind:"secondary",onClick:_},a("addMoreAttachments","Add more attachments")),r().createElement(o.zxk,{size:"lg",kind:"primary",onClick:d},a("closeModal","Close")))))};var W=a(5088),Q={};Q.styleTagTransform=E(),Q.setAttributes=v(),Q.insert=g().bind(null,"head"),Q.domAPI=h(),Q.insertStyleElement=y(),u()(W.Z,Q);const V=W.Z&&W.Z.locals?W.Z.locals:void 0;function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?K(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=function(){var e=(0,i.useTranslation)().t,t=$((0,n.useState)("upload"),2),a=t[0],s=t[1],c=(0,n.useContext)(l),d=c.cameraOnly,m=c.closeModal,_=c.error,u=(0,n.useRef)(),p=(0,n.useCallback)((function(){var e;null===(e=u.current)||void 0===e||e.getTracks().forEach((function(e){return e.stop()}))}),[u]);return(0,n.useEffect)((function(){return function(){p()}}),[p]),d?r().createElement(A,{mediaStream:u,stopCameraStream:p}):r().createElement("div",{className:V.cameraSection},r().createElement(o.xBx,{closeModal:m,title:e("addAttachment_title","Add Attachment")}),r().createElement(o.fef,{className:V.modalBody},r().createElement(o.mQc,{className:V.tabs,defaultSelectedIndex:1},r().createElement(o.tdY,{"aria-label":"Attachments-upload-section",className:V.tabList},r().createElement(o.OK9,{onClick:function(){return s("camera")}},e("webcam","Webcam")),r().createElement(o.OK9,{onClick:function(){return s("upload")}},e("uploadFiles","Upload files"))),r().createElement(o.nPR,null,r().createElement(o.x45,null,_?r().createElement(o.K0D,{subtitle:e("cameraAccessErrorMessage","Please enable camera access in your browser settings and try again."),title:e("cameraError","Camera error")}):null,"camera"===a&&r().createElement(A,{mediaStream:u,stopCameraStream:p})),r().createElement(o.x45,null,r().createElement(M,null))))))};const ee=function(e){var t=e.allowedExtensions,a=e.cameraOnly,i=e.closeModal,o=e.collectDescription,s=e.multipleFiles,c=e.onCompletion,A=e.saveFile,d=$((0,n.useState)(null),2),m=d[0],_=d[1],u=$((0,n.useState)([]),2),p=u[0],h=u[1],f=$((0,n.useState)(!1),2),g=f[0],C=f[1],v=(0,n.useCallback)((function(e){h([{base64Content:e,fileName:"Image taken from camera",fileType:"image",fileDescription:"",status:"uploading"}])}),[]),b=(0,n.useCallback)((function(){h([]),C(!1),_(void 0)}),[h,C]),y=(0,n.useCallback)((function(){C(!0)}),[C]),w=(0,n.useMemo)((function(){return g?r().createElement(R,null):p.length?r().createElement(z,{onCompletion:y}):r().createElement(X,null)}),[g,p,y]);return r().createElement(l.Provider,{value:{allowedExtensions:t,cameraOnly:a,clearData:b,closeModal:i,collectDescription:o,error:m,filesToUpload:p,handleTakePhoto:v,multipleFiles:s,onCompletion:c,saveFile:A,setError:_,setFilesToUpload:h,setUploadFilesToServer:C,uploadFilesToServer:g}},w)}}}]);